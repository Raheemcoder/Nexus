@{
    var userName = Context.Session.GetString("LoggedUserName");
    var firstLetter = userName.Substring(0, 1);
    var AppshortName = Context.Session.GetString("AppShortName");
}

<!DOCTYPE html>
<html lang="en" class="skew">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - ISpace</title>
    <link rel="icon" type="image/x-icon" href="@Url.Content("~/N_assets/images/leaf.ico")" />
    <link href="@Url.Content("~/N_assets/css/layout.min.css")" rel="stylesheet" />
    <link rel="stylesheet" href="@Url.Content("~/lib/bootstrap/dist/css/bootstrap.min.css")" />
    <link href="@Url.Content("~/N_assets/css/animate.min.css")" rel="stylesheet" />

    <script src="@Url.Content("~/lib/jquery/dist/jquery.min.js")"></script>
    <script src="@Url.Content("~/N_assets/js/popper.min.js")"></script>
    <script src="@Url.Content("~/N_assets/js/bootstrap.min.js")"></script>
    <script src="@Url.Content("~/lib/bootstrap/dist/js/bootstrap.bundle.min.js")"></script>
    <script src="@Url.Content("~/N_assets/plugins/jqgrid/js/grid.locale-en.min.js")"></script>
    <script src="@Url.Content("~/N_assets/plugins/jqgrid/js/jquery.jqgrid.min.js")"></script>
    <script src="@Url.Content("~/N_assets/plugins/jqgrid/js/jquery-ui.min.js")"></script>
    <script src="@Url.Content("~/N_assets/js/jqgrid.min.js")" asp-append-version="true"></script>
    <script src="@Url.Content("~/N_assets/plugins/select2/select2.min.js")"></script>
    <script src="@Url.Content("~/N_assets/plugins/bootstrap-datepicker/bootstrap-datepicker.min.js")"></script>
    <script src="@Url.Content("~/N_assets/plugins/bootstrap-multiselect/bootstrap-multiselect.min.js")"></script>
    <script src="@Url.Content("~/N_assets/js/app.min.js")" asp-append-version="true"></script>
    <script src="@Url.Content("~/N_assets/js/jquery.fullscreen-min.js")"></script>
    <script src="@Url.Content("~/N_assets/js/crypto-js.js")"></script>
    @*<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js"></script>*@
    <script src="@Url.Content("~/assets_eppm/plugins/jqgrid/js/jszip.min.js")"></script>
    <script src="@Url.Content("~/js/jquery.validate.min.js")" asp-append-version="true"></script>
    <script src="@Url.Content("~/js/jquery.validate.unobtrusive.min.js")" asp-append-version="true"></script>
    <script src="@Url.Content("~/ckeditor/ckeditor.js")" asp-append-version="true"></script>
    <script src="@Url.Content("~/N_assets/ckeditor_4.22.1_standard/ckeditor/ckeditor.js")"></script>


    @await RenderSectionAsync("Scripts", required: false)
    <script>
     var ROOT = "@Url.Content("~/")";
    </script>
</head>
<body class="new_layout" id="jquery-script-menu">
    <div class="c-loader" id="loader">
        <div class="c-loader__container">
            <div class="c-loader__inner">
            </div>
            <div class="c-loader__outer">
            </div>
            <div class="c-loader__img">
            </div>
        </div>
    </div>
    <header id="topnav" class="header_section">
        @*header logo container starts*@
        <div class="ispace-logo">
            <a class="logo" href="@Url.Content("~/Landing/Index")"><img src="@Url.Content("~/N_assets/images/ispace-logo.png")" alt="ispace" height="30px" /></a>
        </div>
        <!-- end container -->
        <div>
            <div class="d-flex">
                <div>
                    <div class="header_nav">
                        <div id="navigation">
                            <ul class="navigation-menu" id="main_menu">
                                @await Component.InvokeAsync("MainMenu")
                                <li class="has-submenu">
                                    <a href="@Url.Content("~/ProjectBrief/ProjectBrief")">Project Brief </a>
                                </li>
                                <li class="has-submenu ">
                                    <a href="">Create New<i class="flaticon-down-arrow-1 "></i></a>
                                    <ul class="submenu" id="main_menu1">
                                        <li><a href="@Url.Content("~/ProjectBrief/NPD")">NPD </a></li>
                                        <li><a href="@Url.Content("~/ProjectBrief/NewReformulation")">Reformulation </a></li>
                                        <li><a href="@Url.Content("~/ProjectBrief/PackagingInitiative")">Packaging Initiative </a></li>
                                    </ul>
                                </li>
                                @*<li class="has-submenu ">
            <a href="">Masters<i class="flaticon-down-arrow-1 "></i></a>
            <ul class="submenu" id="main_menu1">
                <li><a href="@Url.Content("~/")">User </a></li>
            </ul>
        </li>*@
                            </ul>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="d-flex align-items-center user_info top_position">
                        <div class="d-flex user_name_ cursor">
                            <span class="circular_icon" style="cursor: pointer">@firstLetter</span>
                            <label class="mb-0" style="cursor: pointer">@userName</label>
                            <span style="cursor: pointer">
                                <img src="@Url.Content("~/N_assets/images/himalaya_leaf logo.png")" width="22px" />
                            </span>
                            <div class="logout">
                                <ul>
                                    <li><a href="@Url.Content("~/Login/Logout")"><i class="fa fa-sign-out-alt"></i> Logout</a></li>
                                </ul>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </header>

    <!--<div class="menu-section">-->
    @*<span class="menu_name">Menu's</span>*@
    <!--<ul>
            <li><a href=""><i class="fas fa-cog"></i> <span class="menu_item">Claim Grid</span></a></li>
        </ul>
    </div>-->
    <div class="container-fluid body-content element " id="element">
        <main role="main" class="">
            @RenderBody()
        </main>
    </div>
    <footer class="border-top footer text-muted ">
        &copy; @DateTime.Now.Year - Himalaya Wellness Company. All rights reserved
    </footer>

    @*Confirm modal popup*@
    <div id="confirmpopup" class="modal fade layout_popup" role="dialog" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-xs">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Confirm Box</h4>
                    <button type="button" class="close" data-bs-dismiss="modal"><span>&times;</span></button>
                </div>
                <div class="modal-body">
                    <div>
                        <span id="confirmpopupmesssage">Are you sure u want Confirm</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-draft" id="ConfirmOKbutton" data-bs-dismiss="modal">Ok</button>
                    <button type="button" class="btn btn-cancel" data-bs-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    @*Alert modal popup*@
    <div id="alertpopup" class="modal fade layout_popup" role="dialog" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-xs">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Alert Box</h4>
                    <button type="button" class="close" data-bs-dismiss="modal"><span>&times;</span></button>
                </div>
                <div class="modal-body">
                    <div>
                        <span id="popupmesssage">Are you sure u want Cancel</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-draft" data-bs-dismiss="modal">Ok</button>
                </div>
            </div>
        </div>
    </div>
    <script>
    var ROOT = "@Url.Content("~/")";
    </script>
    <script>
        //active class
        function setNavigation() {
            var path = window.location.pathname;
            path = path.replace(/\/$/, "#");
            path = decodeURIComponent(path);
            //path = path.split('/')[2];

            $("#main_menu li a, #main_menu1 li a").each(function () {
                var href = $(this).attr('href');
                var subURL = $(this).attr('data-subURL');
                var URLs = '';
                if (subURL != undefined) {
                    URLs = subURL.split(';');
                }

                //href = href.split('/')[2];
                if (path === href || URLs.indexOf(path) >= 0) {
                    if ($(this).parents('#main_menu, #main_menu1').length >= 1) {
                        $(this).parents('li').addClass('active');
                        //$(this).parents(".has-menu").addClass('active');
                        //$(this).parents('.has-menu').last().addClass('activeparents');
                    }
                    else {
                        $(this).addClass('activeparents');
                        $(this).parents('li').addClass('activeparents');
                    }


                }
            });
        }
        setNavigation();
    </script>
    <script>


        $(".fullscreen-btn").on("click", function () {
            $("#fullscreen").addClass("m-table__full-screen");
        });
        $(".exitscreen-btn").on("click", function () {
            $("#fullscreen").removeClass("m-table__full-screen");
        });

        //const body = document.querySelector('html');
        //const button = document.querySelector('.btn_dark');
        function toggleFullScreen(elem) {
            if ((document.fullScreenElement !== undefined && document.fullScreenElement === null) || (document.msFullscreenElement !== undefined && document.msFullscreenElement === null) || (document.mozFullScreen !== undefined && !document.mozFullScreen) || (document.webkitIsFullScreen !== undefined && !document.webkitIsFullScreen)) {
                if (elem.requestFullScreen) {
                    elem.requestFullScreen();
                } else if (elem.mozRequestFullScreen) {
                    elem.mozRequestFullScreen();
                } else if (elem.webkitRequestFullScreen) {
                    elem.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
                } else if (elem.msRequestFullscreen) {
                    elem.msRequestFullscreen();
                }
            } else {
                if (document.cancelFullScreen) {
                    document.cancelFullScreen();
                } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                } else if (document.webkitCancelFullScreen) {
                    document.webkitCancelFullScreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        }



        // function to set a given theme/color-scheme
        //function setTheme(themeName) {
        //    localStorage.setItem('theme', themeName);
        //    document.documentElement.className = themeName;
        //}

        // function to toggle between light and dark theme
        //function toggleTheme() {
        //    if (localStorage.getItem('theme') === 'dark') {
        //        setTheme('theme-light');
        //    } else {
        //        setTheme('dark');
        //    }
        //}

        // Immediately invoked function to set the theme on initial load
        //(function () {
        //    if (localStorage.getItem('theme') === 'dark') {
        //        setTheme('dark');
        //        document.getElementById('slider').checked = false;
        //    } else {
        //        setTheme('theme-light');
        //        document.getElementById('slider').checked = true;
        //    }
        //})();

        var $TableHeight = $(".ui-jqgrid-bdiv").find("tbody").height();
        if ($TableHeight > 230) {
            $(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow", "auto");
            $(".-virtual-scroll").find(".ui-jqgrid-hdiv").css("padding-right", "4px");
        }
        else {
            $(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow", "auto");
            $(".-virtual-scroll").find(".ui-jqgrid-hdiv").css("padding-right", "0px")
        }

    </script>
    <script>
        $(".logout").click(function () {
            $(".theme-light").addClass("switch");
            $(".dark").addClass("switch");
            $(".switch_login").addClass("switch1");
        });
        $(".tile_projects a").click(function () {
            $(this).closest("li").addClass("active");
        });
        //document.getElementById("logout-button").addEventListener("click", function () {
        //    // Send a signal to the login page by setting a class on its <html> tag
        //    window.opener.document.documentElement.classList.add("logout-clicked");
        //});
        //document.getElementById("logout-button").addEventListener("click", function () {
        //    // Redirect to the login page
        //    window.location.href = "/Account/login"; // Replace with the actual login page URL
        //});
        //$(".menutopright").hover(function () {
        //    $(".main-menu").toggleClass("menu-list");
        //    $(".menuhamburger a").toggleClass("active");
        //});
        //$("#main_menu").click(function(){
        //    $(this).toggleClass("active");
        //}
        $(".menuhamburger a").click(function () {
            $(this).toggleClass("active");
            $(".main-menu").toggleClass("menu_left");
        });
        //$(".menuhamburger a").click(function () {
        //    $(".main-menu").toggleClass("menu_left");
        //});

        $(".navigation-menu li").click(function () {
            $(this).toggleClass("submenu_open");
            $(".navigation-menu li").not(this).removeClass("submenu_open");
        });


        $(function () {

            $(".fullscreen-supported").toggle($(document).fullScreen() != null);
            $(".fullscreen-not-supported").toggle($(document).fullScreen() == null);

            $(document).on("fullscreenchange", function (e) {
                console.log("Full screen changed.");
                $("#jquery-script-menu").toggleClass("fullscreen_btn");
            });

            $(document).on("fullscreenerror", function (e) {

            });

        });

        $('.ui-jqgrid-bdiv').css({ 'max-height': 'calc(100vh - 270px)' });
        $('.ui-jqgrid-bdiv').children("div").css({ 'min-height': '0vh' });
        var $TableHeight = $(".ui-jqgrid-bdiv").find("tbody").height();
        if ($TableHeight > 130) {
            $(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow", "auto");
            $(".-virtual-scroll").find(".ui-jqgrid-hdiv").css("padding-right", "4px");
        }
        else {
            $(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow", "auto");
            $(".-virtual-scroll").find(".ui-jqgrid-hdiv").css("padding-right", "0px")
        }

        var $TableHeight = $(".ui-jqgrid-bdiv").find("tbody").height();
        if ($TableHeight > 330) {
            $(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow", "auto");
            $(".-virtual-scroll").find(".ui-jqgrid-hdiv").css("padding-right", "10px");
            $(".-virtual-scroll").find(".ui-jqgrid-htable").css("padding-right", "10px");
        }
        else {
            $(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow", "auto");
            $(".-virtual-scroll").find(".ui-jqgrid-hdiv").css("padding-right", "0px");
            $(".-virtual-scroll").find(".ui-jqgrid-htable").css("padding-right", "0px");
        }
    </script>
    <script>
        $(document).ready(function () {
            $(document)
                .ajaxStart(function () {
                    $('#loader').show();
                    $("#loader").css("visibility", "visible");
                })
                .ajaxStop(function () {
                    $('#loader').hide();
                    $("#loader").css("visibility", "hidden");
                })
                .ajaxComplete(function () {
                    $('#loader').hide();
                    $("#loader").css("visibility", "hidden");
                });
            $('#loader').hide();

        });
        // Loader Script
        window.onload = function () {
            $("#loader").css("visibility", "hidden");
            $('#loader').hide();
        }
    </script>
</body>
</html>
