@model Ideation.Models.ClaimsGridDocument
@{
    ViewData["Title"] = "Edit Claims Grid";
    Layout = "/Views/Shared/N_ClaimsGridLayout.cshtml";
}

<style>
    .cft_addbtn {
        position: relative;
        margin-top: 20px;
    }

    .img_table {
        width: 13px;
    }

    .remarks_text {
        width: 100%;
        height: 100px;
    }

    .m-table__main .table .jqgfirstrow td {
        padding: 0px !important;
    }

    .jqgfirstrow {
        display: contents;
    }

    .modal-header-align .ui-th-ltr, .ui-jqgrid .ui-jqgrid-htable th.ui-th-ltr {
        text-align: left !important;
    }

    .auto-height-tab {
        overflow-y: auto;
        max-height: 450px;
    }

    .excel-right {
        width: 100%;
        float: right;
    }

    .upload_temp .onpack_document {
        display: block;
    }

    .modal-dialog.modal-xl {
        max-width: 98% !important;
    }

    .upload_temp .hideactionbuttons .upload_icons {
        display: none;
    }

    .upload_temp .file_show .onpack_document {
        display: block !important;
    }

    .upload_temp .file_show .communication_document {
        display: block !important;
    }
    ol.test_number {
        padding-left: 0px;
        list-style-type:decimal;
        position: relative;
        left: 20px;
    }
</style>
<div class="GenerateClaimsPdf" hidden></div>
<div class="Header" hidden></div>
<div id="isEdit" data-isedit="@ViewBag.isEdit" hidden></div>

<section>
    <div class="">
        <div class="-m_title_ ">
            <h4><span><a href="@Url.Content("~/Landing/Index")">Home/ </a></span><span><a href="@Url.Content("~/NewClaimsGrid/ClaimsGridDocument")">Claims Grid/ </a></span><a class="cen_txt"></a></h4>
        </div>
        @if (Model.Stage != 3 && Model.Stage < 7 && ViewBag.isEdit == "edit")
        {
            <div class="note_savedata_">
                (Note : The Claims Grid information will be auto saved for every 5 minutes . Please ensure that Project Number is selected to Auto save the data.)
            </div>
        }
        <div class="right_top">
            <ul>
                <li class="preview m-0"><i class="fa fa-eye"></i> Preview</li>
            </ul>
        </div>
    </div>
</section>

<section>
    <div class="d-flex mt-3">
        <div class="initiated_section">
            <div class="">
                <div class="table-project">
                    <div class="table-responsive">
                        <table class="table table-bordered mb-0">
                            <thead>
                                <tr class="mod_th">
                                    <th scope="col">Project Number</th>
                                    <th scope="col">Product Name</th>
                                    <th scope="col">HGL Approval Number</th>
                                    <th scope="col">Date</th>
                                    <th scope="col">Version No.</th>
                                    <th scope="col">Download</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td id="projNo"></td>
                                    <td id="prodName"></td>
                                    <td id="apprNo"></td>
                                    <td>
                                        <i class="fas fa-calendar-alt" style="padding-right: 5px;"></i>
                                        <span id="date"></span>
                                    </td>
                                    <td id="version"></td>
                                    <td>
                                        <i class="flaticon-download generateClaims_pdf" aria-hidden="true"></i>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <div class="expand_initiate">
                <div>
                    <div onclick="$(document).toggleFullScreen()" class="js-toggle-fullscreen-btn toggle-fullscreen-btn" aria-label="Enter fullscreen mode">
                        <i class="fas fa-expand fullscreen_expand fullscreen-btn" title="Full Screen"></i>
                        <i class="fas fa-times fullscreen_minimize exitscreen-btn"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section>
    <div class="button_top float-right mt-2">
        @if (Model.Stage == 2 && ViewBag.isEdit == "edit")
        {
            <button type="button" data-bs-toggle="modal" data-bs-target="#save_" class="btn btn-draft claimsSave" id="claimsSave">Save</button>
            <button type="button" data-bs-toggle="modal" class="btn btn-hgml SendToCFT" id="SendToCFT">Send to CFT</button>

        }@if (Model.Stage == 3 && ViewBag.isEdit == "edit")
        {
            <button type="button" data-bs-toggle="modal" data-bs-target="#save_" class="btn btn-draft CFTSave" id="CFTSave">Save</button>
            <button type="button" data-bs-toggle="modal" class="btn btn-hgml SendToDSG" id="SendToDSG">Send to DSG</button>

        }@if (Model.Stage == 4 && ViewBag.isEdit == "edit")
        {
            <button type="button" data-bs-toggle="modal" data-bs-target="#save_" class="btn btn-draft DSGSave" id="DSGSave">Save</button>
            <button type="button" data-bs-toggle="modal" class="btn btn-draft btn-sb SendForApproval" id="SendForApproval" data-title="Submit">Send For Approval</button>


        }@if (Model.Stage == 5 && ViewBag.isEdit == "edit")
        {
            <button type="button" data-bs-toggle="modal" data-bs-target="#save_" class="btn btn-draft SaveManagerModal" id="SaveManagerModal">Save</button>
            <button type="button" data-bs-toggle="modal" class="btn btn-hgml SendForBackToDSG" data-title="Submit" id="SendForBackToDSG" value="Sendbacktodsg">Send Back To DSG</button>
            <button type="button" data-bs-toggle="modal" class="btn btn-draft SendForDSGSignOff" data-title="Submit" id="SendForDSGSignOff" value="sendtodsgsignoff">Approve</button>

        }@if (Model.Stage == 6 && ViewBag.isEdit == "edit")
        {
            <button type="button" data-bs-toggle="modal" data-bs-target="#save_" class="btn btn-draft DSGSignOffSave" id="DSGSignOffSave">Save</button>
            <button type="button" data-bs-toggle="modal" class="btn btn-hgml signOff" data-title="Submit" id="signOff" value="signedoff">Signed Off</button>


        }
        @if (Model.Stage >= 7 && ViewBag.isEdit == "edit")
        {
            <button type="button" data-bs-toggle="modal" data-bs-target="#save_" data-title="Save" class="btn btn-draft DSGSignOff DSGSignOffSave" id="DSGSignOffSave" style="display:none;">Save</button>
            <button type="button" data-bs-toggle="modal" data-bs-target="#save_" data-title="Save" class="btn btn-draft Addendum AddendumSave" id="AddendumSave" style="display:none;">Save</button>
            <button type="button" data-bs-toggle="modal" data-bs-target="#save_" class="btn btn-draft Addendum AddendumSaveUpdate" data-title="AddendumSaveUpdate" id="AddendumSaveUpdate" style="display:none;" value="saveandupdate">Save & Update</button>
            <button type="button" data-bs-toggle="modal" data-bs-target="#save_" data-title="Submit" class="btn btn-draft DSGSignOff SaveAsAddendum" style="display:none;" id="SaveAsAddendum" value="saveasaddendum">Save As Addendum</button>
            <button type="button" data-bs-toggle="modal" class="btn btn-hgml DSGSignOff" data-title="Submit" onclick="validatePmdReviewSendMailForm()" style="display:none;">Send Mail</button>
        }

        <a href="@Url.Content("~/NewClaimsGrid/ClaimsGridDocument")"><button type="button" class="btn btn-cancel">Back</button></a>
    </div>
    <div>
        <ul class="link_href mb-2 mt-2">
            <li><a href="#ci" onclick="moveToTop('ci', 'highlight_section')" class="active">Project Details</a></li>
            <li><a href="#bh" onclick="moveToTop('bh', 'highlight_section')">Project Brief</a></li>
            <li><a href="#sd" onclick="moveToTop('sd', 'highlight_section')">Product Description(includes formula, package, product)</a></li>
            <li><a href="#tc" onclick="moveToTop('tc', 'highlight_section')">On Pack / Label Claims</a></li>
            <li><a href="#ship_address" onclick="moveToTop('ship_address', 'highlight_section')">Claims For Communications Other Than Label</a></li>
            <li><a href="#sd1" onclick="moveToTop('sd1', 'highlight_section')">Supporting Documents</a></li>
        </ul>
    </div>
    @using (Html.BeginForm("EditGridDocument", "NewClaimsGrid", FormMethod.Post, new { id = "EditClaims", enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(m => m.ClaimsHeaders)
        @Html.HiddenFor(m => m.ProductDescription)
        @Html.HiddenFor(m => m.ProjectDetails)
        @Html.HiddenFor(m => m.ProjectBrief)
        @Html.HiddenFor(m => m.OnPackClaims)
        @Html.HiddenFor(m => m.CommunicationClaimsData)
        @Html.HiddenFor(m => m.SupportingDoc)
        @Html.HiddenFor(m => m.JsonClaimsData)
        @Html.HiddenFor(m => m.Stage)
        @Html.HiddenFor(m => m.ApprovalStatus)
        @Html.HiddenFor(m => m.DeptDetails)
        @Html.HiddenFor(m => m.JsonCFTReviewData)
        @Html.HiddenFor(m => m.OnPackClaimsRemarks)
        @Html.HiddenFor(m => m.CommunicationClaimsRemarks)
        @Html.HiddenFor(m => m.GridId)
        @Html.HiddenFor(m => m.CFTDeptName)
        @Html.HiddenFor(m => m.ProjectNumber)
        @Html.HiddenFor(model => model.LoginId)
        @Html.HiddenFor(model => model.SupportingDocumentData)
        @Html.HiddenFor(model => model.IRAExcelDocument)
        @Html.HiddenFor(model => model.DeletedSupportingdocument)
        @Html.HiddenFor(model => model.DeletedCFTUploadedDocument)
        @Html.HiddenFor(model => model.Role)

        <div class="cust_fields_master">
            <div id="ci" class="ship_to highlight_section">
                <div class="details_section">
                    <h4>Project  Details</h4>
                    @if (Model.Stage != 3 && Model.Stage != 5)
                    {
                        <div class="form_section">
                            <form>
                                <div class="row">
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label class="control-label">Project Number <span class="text-danger">*</span></label>
                                            @Html.TextBoxFor(model => model.ProjectNumber, new { @class = "form-control mandatory CFTStage", @id = "ProjectNo", @disabled = "disabled" })
                                            <span id="Err-ProjectNo" style="display:none;color:red;">Please select Project</span>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Product Name<span class="text-danger">*</span></label>
                                            @Html.TextBoxFor(m => m.ProductName, new { @class = "form-control mandatory CFTStage trimspaces", @id = "ProductName" })
                                            <span id="Err-ProductName" style="display:none;color:red;">Please enter Product Name</span>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label class="control-label">HGL Approval Number</label>
                                            @Html.TextBoxFor(m => m.HGLApprovalNumber, new { @class = "form-control CFTStage", @id = "HGLApprovalNumber", @disabled = "disabled" })

                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Product Positioning Statement<span class="text-danger">*</span></label>
                                            @Html.TextAreaFor(m => m.ProductPositioningStatement, new { @class = "form-control mandatory CFTStage", @id = "ProductPositioningStatement", @cols = "30" })
                                            <span id="Err-ProductPositioningStatement" style="display:none;color:red;">Please enter Product Positioning Statement</span>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label class="control-label">Division</label>
                                            @Html.DropDownListFor(m => m.Division, Model.DivisionList, "--Select--", new { @class = "form-control data-singleselect", @id = "ClaimsDivision" })
                                        </div>
                                    </div>

                                </div>
                            </form>
                        </div>
                    }
                    else
                    {
                        <div class="form_section">
                            <form>
                                <div class="row">
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label class="control-label">Project Number <span class="text-danger">*</span></label>
                                            @Html.TextBoxFor(model => model.ProjectNumber, new { @class = "form-control mandatory CFTStage", @id = "ProjectNo", @disabled = "disabled" })
                                            <span id="Err-ProjectNo" style="display:none;color:red;">Please select Project</span>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Product Name<span class="text-danger">*</span></label>
                                            @Html.TextBoxFor(m => m.ProductName, new { @class = "form-control mandatory CFTStage", @id = "ProductName" })
                                            <span id="Err-ProductName" style="display:none;color:red;">Please enter Product Name</span>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label class="control-label">HGL Approval Number</label>
                                            @Html.TextBoxFor(m => m.HGLApprovalNumber, new { @class = "form-control CFTStage", @id = "HGLApprovalNumber", @disabled = "disabled" })

                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Product Positioning Statement<span class="text-danger">*</span></label>
                                            @Html.TextAreaFor(m => m.ProductPositioningStatement, new { @class = "form-control mandatory CFTStage", @id = "ProductPositioningStatement" })
                                            <span id="Err-ProductPositioningStatement" style="display:none;color:red;">Please enter Product Positioning Statement</span>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label class="control-label">Division</label>
                                            @Html.DropDownListFor(m => m.Division, Model.DivisionList, "--Select--", new { @class = "form-control data-singleselect", @id = "ClaimsDivision" })
                                        </div>
                                    </div>

                                </div>
                            </form>
                        </div>
                    }
                </div>
            </div>

            <div id="bh" class="ship_to">
                <div class="details_section">
                    @if (@Model.ProjectBriefId != "")
                    {
                        <h4>Project Brief-@Model.ProjectBriefId</h4>
                    }
                    else
                    {
                        <h4>Project Brief</h4>
                    }


                    <div class="form_section">
                        <form>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label">Must have claims</label>
                                        @Html.TextAreaFor(m => m.MustHaveClaims, new { @class = "form-control CFTStage", @id = "MustHaveClaims", @disabled = "disabled" })

                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label">Nice to have claims</label>
                                        @Html.TextAreaFor(m => m.NiceToHaveClaims, new { @class = "form-control CFTStage", @id = "NiceToHaveClaims", @disabled = "disabled" })
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label">Rephrased Claims</label>
                                        @Html.TextAreaFor(m => m.RephraseClaims, new { @class = "form-control CFTStage", @id = "RephraseClaims", @cols = "30" })
                                    </div>
                                </div>

                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div id="sd" class="ship_to">
                <div class="details_section">
                    <h4>Product Description(includes formula, package, product)</h4>
                    <div class="form_section">
                        <form>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label">License Category <span class="text-danger">*</span></label>
                                        @Html.DropDownListFor(model => model.LicenseCategory, Model.LicenseCategoryList, "--Select--", new { @class = "form-control form-select-sm mandatory data-singleselect", @id = "LicenseCategory" })
                                        <span id="Err-LicenseCategory" style="display:none;color:red;">Please select License Category</span>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label"> Other HUBS License Category</label>
                                        @Html.TextBoxFor(m => m.OtherHUBSLicenseCategory, new { @class = "form-control form-control-sm CFTStage trimspaces", @id = "otherhubslicensecategory" })
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label">Dosage/Product form <span class="text-danger">*</span></label>
                                        @Html.TextBoxFor(m => m.Dosage, new { @class = "form-control mandatory CFTStage trimspaces", @id = "Dosage" })
                                        <span id="Err-Dosage" style="display:none;color:red;">Please enter Dosage Form</span>
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label">Target organ/disease<span class="text-danger">*</span></label>
                                        @Html.TextBoxFor(m => m.TargetOrgan, new { @class = "form-control form-control-sm mandatory CFTStage trimspaces", @id = "TargetOrgan" })
                                        <span id="Err-TargetOrgan" style="display:none;color:red;">Please enter Target Organ/Disease</span>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label">
                                            Participating/ Anchor/ Primary HUBS
                                            <span class="text-danger">*</span>
                                        </label>
                                        @Html.ListBoxFor(model => model.AnchorHUB, Model.HubList ?? new List<SelectListItem>(), new
                                   { @class = "form-control", @multiple = "multiple", @id = "AnchorHUB",@data_multiselect= "" })
                                        @*@Html.DropDownListFor(model=>model.AnchorHUB,Model.HubList,"--Select--",new{@class="form-control form-select-sm mandatory",@id="AnchorHUB"})*@
                                    <span id="Err-AnchorHUB" style="display:none;color:red;">Please select Participating/ Anchor/ Primary HUBS</span>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label">
                                            Non-Participating/ Non-Anchor/ Secondary HUBS
                                        </label>
                                        @Html.ListBoxFor(model => model.OtherMarkets, Model.HubList ?? new List<SelectListItem>(), new { @class = "form-control", @multiple = "multiple", @id = "OtherMarkets",@data_multiselect = "" })
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label"> Shelf life at the time of launch<span class="text-danger">*</span></label>
                                        @Html.TextBoxFor(m => m.ShelfLife, new { @class = "form-control form-control-sm mandatory CFTStage trimspaces", @id = "ShelfLife" })
                                        <span id="Err-ShelfLife" style="display:none;color:red;">Please enter Shelf Life</span>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label">Target Customer<span class="text-danger">*</span></label>
                                        @Html.TextAreaFor(m => m.TargetCustomer, new { @class = "form-control mandatory CFTStage trimspaces", @id = "TargetCustomer" })
                                        <span id="Err-TargetCustomer" style="display:none;color:red;">Please enter Target Customer</span>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="control-label">Formula features<span class="text-danger">*</span></label>
                                        @Html.TextAreaFor(m => m.FormulaFeatures, new { @class = "form-control mandatory CFTStage", @id = "FormulaFeatures", @cols = "30" })
                                        <span id="Err-FormulaFeatures" style="display:none;color:red;">Please enter Formula Features</span>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="control-label">
                                            Direction for use<span class="text-danger">*</span>
                                        </label>
                                        @Html.TextAreaFor(m => m.DirectionForUse, new { @class = "form-control mandatory CFTStage", @id = "DirectionForUse", cols = "30" })
                                        <span id="Err-DirectionForUse" style="display:none;color:red;">Please enter Directions For Use</span>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="control-label"> Caution</label>
                                        @Html.TextAreaFor(m => m.Caution, new { @class = "form-control CFTStage", @id = "Caution", cols = "30" })
                                    </div>
                                </div>

                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="tc" class="ship_to">
                <div class="details_section">
                    <h4>On Pack / Label Claims</h4>
                    @if (Model.Stage != 3)
                    {
                        <div class="form_section">
                            <form id="form_onpack">
                                @if (@Model.Stage == 3)
                                {
                                    <div class="excel-right">
                                        <div class="images_excel float-right text-right">
                                            <img src="~/N_assets/images/excel.png" title="Excel Download" id="onpackExcel" />
                                        </div>
                                    </div>

                                }
                                @if (@Model.Stage > 3)
                                {
                                    <div class="row">
                                        <span class="ml-1 mr-5">CFT Remarks <button class="onPackCFTRemarks" type="button" style="background:transparent;border:none"><i class="fas fa-list" aria-hidden="true" style="color:blue"></i></button></span>
                                    </div>
                                }
                                <span id="Err-OnPackGrid" style="display:none;color:red;">Please enter atleast one record for On Pack/Label Claims</span>
                                @if (Model.Stage != 3)
                                {
                                    <div class="row">
                                        <div class="text-end">
                                            <div class="add_data">
                                                <i class="fas fa-plus" title="Add" id="open_onpack_modal"></i>
                                            </div>
                                        </div>
                                    </div>
                                }
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">Claims<span class="text-danger">*</span></label>
                                            @Html.TextAreaFor(m => m.Claims, new { @class = "form-control onPackField trimspaces", @id = "Claims" })
                                            <span id="Err-Claims" style="display:none;color:red;">Please enter Claims</span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">Feasibility of Achieving Claims <span class="text-danger">*</span></label>
                                            <select class="form-control onPackField" data-singleselect id="FeasibilityClaims">
                                                <option value="">Select</option>
                                                <option value="Feasible">Feasible</option>
                                                <option value="Non Feasible">Non Feasible</option>
                                            </select>
                                            <span id="Err-FeasibilityClaims" style="display:none;color:red;">Please select Feasibility</span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Supporting Technical Statements from R&D <span class="text-danger">*</span></label>
                                        @*<textarea class="form-control" id="editor1"></textarea>*@
                                        @Html.TextAreaFor(m => m.SupportingStmt, new { @class = "form-control onPackField", @id = "SupportingStmt", @cols = "30" })
                                        <span id="Err-SupportingStmt" style="display:none;color:red;">Please enter Supporting Technical Statement</span>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Measured By<span class="text-danger">*</span></label>
                                        @Html.TextBoxFor(m => m.MeasuredBy, new { @class = "form-control form-control-sm onPackField", @id = "MeasuredBy", @cols = "30" })
                                        <span id="Err-MeasuredBy" style="display:none;color:red;">Please enter Measured By Value</span>
                                        @*<textarea class="form-control" id="editor2"></textarea>*@
                                    </div>
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label class="control-label">DSG Remarks / Restriction</label>
                                            <textarea class="form-control onPackField" id="OnPackRemarks" cols="30"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-md-4 responsible_department">
                                        <div class="form-group">
                                            <label class="control-label">
                                                Responsible Department
                                            </label>
                                            @Html.ListBoxFor(model => model.ResponsibleDept, Model.DeptList ?? new List<SelectListItem>(),
        new
        {
            @class = "form-control",
            @multiple = "multiple",
            @id = "ResponsibleDeptOnPack",
            @data_multiselect = ""
        })
                                            <span id="Err-ResponsibleDeptOnPack" style="display:none;color:red;">Please select Responsible Department</span>

                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group mb-0 mt-4">
                                            @if (@Model.Stage <= 3)
                                            {
                                                <button type="button" class="btn btn-draft" id="OnPackDataAdd">Add</button>

                                            }
                                            else
                                            {
                                                <button type="button" class="btn btn-draft" id="OnPackWithRemarksAdd">Add</button>

                                            }
                                        </div>
                                    </div>
                                    <div>
                                        <div class="">
                                            <span id="packCommentsIsFill" style="display:none;color:red">Please Fill Required On Pack Remarks</span>
                                        </div>
                                        <div class="add_grid_">
                                            <div class="row">
                                                <table style="width:100%;" id="OnPackClaimsGrid" class="">
                                                </table>
                                                <div id="pager_claims_documeent"></div>
                                                <div class="packlabel_claims"></div>
                                                <table id="cft_review_pack_claims"></table>
                                                <div id="cft_review_pack_claims_pager"></div>
                                            </div>


                                        </div>
                                    </div>



                                </div>
                            </form>
                        </div>
                    }
                    else
                    {
                        <div class="form_section show">
                            <form id="form_onpack">
                                @if (@Model.Stage == 3)
                                {
                                    <div class="excel-right">
                                        <div class="images_excel float-right text-right">
                                            <img src="~/NewAssets/assets/images/excel.png" title="Excel Download" id="onpackExcel" />

                                        </div>
                                    </div>
                                }
                                @if (@Model.Stage > 3)
                                {
                                    <div class="row">
                                        <span class="ml-1 mr-5">CFT Remarks <button class="onPackCFTRemarks" type="button" style="background:transparent;border:none"><i class="fas fa-list" aria-hidden="true" style="color:blue"></i></button></span>
                                    </div>
                                }
                                <span id="Err-OnPackGrid" style="display:none;color:red;">Please enter atleast one record for On Pack/Label Claims</span>
                                @if (Model.Stage != 3)
                                {
                                    <div class="row">
                                        <div class="text-end">
                                            @*<button class="addonpack" type="button" id="open_onpack_modal"><i class="fa fa-plus" aria-hidden="true"></i></button>*@
                                            <div class="add_data">
                                                <i class="fas fa-plus" title="Add" id="open_onpack_modal"></i>
                                            </div>
                                        </div>
                                    </div>
                                }
                                <div class="row">
                                    <div class="row OnPackDetails" id="OnPackClaimsDetails">
                                        <div class="col-md-12">
                                            <div class="add_data" style="float:right" data-toggle="modal">
                                                <i class="fas fa-plus" title="Add" id="open_onpack_modal"></i>
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label">Claims<span class="text-danger">*</span></label>
                                                @Html.TextAreaFor(m => m.Claims, new { @class = "form-control onPackField trimspaces", @id = "Claims" })
                                                <span id="Err-Claims" style="display:none;color:red;">Please enter Claims</span>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="control-label">Feasibility of Achieving Claims <span class="text-danger">*</span></label>
                                                <select class="form-control onPackField" data-singleselect id="FeasibilityClaims">
                                                    <option value="">Select</option>
                                                    <option value="Feasible">Feasible</option>
                                                    <option value="Non Feasible">Non Feasible</option>
                                                </select>
                                                <span id="Err-FeasibilityClaims" style="display:none;color:red;">Please select Feasibility</span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">Supporting Technical Statements from R&D <span class="text-danger">*</span></label>
                                            @*<textarea class="form-control" id="editor1"></textarea>*@
                                            @Html.TextAreaFor(m => m.SupportingStmt, new { @class = "form-control onPackField", @id = "SupportingStmt", @cols = "30" })
                                            <span id="Err-SupportingStmt" style="display:none;color:red;">Please enter Supporting Technical Statement</span>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">Measured By<span class="text-danger">*</span></label>
                                            @Html.TextBoxFor(m => m.MeasuredBy, new { @class = "form-control form-control-sm onPackField", @id = "MeasuredBy", @cols = "30" })
                                            <span id="Err-MeasuredBy" style="display:none;color:red;">Please enter Measured By Value</span>
                                            @*<textarea class="form-control" id="editor2"></textarea>*@
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label class="control-label">DSG Remarks / Restriction</label>
                                                <textarea class="form-control onPackField" id="OnPackRemarks"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-md-4 responsible_department">
                                            <div class="form-group">
                                                <label class="control-label">
                                                    Responsible Department
                                                </label>
                                                @Html.ListBoxFor(model => model.ResponsibleDept, Model.DeptList ?? new List<SelectListItem>(),
            new
            {
                @class = "form-control",
                @multiple = "multiple",
                @id = "ResponsibleDeptOnPack",
                @data_multiselect = ""
            })
                                                <span id="Err-ResponsibleDeptOnPack" style="display:none;color:red;">Please select Responsible Department</span>

                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group mb-0 mt-4">
                                                @if (@Model.Stage <= 3)
                                                {
                                                    <button type="button" class="btn btn-draft" id="OnPackDataAdd">Add</button>

                                                }
                                                else
                                                {
                                                    <button type="button" class="btn btn-draft" id="OnPackWithRemarksAdd">Add</button>

                                                }
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div>
                                    <div class="">
                                        <span id="packCommentsIsFill" style="display:none;color:red">Please Fill Required On Pack Remarks</span>
                                    </div>
                                    <div class="add_grid_ table_height">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="">
                                                    <div class="m-table__main mt-0 mb-1">
                                                        <div class="m-table__responsive -virtual-scroll">
                                                            <table id="OnPackClaimsGrid" class="table table-bordered"></table>
                                                            <div id="pager_claims_documeent"></div>
                                                            <div class="packlabel_claims"></div>
                                                            <table id="cft_review_pack_claims"></table>
                                                            <div id="cft_review_pack_claims_pager"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    }
                </div>
            </div>
            <div>
                <div class="ship_to" id="ship_address">
                    <div class="details_section">
                        <h4>Claims For Communications Other Than Label</h4>
                        <div class="form_section">
                            <div class="d-flex justify-content-between">
                                @if (@Model.Stage != 3 && @Model.Stage < 3)
                                {
                                    <div class="note_review">
                                        Note : If you don't have any data on Claims for Communication, Please navigate to Supporting Documents section and Click on
                                        <strong>Send to CFT</strong>
                                    </div>
                                }
                                else if (@Model.Stage > 3)
                                {
                            <div class="note_review">
                                Note : If you don't have any data on Claims for Communication, Please navigate to Supporting Documents section.
                            </div>
                                }

                            </div>

                            <form id="form_communication">
                                <span id="Err-CommunicationClaimsGrid" style="display:none;color:red;">Please enter atleast one record for Claims For Communications</span>
                                @if (@Model.Stage == 3)
                                {
                                    <form>
                                        <div class="col-md-12 IRADocumentExcel">
                                            <div class="row product_profile">

                                                <div class="col-lg-3">
                                                    <div class="form-group">
                                                        <div class="demo-content">
                                                            <label class="control-label">Upload IRA Document</label>
                                                            <input type="file" class="form-control" id="CFTreviewexcelupload" accept=".xls, .xlsx" onchange=validateCFTfileupload() />
                                                            <span id="Err-CFTdocument" style="display:none;color:red;">Please select a IRA Document</span>
                                                            <span id="Err_InvalidCFTDocFormat" style="color:red;"></span>
                                                        </div>
                                                        <div style="color:black;font-size:9px" class="waterMark_">(Note : The file must be of type: .xls, .xlsx)</div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-1">
                                                    <div class="form-group">
                                                        <button type="button" id="Add_CFTDocument" class="btn btn-draft Add_SupportingDocuments mt-4">Add</button>
                                                    </div>
                                                </div>
                                                <div class="col-lg-1">
                                                    <div class="form-group">
                                                        <div class="demo-content pt-2 ps-3 mt-4">
                                                            <a href="#" data-bs-toggle="modal" title="View Document" data-bs-target="#CFTDocumentDetail"><i class="fa fa-info-circle"></i></a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-7 ">
                                                    <div class="excel-right">
                                                        <div class="images_excel float-right text-right">
                                                            <img src="~/N_assets/images/excel.png" title="Excel Download" id="communicationExcel" />
                                                        </div>
                                                    </div>

                                                </div>

                                            </div>
                                        </div>
                                    </form>
                                }
                                @if (@Model.Stage > 3)
                                {
                                    <div>
                                        <span class="ml-1 mr-5">CFT Remarks <button class="communicationCFTRemarks" title="Remarks List" type="button" style="background:transparent;border:none"><i class="fas fa-list" aria-hidden="true" style="color:blue"></i></button></span>
                                        <span>View Document <button id="UploadedExcelDocuments" type="button" title="View Document" style="background:transparent;border:none"><i class="fa fa-info-circle" aria-hidden="true" style="color:blue"></i></button></span>
                                    </div>
                                }
                                <div class="row">
                                    <span id="communicationCommentsIsFill" style="display:none;color:red">Please Fill Required Communication Remarks</span>
                                </div>
                                @if (Model.Stage != 3)
                                {

                                    <div class="row">
                                        <div class="text-end">
                                            <div class="add_data">
                                                <i class="fas fa-plus" title="Add" id="open_communication_modal"></i>
                                            </div>
                                        </div>
                                    </div>
                                }
                                <div class="row CommuniactionDetails" id="CommunicationClaimDetails">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">Claims<span class="text-danger">*</span></label>
                                            @Html.TextAreaFor(m => m.CommunicationClaims, new { @class = "form-control claimsField trimspaces", @id = "CommunicationClaims" })
                                            <span id="Err-CommunicationClaims" style="display:none;color:red;">Please enter Claims</span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">Feasibility of Achieving Claims <span class="text-danger">*</span></label>
                                            <select class="form-control claimsField" data-singleselect id="CommunicationFeasibilityClaims">
                                                <option value="">Select</option>
                                                <option value="Feasible">Feasible</option>
                                                <option value="Non Feasible">Non Feasible</option>
                                            </select>
                                            <span id="Err-CommunicationFeasibilityClaims" style="display:none;color:red;">Please select Feasibility</span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Supporting Technical Statements from R&D <span class="text-danger">*</span></label>
                                        @*<textarea class="form-control" id="editor3"></textarea>*@
                                        @Html.TextAreaFor(m => m.SupportingTechStmt, new { @class = "form-control claimsField", @id = "SupportingTechStmt", @cols = "30" })
                                        <span id="Err-SupportingTechStmt" style="display:none;color:red;">Please enter Supporting Technical Statement</span>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Measured By<span class="text-danger">*</span></label>
                                        @Html.TextBoxFor(m => m.CommunicationClaimsMeasuredBy, new { @class = "form-control form-control-sm claimsField", @id = "CommunicationClaimsMeasuredBy", @cols = "30" })
                                        <span id="Err-CommunicationClaimsMeasuredBy" style="display:none;color:red;">Please enter Measured By Value</span>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label class="control-label">DSG Remarks / Restriction</label>
                                            @Html.TextAreaFor(m => m.CommunicationRemarks, new { @class = "form-control claimsField", @id = "CommunicationRemarks" })
                                            <span id="Err-CommunicationRemarks" style="display:none;color:red;">Please Enter Remarks</span>
                                        </div>
                                    </div>
                                    <div class="col-md-4 responsible_department_communication">
                                        <div class="form-group">
                                            <label class="control-label">
                                                Responsible Department
                                            </label>
                                            @Html.ListBoxFor(model => model.ResponsibleDept, Model.DeptList ?? new List<SelectListItem>(),
                                            new
                                            {
                                                @class = "form-control",
                                                @multiple = "multiple",
                                                @id = "ResponsibleDeptCommunication",
                                                @data_multiselect = ""
                                            })
                                            <br>
                                            <span id="Err-ResponsibleDeptCommunication" style="display:none;color:red;">Please select Responsible Department</span>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group mb-0 mt-4">
                                            @if (@Model.Stage <= 3)
                                            {
                                                <button type="button" class="btn btn-draft" id="CommunicationClaimsDataAdd">Add</button>
                                            }
                                            else
                                            {
                                                <button type="button" class="btn btn-draft" id="CommunicationClaimsWithRemarksAdd">Add</button>
                                            }
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <div class="add_grid_ table_height">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="">
                                                    <div class="m-table__main mt-0 mb-1">
                                                        <div class="m-table__responsive -virtual-scroll">
                                                            <table id="CommuniactionClaimsGrid"></table>
                                                            <div id="pager_claims_documeent1"></div>
                                                            <div class="communication_claims formulation_table"></div>
                                                            <table id="cft_review_pack_communication"></table>
                                                            <div id="cft_review_pack_communication_pager"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            @if (Model.Stage != 5)
            {
                <div>
                    <div class="ship_to" id="sd1">
                        <div class="details_section">
                            <h4>Supporting Documents</h4>
                            <div class="form_section">
                                <form>
                                    <div class="row product_profile">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="control-label">Upload Document</label>
                                                <input type="file" class="form-control" id="supportingDocument" onchange="return fileValidation()" accept=".pdf,.xlsx,.pptx,.doc,.docx" />
                                                <span id="Err_InvalidDocFormat" style="color:red;display:none">The file must be of type: .pdf, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .csv</span>
                                                @if (ViewBag.isEdit == "edit")
                                                {
                                                    <span class="sku_note">
                                                        (Note : The file must be of type: .pdf, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .csv)
                                                    </span>
                                                }
                                            </div>
                                        </div>
                                        @if (ViewBag.isEdit == "edit")
                                        {
                                            <div class="col-md-1">
                                                <div class="form-group mt-4 mb-0">
                                                    <button type="button" class="btn btn-draft Add_SupportingDocuments" id="Add_SupportingDocuments">Add</button>
                                                </div>
                                            </div>
                                        }
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="control-label ">Supporting Documents</label>
                                                <div class="demo-content pt-2">
                                                    <a href="#" data-bs-toggle="modal" title="Supporting Documents" data-bs-target="#fileModal"><i class="fa fa-info-circle"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            }
            else
            {
                <div>
                    <div class="ship_to" id="sd1">
                        <div class="details_section">
                            <h4>Supporting Documents</h4>
                            <div class="form_section">
                                <form>
                                    <div class="row product_profile">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="control-label">Upload Document</label>
                                                <input type="file" class="form-control" id="supportingDocument" onchange="return fileValidation()" accept=".pdf,.xlsx,.pptx,.doc,.docx" />
                                                <span id="Err_InvalidDocFormat" style="color:red;display:none">The file must be of type: .pdf, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .csv</span>
                                                @if (ViewBag.isEdit == "edit")
                                                {
                                                    <span class="sku_note">
                                                        (Note : The file must be of type: .pdf, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .csv)
                                                    </span>
                                                }
                                            </div>
                                        </div>
                                        @if (ViewBag.isEdit == "edit")
                                        {
                                            <div class="col-md-1">
                                                <div class="form-group mt-4 mb-0">
                                                    <button type="button" class="btn btn-draft Add_SupportingDocuments" id="Add_SupportingDocuments">Add</button>
                                                </div>
                                            </div>
                                        }
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="control-label ">Supporting Documents</label>
                                                <div class="demo-content pt-2">
                                                    <a href="#" data-bs-toggle="modal" title="Supporting Documents" data-bs-target="#fileModal"><i class="fa fa-info-circle"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
        <div class="button_top float-right floating_buttons ">
            @if (Model.Stage == 2 && ViewBag.isEdit == "edit")
            {
                <button type="button" data-bs-toggle="modal" data-bs-target="#save_" class="btn btn-draft claimsSave" id="claimsSave">Save</button>
                <button type="button" data-bs-toggle="modal" class="btn btn-hgml SendToCFT" id="SendToCFT">Send to CFT</button>

            }@if (Model.Stage == 3 && ViewBag.isEdit == "edit")
            {
                <button type="button" data-bs-toggle="modal" data-bs-target="#save_" class="btn btn-draft CFTSave" id="CFTSave">Save</button>
                <button type="button" data-bs-toggle="modal" class="btn btn-hgml SendToDSG" id="SendToDSG">Send to DSG</button>

            }@if (Model.Stage == 4 && ViewBag.isEdit == "edit")
            {
                <button type="button" data-bs-toggle="modal" data-bs-target="#save_" class="btn btn-draft DSGSave" id="DSGSave">Save</button>
                <button type="button" data-bs-toggle="modal" class="btn btn-draft btn-sb SendForApproval" id="SendForApproval" data-title="Submit">Send For Approval</button>


            }@if (Model.Stage == 5 && ViewBag.isEdit == "edit")
            {
                <button type="button" data-bs-toggle="modal" data-bs-target="#save_" class="btn btn-draft SaveManagerModal" id="SaveManagerModal">Save</button>
                <button type="button" data-bs-toggle="modal" class="btn btn-hgml SendForBackToDSG" data-title="Submit" id="SendForBackToDSG" value="Sendbacktodsg">Send Back To DSG</button>
                <button type="button" data-bs-toggle="modal" class="btn btn-draft SendForDSGSignOff" data-title="Submit" id="SendForDSGSignOff" value="sendtodsgsignoff">Approve</button>

            }@if (Model.Stage == 6 && ViewBag.isEdit == "edit")
            {
                <button type="button" data-bs-toggle="modal" data-bs-target="#save_" class="btn btn-draft DSGSignOffSave" id="DSGSignOffSave">Save</button>
                <button type="button" data-bs-toggle="modal" class="btn btn-hgml signOff" data-title="Submit" id="signOff" value="signedoff">Signed Off</button>

            }
            @if (Model.Stage >= 7 && ViewBag.isEdit == "edit")
            {
                <button type="button" data-bs-toggle="modal" data-bs-target="#save_" data-title="Save" class="btn btn-draft DSGSignOff DSGSignOffSave" id="DSGSignOffSave" style="display:none;">Save</button>
                <button type="button" data-bs-toggle="modal" data-bs-target="#save_" data-title="Save" class="btn btn-draft Addendum AddendumSave" id="AddendumSave" style="display:none;">Save</button>
                <button type="button" data-bs-toggle="modal" data-bs-target="#save_" class="btn btn-draft Addendum AddendumSaveUpdate" data-title="AddendumSaveUpdate" id="AddendumSaveUpdate" style="display:none;" value="saveandupdate">Save & Update</button>
                <button type="button" data-bs-toggle="modal" data-bs-target="#save_" data-title="Submit" class="btn btn-draft DSGSignOff SaveAsAddendum" style="display:none;" id="SaveAsAddendum" value="saveasaddendum">Save As Addendum</button>
                <button type="button" data-bs-toggle="modal" class="btn btn-hgml DSGSignOff" data-title="Submit" onclick="validatePmdReviewSendMailForm()" style="display:none;">Send Mail</button>
            }

            <a href="@Url.Content("~/NewClaimsGrid/ClaimsGridDocument")"><button type="button" class="btn btn-cancel">Back</button></a>
        </div>
    }
</section>

@*preview popup modal*@
<div id="preview" class="modal fade layout_popup" role="dialog" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">
                    Preview
                </h4>
                <button type="button" class="close closepreview"><span>&times;</span></button>
            </div>
            <div class="modal-body previewDoc">
                <div class="preview_info">

                    <section class="mt-2">
                        <div class="table-project">
                            <div class="table-responsive">
                                <table class="table table-bordered mb-0">
                                    <thead>
                                        <tr class="mod_th">
                                            <th scope="col">Project Number</th>
                                            <th scope="col">Product Name</th>
                                            <th scope="col">HGL Approval Number</th>
                                            <th scope="col">Date</th>
                                            <th scope="col">Version No.</th>
                                            <th scope="col">Download</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="ProjectNo_v"></td>
                                            <td class="ProductName_v"></td>
                                            <td class="HGLApprovalNumber_v"></td>
                                            <td>
                                                <i class="fas fa-calendar-alt"></i>
                                                <span class="date_v"></span>
                                            </td>
                                            <td class="version_v"></td>
                                            <td>
                                                <i class="flaticon-download generateClaims_pdf" aria-hidden="true"></i>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </section>

                    <section class="mt-3">
                        <ul class="link_href">
                            <li><a href="#ci1" onclick="moveToTop('ci1', 'highlight_section')" class="active">Project Details</a></li>
                            <li><a href="#bh1" onclick="moveToTop('bh1', 'highlight_section')">Project Brief</a></li>
                            <li><a href="#sd11" onclick="moveToTop('sd11', 'highlight_section')">Product Description(includes formula, package, product)</a></li>
                            <li><a href="#tc1" onclick="moveToTop('tc1', 'highlight_section')">On Pack / Label Claims</a></li>
                            <li><a href="#tc2" onclick="moveToTop('tc2', 'highlight_section')">Claims For Communications Other Than Label</a></li>
                            <li><a href="#sd111" onclick="moveToTop('sd111', 'highlight_section')">Documents</a></li>
                        </ul>
                    </section>

                    <section class="cust_fields_master mt-3">

                        <div id="ci1" class="highlight_section">
                            <div class="details_section">
                                <h4>Project Details</h4>
                                <div>
                                    <table class="table table-bordered mb-0 table-firstWidth">
                                        <tbody>
                                            <tr>
                                                <th>Project Number </th>
                                                <td class="ProjectNo_v"></td>
                                            </tr>
                                            <tr>
                                                <th>Product Name</th>
                                                <td class="ProductName_v"></td>
                                            </tr>
                                            <tr>
                                                <th>HGL Approval Number</th>
                                                <td class="HGLApprovalNumber_v"></td>
                                            </tr>
                                            <tr>
                                                <th>Product Positioning Statement</th>
                                                <td class="ProductPositioningStatement_v"></td>
                                            </tr>
                                            <tr>
                                                <th>Division</th>
                                                <td class="Division_v"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div id="bh1" class="ship_to">
                            <div class="details_section">
                                @if (@Model.ProjectBriefId != "")
                                {
                                    <h4 class="title-text ProjectBriefId_V">
                                        Project Brief -  @Model.ProjectBriefId
                                    </h4>
                                }
                                else
                                {
                                    <h4 class="title-text ProjectBriefId_V">
                                        Project Brief
                                    </h4>
                                }
                                <div>
                                    <table class="table table-bordered mb-0 table-firstWidth">
                                        <tbody>
                                            <tr>
                                                <th>Must Have claims</th>
                                                <td class="MustHaveclaims_v"></td>
                                            </tr>
                                            <tr>
                                                <th>Nice to Have claims</th>
                                                <td class="NicetoHaveclaims_v"></td>
                                            </tr>
                                            <tr>
                                                <th>Rephrased Claims</th>
                                                <td class="Rephraseclaims_v viewandpreview"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div id="sd11" class="ship_to">
                            <div class="details_section">
                                <h4>Product Description(includes formula, package, product)</h4>
                                <div>
                                    <table class="table table-bordered mb-0 table-firstWidth">
                                        <tbody>
                                            <tr>
                                                <th>License Category</th>
                                                <td class="LicenseCategory_v"></td>
                                            </tr>
                                            <tr>
                                                <th>Other HUBS License Category</th>
                                                <td class="otherhubslicensecategory_v"></td>
                                            </tr>
                                            <tr>
                                                <th>Dosage/Product form </th>
                                                <td class="Dosage_v"></td>
                                            </tr>
                                            <tr>
                                                <th>Target organ/disease</th>
                                                <td class="TargetOrgan_v"></td>
                                            </tr>
                                            <tr>
                                                <th>Formula features</th>
                                                <td class="FormulaFeatures_v"></td>
                                            </tr>
                                            <tr>
                                                <th>Participating/ Anchor/ Primary HUBS</th>
                                                <td class="AnchorHUB_v"></td>
                                            </tr>

                                            <tr>
                                                <th>Non-Participating/ Non-Anchor/ Secondary HUBS</th>
                                                <td class="OtherMarkets_v"></td>
                                            </tr>
                                            <tr>
                                                <th>Shelf life at the time of launch</th>
                                                <td class="ShelfLife_v"></td>
                                            </tr>
                                            <tr>
                                                <th>Direction for use</th>
                                                <td class="DirectionForUse_v"></td>
                                            </tr>
                                            <tr>
                                                <th>Caution</th>
                                                <td class="Caution_v"></td>
                                            </tr>
                                            <tr>
                                                <th>Target Customer</th>
                                                <td class="TargetCustomer_v"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div id="tc1" class="ship_to">
                            <div class="details_section">
                                <h4>On Pack / Label Claims</h4>
                                <div>
                                    <div class="packlabel_claims_pv formulation_table">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="tc2" class="ship_to">
                            <div class="details_section">
                                <h4>Claims For Communications Other Than Label</h4>
                                <div>
                                    <div class="communication_claims_v formulation_table">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="sd111" class="ship_to">
                            <div class="details_section">
                                <h4>Documents</h4>
                                <div class="col-md-3 mt-3 d-flex justify-content-between">
                                    <div>
                                        <label class="control-label">Supporting Documents</label>
                                        <a href="#" data-bs-toggle="modal" title="Supporting Documents" data-bs-target="#fileModal">
                                            <i class="fa fa-info-circle"></i>
                                        </a>
                                    </div>
                                    @if (Model.Stage == 3)
                                    {
                                        <div>
                                            <label class="control-label">View Document</label>
                                            <a href="#" data-bs-toggle="modal" title="View Document" data-bs-target="#CFTDocumentDetail">
                                                <i class="fa fa-info-circle"></i>
                                            </a>
                                        </div>
                                    }
                                    else if (Model.Stage >= 3)
                                    {
                                        <div>
                                            <label class="control-label">View Document</label>
                                            <a href="#" id="PreviewCFTDocuments" title="View Document" role="button">
                                                <i class="fa fa-info-circle"></i>
                                            </a>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </section>
                    <div class="">
                        <div class="text-right">
                            <div class="float-right">
                                <button type="button" class="btn btn-cancel closepreview mb-3">Cancel</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

@********************supporting docucumnets**************@
<div id="fileModal" class="modal fade" role="dialog" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Supporting Documents</h4>
                <button type="button" class="close" data-bs-dismiss="modal"><span>&times;</span></button>
            </div>
            <div class="modal-body">
                <div class="">
                    <div class="">
                        <div class="row">
                            <div class="m-table__main grid_height">
                                <div class="m-table__responsive -virtual-scroll">
                                    <table id="Grid_Supporting_Document" class="table table-bordered"></table>
                                    <div id="pager_Grid_Supporting_Document"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade hd" id="SendCFTModal" tabindex="-1" aria-labelledby="SendCFTModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">

            <div class="modal-header">
                <h4 class="modal-title" id="exampleModalLabel">CFT Users</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <form class="row bdr_clr autocomplete" id="addClaims_form">
                    <div class="col-lg-3">
                        <div class="form-group">
                            <label> Department<label class="text-danger m-0">*</label></label>
                            @Html.ListBoxFor(model => model.Department, Model.DeptList ?? new List<SelectListItem>(),
                            new
                            {
                                @class = "form-control",
                                @multiple = "multiple",
                                @id = "Department",
                                @data_multiselect = ""
                            })
                            <span id="Err-Department" style="display:none;color:red;">Please select Department</span>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="form-group product_profile multisect_grid">
                            <label>CFT Users<label class="text-danger m-0">*</label></label>

                            <select class="form-control" multiple="multiple" data-multiselect style="display: none;" id="Dept_UsersDropdown">
                            </select>
                            <span id="Error_DeptUsers" class="color-red Error_HgmlData" style="display:none">Please select Department Users</span>
                            <span id="Error_DeptUsersSelected" class="color-red" style="display:none">Please Select Users For All Selected Departments</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group product_profile multisect_grid">
                            <label>PMD Users</label>
                            @Html.ListBoxFor(model => model.PMDUsers, Model.PMDUsersList ?? new List<SelectListItem>(),
                            new
                            {
                                @class = "form-control data-multiselect",
                                @multiple = "multiple",
                                @id = "Dept_PMdUsers"
                            })
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Remarks <label class="text-danger m-0">*</label></label>
                            <textarea id="editor" name="editor2" rows="1" cols="30" data-sample-short="" class="form-control"></textarea>
                            <br>
                            <span id="error_cft_remarks" style="display:none;color:red;">Please enter Remarks</span>
                        </div>
                    </div>
                    <div class="col-md-1">
                        <div class="float-right text-right">
                            <div class="form-group">
                                <button type="button" class="btn btn-draft cft_addbtn" id="CFTUsersAdd">Add</button>
                            </div>
                        </div>
                    </div>
                </form><br />
                <table class="table table-bordered">
                    <thead class="mail_tbl">
                        <tr>
                            <th class="bdr_mail">CFT Users</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <textarea class="form-control form-control-sm closeModal" cols="30" name="SelectedPmdUsersToSendPrototype" id="selectedCFTUsers" readonly="readonly"></textarea>
                                <span class="color-red text-danger Error_PopupField" style="display:none" id="Error_SelectCFTUser">Please add atleast one CFT user</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <table class="table table-bordered">
                    <thead class="mail_tbl">
                        <tr>
                            <th class="bdr_mail">PMD Users</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <textarea class="form-control form-control-sm closeModal" cols="30" name="SelectedPmdUsersToSendPrototype" id="SelectedPMDUsers" readonly="readonly"></textarea>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="modal-footer">
                <div class="float-right">
                    <button type="button" class="btn btn-draft " id="SaveDetails">Save</button>
                    <button type="button" class="btn  btn-cancel" data-bs-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</div>

@************************Supporting Technical statements*******************@
<div id="onpackclaims_modal" class="modal fade" role="dialog" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Supporting Technical Statements from R&D and Measured By</h4>
                <button type="button" class="close" data-bs-dismiss="modal"><span>&times;</span></button>
            </div>
            <div class="modal-body">
                <div id="dynamicRowsContainer">
                    <div class="col-md-12 text-right">
                        <i title="Add" class="fa fa-plus plus_icon " id="add_onpack_support_measuredby"></i>
                    </div>
                    <div class="d-flex">
                        <div class="col-md-12 auto-height-tab">
                            <table id="onpack_claims_modal_table">
                                <thead>
                                    <tr>
                                        <th>Supporting Technical Statements From R&D</th>
                                        <th>Measured By</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="text-right">
                        <div class="float-right">
                            <button type="button" class="btn btn-draft" id="onpack_claims_modal_save">Save</button>
                            <button type="button" class="btn btn-cancel" data-bs-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@************************Supporting Technical statements*******************@
<div id="communicationclaims_modal" class="modal fade" role="dialog" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Supporting Technical Statements from R&D and Measured By</h4>
                <button type="button" class="close" data-bs-dismiss="modal"><span>&times;</span></button>
            </div>
            <div class="modal-body">
                <div id="dynamicRowsContainer">
                    <!-- Initial rows -->
                    <div class="d-flex">
                        <div class="col-md-10 auto-height-tab">
                            <table id="communication_claims_modal_table">
                                <thead>
                                    <tr>
                                        <th>Supporting Technical Statements From R&D</th>
                                        <th>Measured By</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-md-2">
                            @*<button id="add_onpack_support_measuredby" class="btn-add"></button>*@
                            <i title="Add" class="fa fa-plus plus_icon" id="add_communication_support_measuredby"></i>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <div class="text-right">
                        <div class="float-right">
                            <button type="button" class="btn btn-draft" id="communication_claims_modal_save">Save</button>
                            <button type="button" class="btn btn-cancel" data-bs-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@***********************Save************************@
<div id="SaveModal" class="modal fade" role="dialog" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-md">
        @*Modal content*@
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Save Confirmation</h4>
                <button type="button" class="close" data-bs-dismiss="modal"><span>&times;</span></button>
            </div>
            <div class="modal-body">
                Are you sure you want save the details?
            </div>
            <div class="modal-footer">
                <div class="text-right">
                    <div class="float-right">
                        <button type="button" class="btn btn-draft" id="claimsSaveOk">Ok</button>
                        <button type="button" class="btn btn-cancel" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



@*CFT Remarks*@
<div class="modal fade hd" id="CFT_Remarks_Modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="modalheader"></h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-group">
                        <label class="control-label" id="headerlabel">
                        </label><br />
                        <label class="mt-2">Remarks</label><span class="text-danger">*</span>

                    </div>
                    <div class="panel panel-primary filterable mdp">
                        <div class="id_tbl col-md-12">
                            <textarea id="DSG_remarks_text1" class="remarks_text"></textarea>
                            <span id="Error_DSG_remarks_text1" style="display:none;color:red;">Please enter remarks</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" id="SendToDSGApproval">Save</button>
                <button type="button" class="btn btn-cancel" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade hd" id="CFTReamrks_show_popup" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="exampleModalLabel">CFT Remarks</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="add_grid_">
                    <div class="row">
                        <div class="float-right">
                            <div class="images_excel float-right text-right">
                                <img src="~/N_assets/images/excel.png" title="Excel Download" id="CFTRemarks_excel" />
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="">
                                <div class="m-table__main mt-2">
                                    <div class="m-table__responsive -virtual-scroll">
                                        <table id="Grid_Show_CFTRemarks" class="table table-bordered"></table>
                                        <div id="pager_Grid_Show_CFTRemarks"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade hd" id="ShowIRAUploadedExcel" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="exampleModalLabel">CFT Uploaded Documents</h4>
                <div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            </div>
            <div class="modal-body">
                <div class="add_grid_">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="">
                                <div class="m-table__main mt-2">
                                    <div class="m-table__responsive -virtual-scroll">
                                        <table id="GridShow_UploadedExcel" class="table table-bordered"></table>
                                        <div id="pager_GridShow_UploadedExcel"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@*DSG REMARKS*@
<div class="modal fade hd" id="DSG_Remarks" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="dsgmodalheader"></h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-group">
                        <label class="control-label" id="dsgconfirmationmsg">

                        </label><br />
                        <label class="mt-2">Remarks</label><span class="text-danger">*</span>

                    </div>
                    <div class="panel panel-primary filterable mdp">
                        <div class="id_tbl">
                            <textarea id="DSG_remarks_text" class="remarks_text"></textarea>
                            <span id="Error_DSG_remarks_text" style="display:none;color:red;">Please enter remarks</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" id="SendToApproval">OK</button>
                <button type="button" class="btn btn-cancel" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade hd" id="Documents_show_popup" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="exampleModalLabel">Documents</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="add_grid_">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="">
                                <div class="m-table__main mt-2">
                                    <div class="m-table__responsive -virtual-scroll">
                                        <table id="Grid_Uploaded_Document" class="table table-bordered"></table>
                                        <div id="pager_Grid_Uploaded_Document"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@*Send to Mail*@
@*<div class="modal fade hd" id="sendMailModal" tabindex="-1" aria-labelledby="SendCFTModalLabel" aria-hidden="true">*@
    <div class="modal fade layout_popup" id="sendMailModal" role="dialog" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="exampleModalLabel">Mail Recipients</h4>
                </div>
                <div class="modal-body">
                    <form class="row bdr_clr autocomplete">
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label> Department<label class="text-danger m-0">*</label></label>
                                @Html.ListBoxFor(model => model.Department, Model.DeptListForSendMail ?? new List<SelectListItem>(),
                                new
                                     {
                                         @class = "form-control data-multiselect",
                                         @multiple = "multiple",
                                @id = "SendMailDepartment"
                                     })
                                <span id="Err_SendMail_Department" style="display:none;color:red;">Please select Department</span>
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="form-group product_profile multisect_grid">
                                <label>CFT Users<label class="text-danger m-0">*</label></label>

                                <select class="form-control" multiple="multiple" data-multiselect style="display: none;" id="Dept_UsersDropdown_SendMail">
                                </select>
                                <span id="Error_SendMail_DeptUsers" class="color-red Error_HgmlData text-danger" style="display:none">Please select Users</span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>Remarks</label>
                                <textarea id="SendMail_Remarks" name="editor2" rows="1" cols="30" data-sample-short="" class="form-control"></textarea>
                                <span id="Error_SendMail_Remarks" class="color-red Error_HgmlData text-danger" style="display:none">Please select Department Users</span>
                            </div>
                        </div>

                        <div class="col-md-1">
                            <div class="float-right text-right mt-4 pt-1">
                                <button type="button" class="btn btn-draft" id="SendMailAdd_Users">Add</button>
                            </div>
                        </div>
                    </form> <br> <br />
                    <table class="table table-bordered">
                        <thead class="mail_tbl">
                            <tr>
                                <th class="bdr_mail">CFT Users</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <textarea class="form-control form-control-sm closeModal" cols="30" id="SelectedUsersForSendMail"></textarea>
                                    <span class="color-red Error_PopupField Error_SelectCFTUser" style="display:none" id="Error_SelectCFTUser">Please add aleast one CFT user</span>
                                </td>
                            </tr>

                        </tbody>
                    </table>


                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-success" id="SendMail_Buttom">Send Mail</button>
                    <button type="button" class="btn btn-cancel" id="SendmailCancelButton">Cancel</button>

                </div>
            </div>
        </div>
    </div>

    @*CFT Uploaded document View Modal*@
    <div class="modal fade hd" id="CFTDocumentDetail" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="exampleModalLabel">CFT Uploaded Documents</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    @*<h6 class="pro_det mt-1">Supporting Documents</h6>*@
                    <div class="add_grid_">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="">
                                    <div class="m-table__main mt-2 mb-4">
                                        <div class="m-table__responsive -virtual-scroll">
                                            <table id="CFTreview_Document" class="table table-bordered"></table>
                                            <div id="pager_CFTreview_Document"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <div class="modal fade sv hd" id="jqGridRow_DeleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="exampleModalLabel">Delete Confirmation</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete?
                </div>
                <div class="modal-footer">
                    <button type="button" id="jqGridRow_DeleteModal_Ok" class="btn btn-draft" data-bs-dismiss="modal">Delete</button>
                    <button type="button" class="btn btn-add btn-cancel" data-bs-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    @*For Delete Files Confirmation*@
    <div class="modal fade sv hd" id="DeleteClaimsPOPUp" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="exampleModalLabel">Delete Confirmation</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="confirmation_message">
                    Are you sure you want to delete?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" id="claimsDeleteOk">OK</button>
                    <button type="button" class="btn btn-cancel" data-bs-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script>

        var prevSectionId = "";

        function moveToTop(sectionId, additionalClass) {

            var section = document.getElementById(sectionId);

            if (section) {
                // Remove 'active' class from all links
                var allLinks = document.querySelectorAll('.link_href a');
                allLinks.forEach(function (link) {
                    link.classList.remove('active');
                });

                var highlightSection = document.querySelector('.ship_to.highlight_section');
                if (highlightSection) {
                    // Perform actions specific to .ship_to.highlight_section
                    highlightSection.querySelector('.col_').classList.add('collapse');
                    highlightSection.classList.remove('highlight_section');
                }

                // Remove the previous additional class from the previous section
                if (prevSectionId !== "") {
                    var prevSection = document.getElementById(prevSectionId);
                    if (prevSection) {
                        prevSection.classList.remove(additionalClass);
                        if (!prevSection.classList.contains('highlight_section')) {
                            prevSection.querySelector('.col_').classList.add('collapse');
                        }
                    }
                }

                // Add 'active' class to the clicked link
                var clickedLink = document.querySelector('.link_href a[href="#' + sectionId + '"]');

                if (clickedLink) {
                    clickedLink.classList.add('active');
                }

                // Add the specified additional class to the current section and expand it
                section.classList.add(additionalClass);
                section.querySelector('.col_.collapse').classList.remove('collapse');

                // Update the previous section ID
                prevSectionId = sectionId;

            }
        }

        document.querySelector('.body-content').addEventListener('scroll', function () {
            var sticky = document.querySelector('.body-content');
            var scroll = document.querySelector('.body-content').scrollTop;
            if (scroll >= 60) sticky.classList.add('fixed');
            else sticky.classList.remove('fixed');
        });

        //document.querySelector('.previewDoc').addEventListener('scroll', function () {
        //    var sticky = document.querySelector('.previewDoc');
        //    var scroll = document.querySelector('.previewDoc').scrollTop;
        //    if (scroll >= 50) sticky.classList.add('fixedPreview');
        //    else sticky.classList.remove('fixedPreview');
        //});

        // Function to add class to the corresponding href element
        function highlightSection(sectionId) {
            // Remove 'active' class from all href elements
            document.querySelectorAll('.link_href li a').forEach(function (elem) {
                elem.classList.remove('active');
            });
            // Add 'active' class to the href element corresponding to the given sectionId
            document.querySelector('.link_href li a[href="#' + sectionId + '"]').classList.add('active');
        }

        $(document).ready(function () {

            // Function to set active link
            function setActiveLink(id) {
                $('.link_href a').removeClass('active');
                $('.link_href a[href="#' + id + '"]').addClass('active');
            }

            // Function to highlight the first visible section
            function highlightFirstVisibleSection() {
                var firstVisibleFound = false;

                $('.ship_to').each(function () {
                    var $this = $(this);
                    var rect = $this[0].getBoundingClientRect();
                    var isInViewport = (rect.top >= 0 && rect.top <= window.innerHeight * 0.50); // Adjust the threshold as needed

                    if (!firstVisibleFound && isInViewport) {
                        $this.addClass('highlight_section');
                        setActiveLink($this.attr('id'));
                        firstVisibleFound = true;
                    } else {
                        $this.removeClass('highlight_section');
                    }
                });
            }

            // Click event for '.ship_to h4' elements
            $('.ship_to h4').click(function (event) {
                event.stopPropagation(); // Prevents the click event from bubbling up

                var section = $(this).closest('.ship_to'); // Find the closest .ship_to section
                var sectionId = section.attr('id'); // Get the id of the section

                // Check if the clicked section already has the highlight_section class
                var isHighlighted = section.hasClass('highlight_section');

                // Remove all highlight_section classes from .ship_to sections
                $('.ship_to').removeClass('highlight_section');

                // Add collapse class to all .col_ sections within .ship_to sections
                $('.ship_to .col_').addClass('collapse');

                // Toggle active class on navigation links based on sectionId
                $('.link_href li a').removeClass('active'); // Remove active class from all links
                $('.link_href li a[href="#' + sectionId + '"]').addClass('active'); // Add active class to the clicked link

                // Toggle highlight_section class and collapse class on the clicked .ship_to section
                if (!isHighlighted) {
                    section.addClass('highlight_section');
                    section.find('.col_').removeClass('collapse');
                    $('.link_href li a[href="#' + sectionId + '"]').addClass('active');
                } else {
                    $('.link_href li a[href="#' + sectionId + '"]').removeClass('active');
                }
            });

            // IntersectionObserver setup
            var observer = new IntersectionObserver(function (entries) {
                entries.forEach(function (entry) {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('highlight_section');
                        setActiveLink(entry.target.id); // Set the active link when the section is in view
                    } else {
                        entry.target.classList.remove('highlight_section');
                    }
                });

                // After processing entries, check if a section needs highlighting
                highlightFirstVisibleSection();
                contue();
            }, { threshold: [0.50, 0.40, 0.30, 0.30, 0.10, 0.10, 0.05, 0.06] });

            document.querySelectorAll('.ship_to').forEach(function (section) {
                observer.observe(section);
            });

            // Initial highlight check on page load
            highlightFirstVisibleSection();

            // Scroll event listener for highlighting sections
            $(window).on('scroll', highlightFirstVisibleSection);

            // Read more / read less functionality
            $(".Read_more").click(function () {
                $(".Read_more").hide(); // Hide Read more link
                $(".read_Less").show(); // Show Read less link
                $(".cust_fields_master").addClass('collapseIn'); // Add collapseIn class
            });

            $(".read_Less").click(function () {
                $(".read_Less").hide(); // Hide Read less link
                $(".Read_more").show(); // Show Read more link
                $(".cust_fields_master").removeClass('collapseIn');
                $(".ship_to").each(function () {
                    $(this).find(".col_").addClass('collapse');
                });
            });

            function contue() {
                $(".ship_to.highlight_section").each(function (event) {
                    $(this).find(".col_").removeClass('collapse');
                });
            }
        });

    </script>

    <script src="@Url.Content("~/js/NewClaimsGrid/EditClaims.js")" asp-append-version="true"></script>
