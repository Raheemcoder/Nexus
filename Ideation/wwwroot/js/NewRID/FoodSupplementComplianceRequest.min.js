function getcompliancelist(n){ingredienttypeid=$(n).attr("data-value");ingredienttypeName=$(n).attr("data-ingredienttypename");$("#searchingredienttype").val(parseInt(ingredienttypeid));$("#search_ingredient").trigger("click")}function updateGridColumns(){ingredienttypeName.trim().toLowerCase()==="active herbs"&&($("#compliancerequestgrid").jqGrid("hideCol","CASNumber"),$("#compliancerequestgrid").jqGrid("hideCol","ENumber"));ingredienttypeName.trim().toLowerCase()==="active others"?($("#compliancerequestgrid").jqGrid("hideCol","BotanicalName"),$("#compliancerequestgrid").jqGrid("showCol","CASNumber")):ingredienttypeName.trim().toLowerCase()==="inactives"&&$("#compliancerequestgrid").jqGrid("hideCol","BotanicalName");$("#compliancerequestgrid").jqGrid("setGridWidth",$("#compliancerequestgrid").width())}function createJQGrid(n){var t,r,u;$.jgrid.gridUnload("#compliancerequestgrid");t=ingredienttypeName.trim().toLowerCase()==="active herbs"?"Ingredient Name (Sanskrit/English)":"Ingredient Name";r=[{name:"Action",label:"Action",width:60,resizable:!0,ignoreCase:!0,formatter:function(n,t,i){var u=parseInt(ingredienttypeid),r='<div class="justify-center_ action_icons">';return i.Status=="Open"?r+='<a href="#" onclick="GetAddEditFSDetails('+i.IngredientReqId+", 3 ,"+u+')" class="edit-color" title="Edit" data-IngredientName="'+i.IngredientName+'" data-Casno="'+i.CASNumber+'" data-Region="'+i.Region+'" data-function="'+i.FunctionName+'"><i class="fas fa-pen text-primary"><\/i><\/a>':r="",r},search:!1},{name:"BotanicalName",label:"Botanical Name",resizable:!0,ignoreCase:!0,width:200},{name:"IngredientName",label:t,resizable:!0,ignoreCase:!0,width:200},{name:"CASNumber",label:"CAS Number",resizable:!0,ignoreCase:!0,width:90},{name:"Region",label:"Region",width:120,resizable:!0,ignorecase:!0},{name:"Status",label:"Status",width:120,resizable:!0,ignorecase:!0},{name:"CreatedBy",label:"Requested By",width:120,resizable:!0,ignorecase:!0},{name:"CreatedDate",label:"Requested Date",width:120,resizable:!0,ignorecase:!0,sorttype:"date",formatter:"date",formatoptions:{newformat:"d/m/Y"},searchoptions:{sopt:["eq"],dataInit:function(n){$(n).datepicker({format:"dd/mm/yyyy",autoclose:!0,todayHighlight:!0}).change(function(){$("#compliancerequestgrid")[0].triggerToolbar()})}}},];$("#compliancerequestgrid").jqGrid({url:"",datatype:"local",data:n,mtype:"GET",colModel:r,loadonce:!0,viewrecords:!0,pager:"#pager_expecte",rowNum:n.length,scroll:1,gridComplete:function(){var t=$("#compliancerequestgrid tbody tr"),r=$("#compliancerequestgrid tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"));updateGridColumns()}});$("#compliancerequestgrid").jqGrid("filterToolbar",{autosearch:!0,stringResult:!1,searchOnEnter:!1,defaultSearch:"cn"});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"0vh"});u=$(".ui-jqgrid-bdiv").find("tbody").height();u>130?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hdiv").css("padding-right","10px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hdiv").css("padding-right","0px"))}var ingredienttypeid=0,ingredienttypeName;$(document).ready(function(){$("#refresh_data").trigger("click");ingredienttypeName=$("#firstingredienttypename").val()});$("#search_ingredient").on("click",function(){var i=!0;ingredienttypeid=$("#searchingredienttype").val();var n=$("#Search_Start_Date").val(),t=$("#Search_End_Date").val(),r=$("#StatusId").val();n==null&&t==null&&r==""&&(alert("There is no data to search"),i=!1);(n!=undefined&&n!=null&&n!=""&&(t==undefined||t==null||t=="")||(n==undefined||n==null||n=="")&&t!=undefined&&t!=null&&t!="")&&(alert("Please select both start date and end date for search"),i=!1);i&&$.ajax({url:ROOT+"NewRID/FoodSupplementComplianceRequestGetListBasedOnSearch",dataType:"JSON",data:{IngredientTypeId:ingredienttypeid,StartDate:n,EndDate:t,Status:r},type:"GET",success:function(n){createJQGrid(n)},error:function(){alert(" An Error occured!!")}})});$("#refresh_data").on("click",function(){var n=$("#firstingredient").val();$("#searchingredienttype").val(parseInt(n));$("#Search_Start_Date").val("");$("#Search_End_Date").val("");$("[data-datepicker]").datepicker("destroy");$("[data-datepicker]").datepicker({format:"dd/mm/yyyy",autoclose:!0,todayHighlight:!0});$("#StatusId").val("111").trigger("change");$(".ingredienttype_content li").find(".active").removeClass("active");$("#selectedingredient_"+n).addClass("active");$("#search_ingredient").trigger("click")});$("[data-datepicker]").datepicker({format:"dd/mm/yyyy",autoclose:!0,todayHighlight:!0});$("#Search_Start_Date").datepicker({format:"dd/mm/yyyy",autoclose:!0,todayHighlight:!0}).on("changeDate",function(){$("#Search_End_Date").val("");$("#Search_End_Date").datepicker("setStartDate",$(this).val())});$("#exceldownload").on("click",function(){var n=!0,t=$("#searchingredienttype").val(),i=$("#Search_Start_Date").val(),r=$("#Search_End_Date").val(),u=$("#StatusId").val(),f=$("#compliancerequestgrid").jqGrid("getGridParam","data");f.length===0&&(alert("There is no data present in the grid"),n=!1);n&&(window.location.href=ROOT+"NewRID/GetFoodSupplementComplianceRequestExcelData?IngredientTypeId="+t+"&&IngredientTypeName="+ingredienttypeName+"&&startDate="+i+"&&endDate="+r+"&&Status="+u)});