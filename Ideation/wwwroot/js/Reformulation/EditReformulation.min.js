function showDate(n){var t=n.slice(0,11).split("/");return t[1]+"-"+t[0]+"-"+t[2]}function onEditProductDescription(n){ProductDescriptionEditRowId=n;var t=jQuery("#prd_desc").jqGrid("getRowData",ProductDescriptionEditRowId);editedProductName=t.ExistingName;$("#ProductDescriptionExistingName").val(t.ExistingName);$("#ProductDescriptionNewBrandName").val(t.NewBrandName);$("#SKUDetails").val(t.SKU)}function onDeleteProductDescription(n){confirm("Deleting a Product from Product Descripton will delete all the records in Packaging Profile, Sustainability and Business Information respective to that Product.Are you sure you want to delete?",function(){var r=[],u=[],f=[],e=jQuery("#prd_desc").jqGrid("getRowData",n),i=e.ExistingName,o=packagingProfileData_1,s=$("#business_info").jqGrid("getGridParam","data"),h=$("#Table_Sustainability").jqGrid("getGridParam","data"),t;$.each(o,function(n,t){t!=undefined&&t.Product==i&&u.push(n)});$.each(s,function(n,t){t.Product==i&&r.push(n+1)});$.each(u.reverse(),function(n,t){onDeletePackagingProfile(t,"#PP_Table_"+t,1)});$.each(h,function(n,t){t.Product==i&&f.push(n+1)});$.each(r.reverse(),function(n,t){$("#business_info").jqGrid("delRowData",t)});$.each(f.reverse(),function(n,t){$("#Table_Sustainability").jqGrid("delRowData",t);$("#Table_Sustainability").trigger("reloadGrid",[{page:1}])});$("#prd_desc").jqGrid("delRowData",n);n==ProductDescriptionEditRowId&&(ProductDescriptionEditRowId=0);$("#prd_desc").trigger("reloadGrid",[{page:1}]);$("#business_info").trigger("reloadGrid",[{page:1}]);productDescriptionProductNameList=jQuery("#prd_desc").jqGrid("getCol","ExistingName");packagingProfileProductNameList=productDescriptionProductNameList.slice(0);businessInfoProductNameList=$("#business_info").jqGrid("getCol","Product");businessInfoProductNameList=productDescriptionProductNameList.slice(0);sustainabilityProductNameList=$("#Table_Sustainability").jqGrid("getCol","Product");sustainabilityProductNameList=$.grep(productDescriptionProductNameList,function(n){return $.inArray(n,sustainabilityProductNameList)==-1});$("option").remove("#PackagingProfileProduct .ProductOption");packagingProfileProductNameList.length>0&&(t="",$.each(packagingProfileProductNameList,function(n,i){i!=""&&(t+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#PackagingProfileProduct").append(t));$("option").remove("#BusinessInformationProductName .ProductOption");businessInfoProductNameList.length>0&&(t="",$.each(businessInfoProductNameList,function(n,i){i!=""&&(t+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#BusinessInformationProductName").append(t));$("option").remove("#SUS_Product .ProductOption");sustainabilityProductNameList.length>0&&(t="",$.each(sustainabilityProductNameList,function(n,i){i!=""&&(t+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#SUS_Product").append(t));$("#BusinessInformationSKU .skuOption").remove();$("#BusinessInformationSKU .options").remove();$("#BusinessInformationSKU").prop("selectedIndex",0);$("#PackagingProfileSKU").val("").multiselect("refresh");$("#PackagingProfileSKU").empty();$("#PackagingProfileSKU").multiselect("rebuild")})}function onEditBusinessInformation(n){var t,e,r,i,h,f;for(isEditBI=!0,EditRowIdBusinessInformation=n,t=jQuery("#business_info").jqGrid("getRowData",n),BIEditedSKU=t.SKU,$("#BusinessInformationProductName").val(t.Product),$("#BusinessInformationSKU .skuOption").remove(),$("#BusinessInformationSKU .options").remove(),e=t.SKU.split(","),r=$("#prd_desc").jqGrid("getGridParam","data"),i=0;i<r.length;i++)if(r[i].ExistingName==$("#BusinessInformationProductName").val()){var o=r[i].SKU,s=o.split(","),u="";$.each(s,function(n,t){(t!=""||t!=null||t!=undefined)&&(u+='<option class="options" value="'+t+'">'+t+"<\/option>")});$("#BusinessInformationSKU").append(u);break}$(".Err-BIcombination").hide();$("#BusinessInformationAdd").prop("disabled",!1);$("#BusinessInformationProductName").val(t.Product);$("#BusinessInformationSKU").val(t.SKU);h=t.ProposeLaunchDate;f=t.ProposeLaunchDate.split("-").join("-");$("#BusinessInformationLaunchDate").val(t.ProposeLaunchDate.split("-").join("-"));$("#BusinessInformationLaunchDate").datepicker("setDate",f);$("#BusinessInformationSellingPrice").val(t.ProposedSellingPrice);$("#BusinessInformationProposedTP").val(t.ProposedTP);$("#BusinessInformationProposedMRP").val(t.ProposedMRP);$("#BusinessInformationCurrency").val(t.Currency);$("#BusinessInformationExpectedGP").val(t.ExpectedGP);$("#BusinessInformationBusinessValue").val(t.BusinessValue);$("#BusinessInformationM1").val(t.M1Quantity);$("#BusinessInformationM2").val(t.M2Quantity);$("#BusinessInformationM3").val(t.M3Quantity);$("#BusinessInformationM4").val(t.M4Quantity);$("#BusinessInformationM5").val(t.M5Quantity);$("#BusinessInformationM6").val(t.M6Quantity);$("#BusinessInformationY1").val(t.Y1Quantity);$("#BusinessInformationY2").val(t.Y2Quantity);$("#BusinessInformationY3").val(t.Y3Quantity);$("#BusinessInformationUOM").val(t.UOM);$("#BusinessInformationCurrency").val(t.Currency);$("input[name=survey][value="+t.RevisionInPackagingFormat+"]").prop("checked",!0);$("#BusinessInformationProposedNamesOfProduct").val(t.ProposedName)}function onDeleteBusinessInformation(n){confirm("Are you sure you want to delete?",function(){$("#business_info").jqGrid("delRowData",n);$("#business_info").trigger("reloadGrid",[{page:1}])});$(".BusinessInformationManditoryField").val("");$(".BusinessInformationProposedNamesOfProduct").val("");$("#BusinessInformationBusinessValue").val("");var t=new Date,i=new Date(t.getFullYear(),t.getMonth(),t.getDate());$(".data-datepicker").datepicker("setDate",i);$("#BusinessInformationLaunchDate").val("")}function SavePackageImageFile(){for(var t,i=[],r=$("#image_upload").prop("files"),n=0;n<r.length;n++)t=new FormData,t.append("file",r[n]),$.ajax({type:"POST",url:ROOT+"NewInitiation/SaveImageFile","async":!1,data:t,cache:!1,contentType:!1,processData:!1,success:function(n){i.push(n.replaceAll('"',""))}});return i}function ProjectDetailsImageFile(){var n="",t=$("#ProjectDetailsBenchMarkSampleImage").prop("files"),i;return t.length==0?$("#ImageName").text()!=""&&(n=$("#ImageName").text().replace(/"/g,"")):(i=new FormData,t.length>0&&(i.append("file",t[0]),$.ajax({type:"POST",url:ROOT+"NewInitiation/SaveImageFile","async":!1,data:i,cache:!1,contentType:!1,processData:!1,success:function(t){n=t}}))),n}function DownloadPackageImageold(n){var t=$("#expected").jqGrid("getCell",n,"PackagingProfileImage");if(t.length>0)return $("#"+n+"DownloadPackageImagesUpload").prop("href",ROOT+"NewInitiation/DownloadImageFile?fileName="+t),!0;$("#"+n+"DownloadPackageImagesUpload").empty().text("No Image Present")}function onEditPackagingProfile(n){var t,r,i,u,f;isEditPP=!0;$(".Err-PPNoMoreSKU").hide();t=jQuery("#expected").jqGrid("getRowData",n);$("#PackagingProfileProduct").val(t.Product);PPEditedSKU=t.SKU;var e=PPEditedSKU.split(","),o=[],s=[],r=$("#prd_desc").jqGrid("getGridParam","data");for(i=0;i<r.length;i++)if(r[i].ExistingName==$("#PackagingProfileProduct").val()){u=r[i].SKU.split(",");for(let n=0;n<u.length;n++)o.push(u[n])}for(r=$("#expected").jqGrid("getGridParam","data"),i=0;i<r.length;i++)if(r[i].Product==$("#PackagingProfileProduct").val()){u=r[i].SKU.split(",");for(let n=0;n<u.length;n++)s.push(u[n])}f=$.grep(o,function(n){return $.inArray(n,s)==-1});for(let n=0;n<e.length;n++)f.push(e[n]);$("#PackagingProfileSKU").empty();var c=t.SKU.split(","),r=$("#prd_desc").jqGrid("getGridParam","data"),h="";$.each(f,function(n,t){(t!=""||t!=null||t!=undefined)&&(h+='<option value="'+t+'">'+t+"<\/option>")});$("#PackagingProfileSKU").html(h);$("#PackagingProfileSKU").multiselect("rebuild");$("#PackagingProfileSKU").val(c);$("#PackagingProfileSKU").multiselect("rebuild");$("#PackagingProfilePrimaryPackaging").val(t.PrimaryPackaging);$("#PackagingProfileSecondaryPackaging").val(t.SecondaryPackaging);$("#PackagingProfileTertiaryPackaging").val(t.TertiaryPackaging);$("#PackagingProfileBenchMarkProduct").val(t.BenchmarkProducts);$("#PackagingProfileDesiredPackagingCharacters").val(t.DesiredPackagingCharacters);$("#PackagingProfileOthers").val(t.Others);$("#PackagingProfileMould").val(t.Mould);$("#image_upload").text(t.Image);$("#Display_image_upload").text(t.PackagingProfileImage);$("#PackagingProfile").show();PackageImageFileName=t.PackagingProfileImage;EditRowIdPackagingProfile=n;$("#expected").trigger("reloadGrid",[{page:1}])}function onDeletePackagingProfile(n,t=0){t===1?($("#expected").jqGrid("delRowData",n),$("#expected").trigger("reloadGrid",[{page:1}])):confirm("Are you sure you want to delete?",function(){$("#expected").jqGrid("delRowData",n);$("#expected").trigger("reloadGrid",[{page:1}])})}function validatesubmitform(){var c,i,r,u,h;$("#ConformReformulation").prop("disabled",!1);$("#ManagerApprovalOK").prop("disabled",!1);var n=!0,f=$("#prd_desc").jqGrid("getGridParam","data"),e=$("#business_info").jqGrid("getGridParam","data"),o=packagingProfileData_1.filter(n=>n.length!==0),s=$("#Table_Sustainability").jqGrid("getGridParam","data"),t=ProjectDetailsImageFile();t=t==""?ProjectDetailsBenchMarkSampleImage:t;c=$("#ProjectName").val();i=[];$("table#Reformulation_Table tbody tr").each(function(){i.push({ProjectName:c,Division:$(this).find("#Division option:selected").val(),ProjectType:"2",Hub:$(this).find("#Hub").text(),Category:$(this).find("#Reformulation_Category option:selected").val(),InitiatedBy:$(this).find("#Reformulation_InitiatedBy").text(),status:2})});r=[];u=[];i[0].Division==""?(n=!1,$("#Error_Reformulation_Division").show(),$(window).scrollTop($("#Reformulation_Table").position().top)):$("#Error_Reformulation_Division").hide();i[0].Category==""?(n=!1,$("#Error_Reformulation_Category").show(),$(window).scrollTop($("#Reformulation_Table").position().top)):$("#Error_Reformulation_Division").hide();r={businessrational:$("#ProjectDetailsBusinessRational").val(),benchmarksamplesformulation:$("#ProjectDetailsBenchmarkSampleFormulation").val(),benchmarksamplesimage:t,desiredindications:$("#ProjectDetailsDesiredIndications").val(),desireddosageform:$("#ProjectDetailsDesiredDosageForm").val()};u={AdditionalFormulation:$("#AdditionalRequirementsTextBox").val(),ShelfLife:$("#AdditionalRequirmentsShelfLife").val(),FreeFrom:$("#AdditionalRequirmentsFreeFrom").val(),Others:$("#AdditionalRequirmentsOthers").val()};h=$("#editor").val();$("#ProjectDetailsBusinessRational").val()==""?($("#Err-ProjectDetails-BusinessRational").show(),n=!1):$("#Err-ProjectDetails-BusinessRational").hide();f.length===0?($("#Err-ProductDescription").show(),n=!1):$("#Err-ProductDescription").hide();e.length===0?($("#err-business_info").show(),n=!1,$(window).scrollTop($("#err-business_info").position().top)):$("#err-business_info").hide();s.length===0?($("#Error_Sustainability").show(),n=!1):$("#Error_Sustainability").hide();$("input[type=radio][name=survey]:checked").val()=="yes"&&(o.length===0?($("#err-expected").show(),n=!1,$(window).scrollTop($("#err-expected").position().top)):$("#err-expected").hide());$("#ProjectName").val()==""?($("#Error-ProjectName").show(),n=!1):$("#Error-ProjectName").hide();$("#ReformulationEdit").validate();$("#ReformulationEdit").valid()||(n=!1);n&&(statusId=="9"?($("div#SubmitForHGML").modal("show"),$("#ManagerApprovalOK").click(function(){var c,l,a,n;deletedImageNameList.length>0&&$.each(deletedImageNameList,function(n,i){t!=""&&t!=null&&$.ajax({type:"POST",url:ROOT+"NewInitiation/DeleteImageFile",data:{fileName:i},success:function(n){path=n}})});c=$("#ShowManagerApprovalRemarks").val();$("#ProjectHeaders").val(JSON.stringify(i));$("#reformulationProductDescription").val(JSON.stringify(f));$("#reformulationProjectDetails").val(JSON.stringify(r));$("#reformulationAdditionalFormulationRequirements").val(JSON.stringify(u));$("#reformulationPackagingProfile").val(JSON.stringify(o));$("#reformulationBusinessInformation").val(JSON.stringify(e));$("#InitiatorRemarks").val(h);$("#SendBackToInitiatorRemarks").val(c);$("#SustainabilityData").val(JSON.stringify(s));l=$("#Grid_Supporting_Document").jqGrid("getGridParam","data");$("#SupportingDocumentData").val(JSON.stringify(l));$("#DeletedSupportingdocument").val(JSON.stringify(deleteImageIn_imageGrid));a=$("#Grid_BenchMarkImage").jqGrid("getGridParam","data");$("#BenchMarkImagesData").val(JSON.stringify(a));$("#DeletedBenchMarkImages").val(JSON.stringify(deleteImageIn_BenchMark));n=[];n=[{FromStage:9,FromStageName:statusName,Action:"Send to HGML Review",ToStage:2,ToStageName:"HGML Review"}];$("#ApprovalStatus").val(JSON.stringify(n));$("#ReformulationStatus").val(2);$("#ReformulationEdit").submit();$("#ManagerApprovalOK").prop("disabled",!0)})):($("div#SubmitModal").modal("show"),$("#ConformReformulation").click(function(){var c,l,a,n;deletedImageNameList.length>0&&$.each(deletedImageNameList,function(n,i){t!=""&&t!=null&&$.ajax({type:"POST",url:ROOT+"NewInitiation/DeleteImageFile",data:{fileName:i},success:function(n){path=n}})});$("#ProjectHeaders").val(JSON.stringify(i));$("#reformulationProductDescription").val(JSON.stringify(f));$("#reformulationProjectDetails").val(JSON.stringify(r));$("#reformulationAdditionalFormulationRequirements").val(JSON.stringify(u));$("#reformulationPackagingProfile").val(JSON.stringify(o));$("#reformulationBusinessInformation").val(JSON.stringify(e));$("#InitiatorRemarks").val(h);$("#SustainabilityData").val(JSON.stringify(s));c=$("#Grid_Supporting_Document").jqGrid("getGridParam","data");$("#SupportingDocumentData").val(JSON.stringify(c));$("#DeletedSupportingdocument").val(JSON.stringify(deleteImageIn_imageGrid));l=$("#Grid_BenchMarkImage").jqGrid("getGridParam","data");$("#BenchMarkImagesData").val(JSON.stringify(l));$("#DeletedBenchMarkImages").val(JSON.stringify(deleteImageIn_BenchMark));a=statusName;n=[];statusId=="8"?n=[{FromStage:8,FromStageName:statusName,Action:"Send to HGML Review",ToStage:2,ToStageName:"HGML Review"}]:statusId=="1"&&(n=[{FromStage:1,FromStageName:statusName,Action:"Send to HGML Review",ToStage:2,ToStageName:"HGML Review"}]);$("#ApprovalStatus").val(JSON.stringify(n));$("#ReformulationStatus").val(2);$("#ReformulationEdit").submit();$("#ConformReformulation").prop("disabled",!0)})))}function AddHgmlData(){var t=$("#HgmlData_ProductName").val(),i=$("#HgmlData_ParticipatingMarkets").val(),r=$("#HgmlData_ProjectPriority").val(),c=$("#HgmlData_Remarks").val(),u=$("#PmdProjectCategorization").val(),f=!0,e,n,s,h,o;(t==""||i==""||r==""||u=="")&&(f=!1,t==""?$(".Error_HgmlDataProductName").show():$(".Error_HgmlDataProductName").hide(),i==""?$(".Error_HgmlDataParticipatingMarkets").show():$(".Error_HgmlDataParticipatingMarkets").hide(),r==""?$(".Error_HgmlDataProjectPriority").show():$(".Error_HgmlDataProjectPriority").hide(),u==""?$(".Error_ProjectCategory").show():$(".Error_ProjectCategory").hide());EditRowId1==0&&$(".Error_Hgml_Product").text()!=""?f=!1:"";f&&(e=[],n={},$(".Error_EmptyGrid").hide(),n={ProductName:t,ParticipatingMarkets:i,ProjectPriority:r,Remarks:c,ProjectCategorization:u},EditRowId1==0?(e.push(n),s=$("#HGML_Data").jqGrid("getGridParam","data"),h=$.merge(s,e),$("#HGML_Data").jqGrid("setGridParam",{data:h}),$("#HGML_Data").trigger("reloadGrid",[{page:1}])):($.each(n,function(n,t){$("#HGML_Data").jqGrid("setCell",EditRowId1,n,t)}),$("#HGML_Data").trigger("reloadGrid",[{page:1}]),EditRowId1=0),$(".HGMLData").val(""),productDescriptionProductNameList=jQuery("#prd_desc").jqGrid("getCol","ExistingName"),hgmlDataProductNameList=$("#HGML_Data").jqGrid("getCol","ProductName"),hgmlDataProductNameList=$.grep(productDescriptionProductNameList,function(n){return $.inArray(n,hgmlDataProductNameList)==-1}),$("option").remove("#HgmlData_ProductName .ProductOption"),hgmlDataProductNameList.length>0&&(o="",$.each(hgmlDataProductNameList,function(n,t){t!=""&&(o+='<option class="ProductOption" value="'+t+'">'+t+"<\/option>")}),$("#HgmlData_ProductName").append(o)))}function AddHgmlDataApprove(){var o,t,s,h,n;var i=$("#HgmlData_ProductNameApprovePage").val(),r=$("#HgmlData_ParticipatingMarketsApprovePage").val(),u=$("#HgmlData_ProjectPriorityApprovePage").val(),c=$("#HgmlData_RemarksApprovePage").val(),f=$("#PmdProjectCategorizationApprovePage").val(),e=!0;(i==""||r==""||u==""||f=="")&&(e=!1,i==""?$("#Error_HgmlDataProductNameApprovePage").show():$("#Error_HgmlDataProductNameApprovePage").hide(),r==""?$("#Error_HgmlDataParticipatingMarkets").show():$("#Error_HgmlDataParticipatingMarkets").hide(),u==""?$("#Error_HgmlDataProjectPriority").show():$("#Error_HgmlDataProjectPriority").hide(),f==""?$(".Error_HgmlDataProjectCategory").show():$(".Error_HgmlDataProjectCategory").hide());EditRowId1==0&&$(".Error_HgmlApprove_Product").text()!=""?e=!1:"";e&&(productDescriptionProductNameList=jQuery("#prd_desc").jqGrid("getCol","ExistingName"),hgmlDataProductNameList=$("#HGML_Data").jqGrid("getCol","ProductName"),hgmlDataProductNameList=$.grep(productDescriptionProductNameList,function(n){return $.inArray(n,hgmlDataProductNameList)==-1}),hgmlDataProductNameList.length>0&&(n="",$("option").remove("#HgmlData_ProductNameApprovePage .ProductOption"),$.each(hgmlDataProductNameList,function(t,i){i!=""&&(n+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#HgmlData_ProductNameApprovePage").append(n)),o=[],t={},$(".Error_HgmlData").hide(),t={ProductName:i,ParticipatingMarkets:r,ProjectPriority:u,Remarks:c,ProjectCategorization:f},EditRowId1==0?(o.push(t),s=$("#HGML_Data").jqGrid("getGridParam","data"),h=$.merge(s,o),$("#HGML_Data").jqGrid("setGridParam",{data:h}),$("#HGML_Data").trigger("reloadGrid",[{page:1}])):($.each(t,function(n,t){$("#HGML_Data").jqGrid("setCell",EditRowId1,n,t)}),$("#HGML_Data").trigger("reloadGrid",[{page:1}]),EditRowId1=0),$(".HGMLData").val(""),productDescriptionProductNameList=jQuery("#prd_desc").jqGrid("getCol","ExistingName"),hgmlDataProductNameList=$("#HGML_Data").jqGrid("getCol","ProductName"),hgmlDataProductNameList=$.grep(productDescriptionProductNameList,function(n){return $.inArray(n,hgmlDataProductNameList)==-1}),$("option").remove("#HgmlData_ProductNameApprovePage .ProductOption"),hgmlDataProductNameList.length>0&&(n="",$.each(hgmlDataProductNameList,function(t,i){i!=""&&(n+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#HgmlData_ProductNameApprovePage").append(n)))}function onEditHgmlData(n){var r,u,i,t;statusId=="2"?(r=jQuery("#HGML_Data").jqGrid("getRowData",n),u=$("#HGML_Data").jqGrid("getCol","ProductName"),hgmlDataProductNameList=$.grep(hgmlDataProductNameList,function(n){return $.inArray(n,u)==-1}),hgmlDataProductNameList.push(r.ProductName),$("option").remove("#HgmlData_ProductName .ProductOption"),hgmlDataProductNameList.length>0&&(i="",$.each(hgmlDataProductNameList,function(n,t){t!=""&&(i+='<option class="ProductOption" value="'+t+'">'+t+"<\/option>")}),$("#HgmlData_ProductName").append(i))):(r=jQuery("#HGML_Data").jqGrid("getRowData",n),u=$("#HGML_Data").jqGrid("getCol","ProductName"),hgmlDataProductNameList=$.grep(hgmlDataProductNameList,function(n){return $.inArray(n,u)==-1}),hgmlDataProductNameList.push(r.ProductName),$("option").remove("#HgmlData_ProductNameApprovePage .ProductOption"),hgmlDataProductNameList.length>0&&(i="",$.each(hgmlDataProductNameList,function(n,t){t!=""&&(i+='<option class="ProductOption" value="'+t+'">'+t+"<\/option>")}),$("#HgmlData_ProductNameApprovePage").append(i)));EditRowId1=n;$(".Error_HgmlApprove_Product").hide().text("");$(".Error_HgmlData").hide();t=jQuery("#HGML_Data").jqGrid("getRowData",n);statusId=="2"?($("#HgmlData_ProductName").val(t.ProductName),$("#HgmlData_ParticipatingMarkets").val(t.ParticipatingMarkets),$("#HgmlData_ProjectPriority").val(t.ProjectPriority),$("#PmdProjectCategorization").val(t.ProjectCategorization),$("#HgmlData_Remarks").val(t.Remarks)):($("#HgmlData_ProductNameApprovePage").val(t.ProductName),$("#HgmlData_ParticipatingMarketsApprovePage").val(t.ParticipatingMarkets),$("#HgmlData_ProjectPriorityApprovePage").val(t.ProjectPriority),$("#HgmlData_RemarksApprovePage").val(t.Remarks),$("#PmdProjectCategorizationApprovePage").val(t.ProjectCategorization))}function onDeleteHgmlData(n){confirm("Are you sure you want to delete?",function(){var i,t;$("#HGML_Data").jqGrid("delRowData",n);$("#HGML_Data").trigger("reloadGrid",[{page:1}]);$(".HGMLData").val("");statusId=="4"||statusId=="14"?(i=$("#HGML_Data").jqGrid("getCol","ProductName"),productDescriptionProductNameList=$("#prd_desc").jqGrid("getCol","ExistingName"),hgmlDataProductNameList=$.grep(productDescriptionProductNameList,function(n){return $.inArray(n,i)==-1}),$("option").remove("#HgmlData_ProductNameApprovePage .ProductOption"),hgmlDataProductNameList.length>0&&(t="",$.each(hgmlDataProductNameList,function(n,i){i!=""&&(t+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#HgmlData_ProductNameApprovePage").append(t))):(i=$("#HGML_Data").jqGrid("getCol","ProductName"),productDescriptionProductNameList=$("#prd_desc").jqGrid("getCol","ExistingName"),hgmlDataProductNameList=$.grep(productDescriptionProductNameList,function(n){return $.inArray(n,i)==-1}),$("option").remove("#HgmlData_ProductName .ProductOption"),hgmlDataProductNameList.length>0&&(t="",$.each(hgmlDataProductNameList,function(n,i){i!=""&&(t+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#HgmlData_ProductName").append(t)))});EditRowId1=0}function CancelForm(){$("div#CancelModal").modal("show")}function AddPmdData(){var u=$("#PmdProductName").val(),f=$.trim($("#PmdComplexity option:selected").val()),e=$.trim($("#PmdRD option:selected").val()),o=$.trim($("#PmdDataRemarks").val()),t=$.trim($("#PmdProjectLead").val()),p=$.trim($("#PrototypeSubmissionDate").val()),w=$.trim($("#TTDCompletionDate").val()),b=$.trim($("#ProductionDate").val()),k=$.trim($("#MajorRisk").val()),s=!0,h,i,l,a,r,v,y,n,c;(u==""||f==""||e==""||o==""||t=="")&&(s=!1,u==""?$(".Error_ProductName").show():$(".Error_ProductName").hide(),f==""?$("#Error_PmdComplexity").show():$("#Error_PmdComplexity").hide(),e==""?$("#Error_PmdRd").show():$("#Error_PmdRd").hide(),o==""?$("#Error_PmdDataRemarks").show():$("#Error_PmdDataRemarks").hide(),t==""?$("#Error_Lead").show():$("#Error_Lead").hide());EditRowId1==0&&$(".Error_PMD_Product").text()!=""?s=!1:"";s&&(h=[],i={},$(".Error_HgmlData").hide(),$("#Err-PmdData").hide(),i={ProductName:u,ComplexityToBeAssigned:f,RandDName:e,Remarks:o,ProjectLead:t,ProjectLead:t,TargetFirstPrototypeSubmissionDate:p,TargetTTDCompletionDate:w,TargetProductionDate:b,MajorRiskIfAny:k},EditRowId1==0?(h.push(i),l=$("#PMD_Data").jqGrid("getGridParam","data"),a=$.merge(l,h),$("#PMD_Data").jqGrid("setGridParam",{data:a}),$("#PMD_Data").trigger("reloadGrid",[{page:1}])):($.each(i,function(n,t){$("#PMD_Data").jqGrid("setCell",EditRowId1,n,t)}),$("#PMD_Data").trigger("reloadGrid",[{page:1}]),EditRowId1=0),$(".PMDdata").val(""),r=new Date,v=new Date(r.getFullYear(),r.getMonth(),r.getDate()),$(".data-datepicker-monthyear").datepicker("setDate",v),$(".PMDdata").val(""),y=jQuery("#prd_desc").jqGrid("getCol","ExistingName"),n=$("#PMD_Data").jqGrid("getCol","ProductName"),n=$.grep(y,function(t){return $.inArray(t,n)==-1}),$("option").remove("#PmdProductName .ProductOption"),n.length>0&&(c="",$.each(n,function(n,t){t!=""&&(c+='<option class="ProductOption" value="'+t+'">'+t+"<\/option>")}),$("#PmdProductName").append(c)),$("#PmdProjectLead").val($("#UserName").val()))}function onEditPmdData(n){var r=jQuery("#PMD_Data").jqGrid("getRowData",n),u=$("#PMD_Data").jqGrid("getCol","ProductName"),i,t;pmdDataProductNameList=$.grep(pmdDataProductNameList,function(n){return $.inArray(n,u)==-1});pmdDataProductNameList.push(r.ProductName);$("option").remove("#PmdProductName .ProductOption");pmdDataProductNameList.length>0&&(i="",$.each(pmdDataProductNameList,function(n,t){t!=""&&(i+='<option class="ProductOption" value="'+t+'">'+t+"<\/option>")}),$("#PmdProductName").append(i));EditRowId1=n;$(".Error_HgmlData").hide();t=jQuery("#PMD_Data").jqGrid("getRowData",n);$("#PmdProductName").val(t.ProductName);$("#PmdComplexity").val(t.ComplexityToBeAssigned);$("#PmdRD").val(t.RandDName);$("#PmdProjectLead").val(t.ProjectLead);$("#PmdDataRemarks").val(t.Remarks);$("#PrototypeSubmissionDate").val(t.TargetFirstPrototypeSubmissionDate);$("#PrototypeSubmissionDate").datepicker("setDate",t.TargetFirstPrototypeSubmissionDate);$("#TTDCompletionDate").val(t.TargetTTDCompletionDate);$("#TTDCompletionDate").datepicker("setDate",t.TargetTTDCompletionDate);$("#ProductionDate").val(t.TargetProductionDate);$("#ProductionDate").datepicker("setDate",t.TargetProductionDate);$("#MajorRisk").val(t.MajorRiskIfAny)}function onDeletePmdData(n){confirm("Are you sure you want to delete?",function(){var i,t;$("#PMD_Data").jqGrid("delRowData",n);$("#PMD_Data").trigger("reloadGrid",[{page:1}]);$(".PMDdata").val("");i=$("#PMD_Data").jqGrid("getCol","ProductName");productDescriptionProductNameList=$("#prd_desc").jqGrid("getCol","ExistingName");pmdDataProductNameList=$.grep(productDescriptionProductNameList,function(n){return $.inArray(n,i)==-1});$("option").remove("#PmdProductName .ProductOption");pmdDataProductNameList.length>0&&(t="",$.each(pmdDataProductNameList,function(n,i){i!=""&&(t+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#PmdProductName").append(t))})}function ReformulationPmdSave(){$("#ReformulationSavePopUp").prop("disabled",!1);const i=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&t.RemarksId==n.RemarksId));var n=[],t=[];$("div#SaveModal").modal("show");$("#ReformulationSavePopUp").click(function(){n=$("#PMD_Data").jqGrid("getGridParam","data");$("#PmdData").val(JSON.stringify(n));t=$("#TargetCost_Grid").jqGrid("getGridParam","data");$("#TargetCostGridData").val(JSON.stringify(t));statusId=="5"?$("#ReformulationStatus").val(5):statusId=="16"&&$("#ReformulationStatus").val(16);$("#SavedPackagingRemarks").val(JSON.stringify(i));$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData));$("#ReformulationEdit").submit();$("#ReformulationSavePopUp").prop("disabled",!0)})}function ReformulationPmdSendBack(){var f,u,i,n,t;$("#Reformulation_SendBackToInitiator_Ok").prop("disabled",!1);const r=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&t.RemarksId==n.RemarksId));for(f=JsonFormReformulationStagesData.ApprovalStages.length,f=f-1,n="",u=0;u<JsonFormReformulationStagesData.ApprovalStages.length;u++)if(i=JsonFormReformulationStagesData.ApprovalStages[u].FromStage,i==11||i==5||i==8||i==9||i==16)continue;else{n=i;break}t=[];$("div#SendbackModal").modal("show");$("#SendbackModal").find("h5").text("Send Back Confirmation");$("#SendbackModal").find(".control-label").text(" Are you sure you want to Send Back the Project Brief?");$("#Reformulation_SendBackToInitiator_Ok").click(function(){var i=$("#PopUp_SendBackToInitiatorRemarks").val();i!=""?(statusId=="5"&&(n==13||n==2?(t=$("#PMD_Data").jqGrid("getGridParam","data"),targetCostData=$("#TargetCost_Grid").jqGrid("getGridParam","data"),$("#TargetCostGridData").val(JSON.stringify(targetCostData)),approvalStatus=[{FromStage:5,FromStageName:statusName,Action:"Send to Brief Demoted to HGMl",ToStage:13,ToStageName:"Brief Demoted to HGML"}],$("#PmdData").val(JSON.stringify(t)),$("#ApprovalStatus").val(JSON.stringify(approvalStatus)),$("#ReformulationStatus").val(13),$("#SendToHgmlRemarks").val(i),$("#SavedPackagingRemarks").val(JSON.stringify(r)),$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData)),$("#ReformulationEdit").submit()):(n==4||n==14)&&(t=$("#PMD_Data").jqGrid("getGridParam","data"),targetCostData=$("#TargetCost_Grid").jqGrid("getGridParam","data"),$("#TargetCostGridData").val(JSON.stringify(targetCostData)),approvalStatus=[{FromStage:5,FromStageName:statusName,Action:"Send to Brief Demoted",ToStage:14,ToStageName:"Brief Demoted to HGML"}],$("#PmdData").val(JSON.stringify(t)),$("#ApprovalStatus").val(JSON.stringify(approvalStatus)),$("#ReformulationStatus").val(14),$("#SendToHgmlRemarks").val(i),$("#SavedPackagingRemarks").val(JSON.stringify(r)),$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData)),$("#ReformulationEdit").submit(),$("#Reformulation_SendBackToInitiator_Ok").prop("disabled",!0))),statusId=="16"&&(n==13||n==2?(t=$("#PMD_Data").jqGrid("getGridParam","data"),targetCostData=$("#TargetCost_Grid").jqGrid("getGridParam","data"),$("#TargetCostGridData").val(JSON.stringify(targetCostData)),approvalStatus=[{FromStage:16,FromStageName:"Under Exploration",Action:"Send to Brief Demoted to HGMl",ToStage:13,ToStageName:"Brief Demoted to HGML"}],$("#PmdData").val(JSON.stringify(t)),$("#ApprovalStatus").val(JSON.stringify(approvalStatus)),$("#ReformulationStatus").val(13),$("#SendToHgmlRemarks").val(i),$("#SavedPackagingRemarks").val(JSON.stringify(r)),$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData)),$("#ReformulationEdit").submit()):(n==4||n==14)&&(t=$("#PMD_Data").jqGrid("getGridParam","data"),targetCostData=$("#TargetCost_Grid").jqGrid("getGridParam","data"),$("#TargetCostGridData").val(JSON.stringify(targetCostData)),approvalStatus=[{FromStage:16,FromStageName:"Under Exploration",Action:"Send to Brief Demoted",ToStage:14,ToStageName:"Brief Demoted to HGML"}],$("#PmdData").val(JSON.stringify(t)),$("#ApprovalStatus").val(JSON.stringify(approvalStatus)),$("#ReformulationStatus").val(14),$("#SendToHgmlRemarks").val(i),$("#SavedPackagingRemarks").val(JSON.stringify(r)),$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData)),$("#ReformulationEdit").submit(),$("#Reformulation_SendBackToInitiator_Ok").prop("disabled",!0)))):$("#Error_SendBackRemarks").show()})}function ReformulationPmdApprove(){$("#ReformulatioApproveButton").prop("disabled",!1);const t=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&t.RemarksId==n.RemarksId));var n=$("#PMD_Data").jqGrid("getGridParam","data"),i=$("#TargetCost_Grid").jqGrid("getGridParam","data");n.length===0?($("#Err-PmdData").show(),$(window).scrollTop($(".pmddataform").position().top)):($("div#ApproveModal").modal("show"),$("#ReformulatioApproveButton").click(function(){var i=$("#ApproveRemarks").val();i===""?$("#Error_Reformulation_PMDApproveRemarks").show():(statusId=="5"&&(approvalStatus=[{FromStage:5,FromStageName:statusName,Action:"Accept",ToStage:6,ToStageName:"Accepted"}]),statusId=="16"&&(approvalStatus=[{FromStage:16,FromStageName:"Under Exploration",Action:"Send to "+statusList[5].StatusName,ToStage:6,ToStageName:"Accepted"}]),$("#SendToHgmlRemarks").val(i),$("#PmdData").val(JSON.stringify(n)),targetCostData=$("#TargetCost_Grid").jqGrid("getGridParam","data"),$("#TargetCostGridData").val(JSON.stringify(targetCostData)),$("#ApprovalStatus").val(JSON.stringify(approvalStatus)),$("#ReformulationStatus").val(6),$("#SavedPackagingRemarks").val(JSON.stringify(t)),$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData)),$("#ReformulationEdit").submit(),$("#ReformulatioApproveButton").prop("disabled",!0))}))}function ValidateSaveForm(){var t,i,u;$("#ReformulationSavePopUp").prop("disabled",!1);var f=$("#prd_desc").jqGrid("getGridParam","data"),e=$("#business_info").jqGrid("getGridParam","data"),o=packagingProfileData_1.filter(n=>n.length!==0),n=ProjectDetailsImageFile();n=n==""?ProjectDetailsBenchMarkSampleImage:n;var r=[],s=$("#ProjectName").val(),h=statusId=="8"?8:statusId=="9"?9:statusId=="11"?11:1,c=$("#Table_Sustainability").jqGrid("getGridParam","data");$("table#Reformulation_Table tbody tr").each(function(){r.push({ProjectName:s,Division:$(this).find("#Division option:selected").val(),ProjectType:"2",Category:$(this).find("#Reformulation_Category option:selected").val(),Hub:$(this).find("#Hub").text(),InitiatedBy:$(this).find("#Reformulation_InitiatedBy").text(),status:h})});flag=!0;t=[];i=[];t={businessrational:$("#ProjectDetailsBusinessRational").val(),benchmarksamplesformulation:$("#ProjectDetailsBenchmarkSampleFormulation").val(),benchmarksamplesimage:n,desiredindications:$("#ProjectDetailsDesiredIndications").val(),desireddosageform:$("#ProjectDetailsDesiredDosageForm").val()};i={AdditionalFormulation:$("#AdditionalRequirementsTextBox").val(),ShelfLife:$("#AdditionalRequirmentsShelfLife").val(),FreeFrom:$("#AdditionalRequirmentsFreeFrom").val(),Others:$("#AdditionalRequirmentsOthers").val()};u=$("#editor").val();$("#ProjectName").val()==""?($("#Error-ProjectName").show(),flag=!1):$("#Error-ProjectName").hide();flag&&($("div#SaveModal").modal("show"),$("#ReformulationSavePopUp").click(function(){var s,h;deletedImageNameList.length>0&&$.each(deletedImageNameList,function(t,i){n!=""&&n!=null&&$.ajax({type:"POST",url:ROOT+"NewInitiation/DeleteImageFile",data:{fileName:i},success:function(n){path=n}})});$("#ProjectHeaders").val(JSON.stringify(r));$("#reformulationProductDescription").val(JSON.stringify(f));$("#reformulationProjectDetails").val(JSON.stringify(t));$("#reformulationAdditionalFormulationRequirements").val(JSON.stringify(i));$("#reformulationPackagingProfile").val(JSON.stringify(o));$("#reformulationBusinessInformation").val(JSON.stringify(e));$("#InitiatorRemarks").val(u);$("#SustainabilityData").val(JSON.stringify(c));s=$("#Grid_Supporting_Document").jqGrid("getGridParam","data");$("#SupportingDocumentData").val(JSON.stringify(s));$("#DeletedSupportingdocument").val(JSON.stringify(deleteImageIn_imageGrid));h=$("#Grid_BenchMarkImage").jqGrid("getGridParam","data");$("#BenchMarkImagesData").val(JSON.stringify(h));$("#DeletedBenchMarkImages").val(JSON.stringify(deleteImageIn_BenchMark));statusId=="8"&&$("#ReformulationStatus").val(8);statusId=="9"&&$("#ReformulationStatus").val(9);statusId=="11"&&$("#ReformulationStatus").val(11);$("#ReformulationEdit").submit();$("#ReformulationSavePopUp").prop("disabled",!0)}))}function ReformulationHgmlReject(){$("#Reject_Button").prop("disabled",!1);const t=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&t.RemarksId==n.RemarksId));var n=[];$("div#RejectModal").modal("show");$("#Reject_Button").click(function(){var i=$("#ReformulationRejectRemarks").val();i===""?$("#Error_RejectRemarks").show():(statusId=="2"&&(n=[{FromStage:2,FromStageName:statusName,Action:"Send to "+statusList[6].StatusName,ToStage:7,ToStageName:statusList[6].StatusName}]),statusId=="4"&&(n=[{FromStage:4,FromStageName:statusName,Action:"Send to "+statusList[6].StatusName,ToStage:7,ToStageName:statusList[6].StatusName}]),statusId=="13"&&(n=[{FromStage:13,FromStageName:"Brief Demoted to HGML",Action:"Send to "+statusList[6].StatusName,ToStage:7,ToStageName:statusList[6].StatusName}]),statusId=="14"&&(n=[{FromStage:14,FromStageName:"Brief Demoted to HGML",Action:"Send to "+statusList[6].StatusName,ToStage:7,ToStageName:statusList[6].StatusName}]),$("#ApprovalStatus").val(JSON.stringify(n)),$("#RejectRemarks").val(i),$("#ReformulationStatus").val(7),$("#SavedPackagingRemarks").val(JSON.stringify(t)),$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData)),document.getElementById("ReformulationEdit").submit(),$("#Reject_Button").prop("disabled",!0));$("#ReformulationRejectRemarks").keyup(function(){$("#ReformulationRejectRemarks").val()!=""&&$("#Error_RejectRemarks").hide()})})}function ReformulationHgmlSave(){var n;$("#ReformulationSavePopUp").prop("disabled",!1);const i=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&t.RemarksId==n.RemarksId));var n=[],t=$(".HgmlDataSendToHubConfirmation").val();$("div#SaveModal").modal("show");$("#ReformulationSavePopUp").click(function(){statusId!="4"&&statusId!="14"&&(t==="Yes"?n=[{Hub:$("#HgmlData_HubDropdown").val().toString(),HubUsers:$("#HgmlData_HubUsersDropdown").val().toString(),HgmlToHubRemarks:$("#HgmlDataHgmlToHubRemarks").val()}]:t==="No"&&(n=$("#HGML_Data").jqGrid("getGridParam","data")));$("#HgmlDataSendToHubConfirmation").val(t);$("#HgmlData").val(JSON.stringify(n));statusId==2&&$("#ReformulationStatus").val(2);statusId==13&&$("#ReformulationStatus").val(13);$("#SavedPackagingRemarks").val(JSON.stringify(i));$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData));$("#ReformulationEdit").submit()});(statusId=="4"||statusId=="14")&&(n=[],$("div#SaveModal").modal("show"),$("#ReformulationSavePopUp").click(function(){n=$("#HGML_Data").jqGrid("getGridParam","data");$("#HgmlDataSendToHubConfirmation").val("No");$("#HgmlData").val(JSON.stringify(n));statusId=="4"&&$("#ReformulationStatus").val(4);statusId=="14"&&$("#ReformulationStatus").val(14);$("#SavedPackagingRemarks").val(JSON.stringify(i));$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData));$("#ReformulationEdit").submit();$("#ReformulationSavePopUp").prop("disabled",!0)}))}function ReformulationHgmlSendBack(){$("#Reformulation_SendBackToInitiator_Ok").prop("disabled",!1);const i=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&t.RemarksId==n.RemarksId));var n=[],t=[];$("div#SendbackModal").modal("show");$("#Reformulation_SendBackToInitiator_Ok").click(function(){var r=$("#PopUp_SendBackToInitiatorRemarks").val();r!=""?($("#HgmlDataSendToHubConfirmation").val()=="Yes"?t=[{Hub:$("#HgmlData_HubDropdown").val(),HubUsers:$("#HgmlData_HubUsersDropdown").val(),HgmlToHubRemarks:$("#HgmlDataHgmlToHubRemarks").val()}]:$(".HgmlDataSendToHubConfirmation").val()=="No"&&($("#HgmlDataSendToHubConfirmation").val("No"),t=$("#HGML_Data").jqGrid("getGridParam","data")),statusId=="2"&&(n=[{FromStage:2,FromStageName:statusName,Action:"Send Back to Initiator",ToStage:8,ToStageName:"Sent Back to Initiator"}]),statusId=="13"&&(n=[{FromStage:13,FromStageName:"Brief Demoted to HGML",Action:"Send Back to Initiator",ToStage:8,ToStageName:"Sent Back to Initiator"}]),$("#HgmlData").val(JSON.stringify(t)),$("#ApprovalStatus").val(JSON.stringify(n)),$("#SendBackToInitiatorRemarks").val(r),$("#ReformulationStatus").val(8),$("#SavedPackagingRemarks").val(JSON.stringify(i)),$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData)),$("#ReformulationEdit").submit(),$("#Reformulation_SendBackToInitiator_Ok").prop("disabled",!0)):$("#Error_SendBackRemarks").show()})}function ReformulationHgmlSendtoHub(){var u,i;$("#ReformulationSendToHubReformulation").prop("disabled",!1);const f=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&t.RemarksId==n.RemarksId));var n=!0,t=[],r=[];if(YesNo=$(".HgmlDataSendToHubConfirmation").val(),YesNo===""?($("#Error_DoYouWantSentToHUB").show(),n=!1,$(window).scrollTop($("#Hgml_Data-Field").position().top)):$("#Error_DoYouWantSentToHUB").hide(),YesNo=="Yes"){n=!0;$("#HgmlData_HubDropdown").val()==""?($("#Error_HgmlDataHub").show(),n=!1):$("#Error_HgmlDataHub").hide();let t=$("#HgmlData_HubUsersDropdown").find("option:selected").length;t==0?($("#Error_HgmlDataHubUsersSelected").show(),n=!1):""}else n=!1;u=$("#HgmlData_HubDropdown").find("option:selected").length;i=$("#HgmlData_HubUsersDropdown").find("option:selected").length;i!=0&&u!=i?(n=!1,$("#Error_HgmlDataHubUsersSelected").show()):$("#Error_HgmlDataHubUsers").hide();n&&$("div#SendhubModalReview").modal("show");$("#ReformulationSendToHubReformulation").click(function(){var n=$("#PopUp_SendToHubRemarks").val();n===""?$("#Error_SendToHub").show():(r=[{Hub:$("#HgmlData_HubDropdown").val().toString(),HubUsers:$("#HgmlData_HubUsersDropdown").val().toString(),HgmlToHubRemarks:$("#HgmlDataHgmlToHubRemarks").val()}],statusId=="2"&&(t=[{FromStage:2,FromStageName:statusName,Action:"Send to"+statusList[2].StatusName,ToStage:3,ToStageName:statusList[2].StatusName}]),statusId=="13"&&(t=[{FromStage:13,FromStageName:"Brief Demoted to HGML",Action:"Send to"+statusList[2].StatusName,ToStage:3,ToStageName:statusList[2].StatusName}]),$("#HgmlData").val(JSON.stringify(r)),$("#ApprovalStatus").val(JSON.stringify(t)),$("#HgmlDataSendToHubConfirmation").val(YesNo),$("#SendToHubRemarks").val(n),$("#ReformulationStatus").val(3),$("#SavedPackagingRemarks").val(JSON.stringify(f)),$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData)),$("#ReformulationEdit").submit(),$("#ReformulationSendToHubReformulation").prop("disabled",!0))})}function ReformulationSendToPMDForm(){var n,t;$("#ReformulationSendToPMD").prop("disabled",!1);const i=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&t.RemarksId==n.RemarksId));n=!0;YesNo=$(".HgmlDataSendToHubConfirmation").val();YesNo===""?($("#Error_DoYouWantSentToHUB").show(),n=!1,$(window).scrollTop($("#Hgml_Data-Field").position().top)):$("#Error_DoYouWantSentToHUB").hide();t=$("#HGML_Data").jqGrid("getGridParam","data");YesNo=="No"?(n=!0,t.length===0?($(".Error_EmptyGrid").show(),n=!1):$(".Error_EmptyGrid").hide()):n=!1;n&&($("div#SendToPmdModal").modal("show"),$("#ReformulationSendToPMD").click(function(){var n=$("#PopUp_SendToPmdRemarks").val();n!=""?(statusId=="2"&&(approvalStatus=[{FromStage:2,FromStageName:statusName,Action:"Send to "+statusList[4].StatusName,ToStage:5,ToStageName:statusList[4].StatusName}]),statusId=="13"&&(approvalStatus=[{FromStage:13,FromStageName:"Brief Demoted to HGML",Action:"Send to "+statusList[4].StatusName,ToStage:5,ToStageName:statusList[4].StatusName}]),$("#HgmlData").val(JSON.stringify(t)),$("#ApprovalStatus").val(JSON.stringify(approvalStatus)),$("#HgmlDataSendToHubConfirmation").val(YesNo),$("#SendToHubRemarks").val(n),$("#ReformulationStatus").val(5),$("#SendToPmdRemarks").val(n),$("#SavedPackagingRemarks").val(JSON.stringify(i)),$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData)),$("#ReformulationEdit").submit(),$("#ReformulationSendToPMD").prop("disabled",!0)):n==""?$("#Error_Reformulation_PMDremarks").show():$("#Error_Reformulation_PMDremarks").hide()}))}function ReformulationSendToPMD(){$("#ReformulationSendToPMD").prop("disabled",!1);const i=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&t.RemarksId==n.RemarksId));var n=!0,t=$("#HGML_Data").jqGrid("getGridParam","data");t.length===0?($("#err-hgml_data").show(),$(window).scrollTop($("#HgmlData_ApprovePage").position().top)):($("div#SendToPmdModal").modal("show"),$("#ReformulationSendToPMD").click(function(){$("#PopUp_SendToPmdRemarks").keyup(function(){$("#PopUp_SendToPmdRemarks").val()==""?($("#Error_Reformulation_PMDremarks").show(),n=!1):($("#Error_Reformulation_PMDremarks").hide(),n=!0)});$("#PopUp_SendToPmdRemarks").val()==""?($("#Error_Reformulation_PMDremarks").show(),n=!1):($("#Error_Reformulation_PMDremarks").hide(),n=!0);var r=$("#PopUp_SendToPmdRemarks").val();n&&(statusId=="4"&&(approvalStatus=[{FromStage:4,FromStageName:statusName,Action:"Send to "+statusList[4].StatusName,ToStage:5,ToStageName:statusList[4].StatusName}]),statusId=="14"&&(approvalStatus=[{FromStage:14,FromStageName:"Brief Demoted to HGML",Action:"Send to Brief Demoted",ToStage:5,ToStageName:statusList[4].StatusName}]),$("#HgmlData").val(JSON.stringify(t)),$("#ApprovalStatus").val(JSON.stringify(approvalStatus)),$("#SendToPmdRemarks").val(r),$("#ReformulationStatus").val(5),$("#SavedPackagingRemarks").val(JSON.stringify(i)),$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData)),$("#ReformulationEdit").submit(),$("#ReformulationSendToPMD").prop("disabled",!0))}))}function ReformulationHubSave(){$("#ReformulationSavePopUp").prop("disabled",!1);const n=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&t.RemarksId==n.RemarksId));$("div#SaveModal").modal("show");$("#ReformulationSavePopUp").click(function(){businessInformationGridData=$("#business_info").jqGrid("getGridParam","data");$("#reformulationBusinessInformation").val(JSON.stringify(businessInformationGridData));$("#ReformulationStatus").val(3);$("#HubApprove").val($("#HubApproveSelect :selected").val());$("#SavedPackagingRemarks").val(JSON.stringify(n));$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData));var t=$("#Grid_Supporting_Document").jqGrid("getGridParam","data");$("#SupportingDocumentData").val(JSON.stringify(t));$("#DeletedSupportingdocument").val(JSON.stringify(deleteImageIn_imageGrid));document.getElementById("ReformulationEdit").submit();$("#ReformulationSavePopUp").prop("disabled",!0)})}function ReformulationHubToHgml(){var u;$("#Reformulation_SendBackToHgml_Ok").prop("disabled",!1);const i=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&t.RemarksId==n.RemarksId));var n=!0,t=[],r=[];$("#HubApproveSelect :selected").text()=="Yes"||$("#HubApproveSelect :selected").text()=="No"?(u=$("#HubApproveSelect :selected").text(),$("#HubApproveSelect :selected").text()=="Yes"&&jQuery("#business_info").jqGrid("getGridParam","reccount")==0&&($("#err-business_info").show(),$(window).scrollTop($(".BusinessInfo").position().top),n=!1),$.trim($("#HgmlData_HUBParticipatingMarkets").val())==""&&($("#Error_HgmlDataParticipatingMarketsApprovePage").show(),n=!1),n&&($("div#SendHgmlModal").modal("show"),$("#Reformulation_SendBackToHgml_Ok").click(function(){var n,u;$("#PopUp_SendToHgml").val()==""?$("#Error_SendToHgml").show():(n=$("#PopUp_SendToHgml").val(),t=[{FromStage:3,FromStageName:statusName,Action:"Send to "+statusList[3].StatusName,ToStage:4,ToStageName:statusList[3].StatusName}],businessInformationGridData=$("#business_info").jqGrid("getGridParam","data"),$("#reformulationBusinessInformation").val(JSON.stringify(businessInformationGridData)),$("#HubApprove").val($("#HubApproveSelect :selected").text()),$("#HgmlData").val(JSON.stringify(r)),$("#ApprovalStatus").val(JSON.stringify(t)),$("#SendToHgmlRemarks").val(n),$("#ReformulationStatus").val(4),$("#SavedPackagingRemarks").val(JSON.stringify(i)),$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData)),u=$("#Grid_Supporting_Document").jqGrid("getGridParam","data"),$("#SupportingDocumentData").val(JSON.stringify(u)),$("#DeletedSupportingdocument").val(JSON.stringify(deleteImageIn_imageGrid)),$("#ReformulationEdit").submit(),$("#Reformulation_SendBackToHgml_Ok").prop("disabled",!0))}))):($("#Error_Reformulation_Hub").show(),$(window).scrollTop($(".headerTable").position().top))}function ReformulationSendBackSave(){var n=[];$("div#SaveModal").modal("show");$("#ReformulationSavePopUp").click(function(){var o=$("#prd_desc").jqGrid("getGridParam","data"),s=$("#business_info").jqGrid("getGridParam","data"),h=packagingProfileData_1.filter(n=>n.length!==0),i=ProjectDetailsImageFile(),t,f,r,u,e;i?ProjectDetailsBenchMarkSampleImage:i;t=[];f=$("#ProjectName").val();$("table#Reformulation_Table tbody tr").each(function(){t.push({ProjectName:f,Division:$(this).find("#Division option:selected").val(),ProjectType:"2",Category:$(this).find("#Reformulation_Category option:selected").val(),Hub:$(this).find("#Hub").text(),InitiatedBy:$(this).find("#Reformulation_InitiatedBy").text(),status:1})});flag=!0;t[0].Division==""?(flag=!1,$("#Error_Reformulation_Division").show()):flag=!0;t[0].Category==""?(flag=!1,$("#Error_Reformulation_Category").show()):flag=!0;r=[];u=[];r={businessrational:$("#ProjectDetailsBusinessRational").val(),benchmarksamplesformulation:$("#ProjectDetailsBenchmarkSampleFormulation").val(),benchmarksamplesimage:i,desiredindications:$("#ProjectDetailsDesiredIndications").val(),desireddosageform:$("#ProjectDetailsDesiredDosageForm").val()};u={AdditionalFormulation:$("#AdditionalRequirementsTextBox").val(),ShelfLife:$("#AdditionalRequirmentsShelfLife").val(),FreeFrom:$("#AdditionalRequirmentsFreeFrom").val(),Others:$("#AdditionalRequirmentsOthers").val()};e=$("#editor").val();$("#ProjectName").val()==""?($("#Error-ProjectName").show(),flag=!1):$("#Error-ProjectName").hide();flag&&($("div#SaveModal").modal("show"),$("#SaveReformulation").click(function(){$("#ProjectHeaders").val(JSON.stringify(t));$("#reformulationProductDescription").val(JSON.stringify(o));$("#reformulationProjectDetails").val(JSON.stringify(r));$("#reformulationAdditionalFormulationRequirements").val(JSON.stringify(u));$("#reformulationPackagingProfile").val(JSON.stringify(h));$("#reformulationBusinessInformation").val(JSON.stringify(s));$("#InitiatorRemarks").val(e);$("#ReformulationSubmit").submit()}));$("#HgmlData").val(JSON.stringify(n));$("#ReformulationStatus").val(8);$("#ReformulationEdit").submit()})}function onDeleteHubApproveData(n){confirm("Are you sure you want to delete?",function(){$("#prd_desc1").jqGrid("delRowData",n);$("#prd_desc1").trigger("reloadGrid",[{page:1}])})}function HgmlApproveSendToHub(){var i=$("#prd_desc1").jqGrid("getGridParam","data"),n,t;const r=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&t.RemarksId==n.RemarksId));i.length!=0?(n=$("#prd_desc1").jqGrid("getGridParam","data"),statusId=="4"&&(approvalStatus=[{FromStage:4,FromStageName:statusName,Action:"Send to "+statusList[2].StatusName,ToStage:3,ToStageName:statusList[2].StatusName}]),statusId=="14"&&(approvalStatus=[{FromStage:14,FromStageName:"Brief Demoted to HGML",Action:"Send to "+statusList[2].StatusName,ToStage:3,ToStageName:statusList[2].StatusName}]),t=$("#HGML_Data").jqGrid("getGridParam","data"),$("#HgmlData").val(JSON.stringify(t)),$("#JsonFormReformulationHgmlToHubData").val(JSON.stringify(n)),$("#ApprovalStatus").val(JSON.stringify(approvalStatus)),$("#ReformulationStatus").val(3),$("#SavedPackagingRemarks").val(JSON.stringify(r)),$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData)),$("#ReformulationEdit").submit()):$("#Error_HubGridData").show()}function onlyNumbers(n){var i=event||n,t=i.which||i.keyCode;return t>31&&(t<48||t>57)&&t!=46?!1:!0}function restrictSpecialCharacters(n){var i=event||n,t=i.which||i.keyCode;return(t<48||t>57&&t<65||t>90&&t<97||t>122)&&t!=32?!1:!0}function onlyAlphabets(n){var i=event||n,t=i.which||i.keyCode;return t>=65&&t<=90||t>=97&&t<=122?!0:!1}function validatePmdReviewSendMailForm(){$("#PmdReview_SendMail_Button").prop("disabled",!1);$("#sendMailModal").modal("show")}function downloaddocfile(){var i=$("#PmdReview_SelectedUsers").val(),r=$("#PmdReview_SendMail_Remarks").val(),n=new FormData,t=$("#ProjectId").val(),u=$("#StatusId").val();$.ajax({url:ROOT+"NewInitiation/ReformulationDraft",type:"POST",dataType:"HTML",cache:!1,data:{ProjectId:t,Type:"Reformulation",Status:u},success:function(u){$(".ReformulationDraft").html(u);var f=$(".ReformulationDraft").html();n.append("JsonString",f);$.ajax({url:ROOT+"NewInitiation/GeneratePdfHtml",type:"POST",dataType:"HTML",data:n,contentType:!1,processData:!1,success:function(){$.ajax({url:ROOT+"NewInitiation/GeneratePdfforSendmail?toMailids="+i+"&remarks="+r+"&ProjectId="+t,type:"POST",success:function(){}})}})}})}function BI(n){$("#BI").modal("show");$("#HubbusinessInfoLabel").text(n+" Business Information");var t=[];$.each(JsonFormReformulationHubBusinessData.ReformulationHubBusinessInformation,function(i,r){var u=r.FromHubId;u==n&&t.push(r)});$("#Hub_business_info_view").jqGrid("clearGridData");$("#Hub_business_info_view").jqGrid("setGridParam",{data:t});$("#Hub_business_info_view").trigger("reloadGrid",[{page:1}])}function fileBenchValidation(){var n,s,t,e,i;var r=!0,o=["jpg","jpeg","png","gif","jfif","tiff","bmp","svg"],u=0,f=[];if(f=$(`#ProjectDetailsBenchMarkSampleImage`).get(0).files,$.each(f,function(n,t){var i=t.name.split(".").pop().toLowerCase();if(jQuery.inArray(i,o)===-1)return $("#Err_InvalidBenchmarkImage").show(),$("#ProjectDetailsBenchMarkSampleImage").val(""),setTimeout(function(){$("#Err_InvalidBenchmarkImage").hide()},5e3),r=!1,!1}),r)for(n=0;n<$(`#ProjectDetailsBenchMarkSampleImage`).get(0).files.length;n++){if(s=["Bytes","KB","MB","GB","TB"],u+=$(`#ProjectDetailsBenchMarkSampleImage`).get(0).files[n].size/1024,u>5120)return alert("The file size should be less than 5 MB"),$("#ProjectDetailsBenchMarkSampleImage").val(""),$("#delete_icon_Benchmark_Samples_Image").hide(),$(`#ProjectDetailsBenchMarkSampleImage`).get(0).val(""),!1;t=[];e=$(`#ProjectDetailsBenchMarkSampleImage`).get(0).files[n];t.push(e);i=$(`#ProjectDetailsBenchMarkSampleImage`).get(0).files[n].name.toString().split("\\").pop();t.name=i;const r=new File(t,i,{type:t[0].type});formData.append("files",r)}}function AddTargetCost(){var t=$("#TargetCostProductName").val(),i=$("#TargetCostSKU").val()=="--Select--"?"":$("#TargetCostSKU").val(),o=$.trim($("#TargetCost").val()),s=$.trim($("#TargetCostCurrency").val()),h=$.trim($("#TargetCostRemarks").val()),r=!0,u,n,f,e;(t==""||i=="")&&(r=!1,t==""?$(".Error_ProdName").show():$(".Error_ProdName").hide(),i==""?$("#Error_ProdSKU").show():$("#Error_ProdSKU").hide());EditRowId2==0&&$(".Error_PMD_Tc").text()!=""?r=!1:"";r&&(u=[],n={},n={Product:t,SKU:i,TargetCost:o,Currency:s,TargetCostRemarks:h},EditRowId2==0?(u.push(n),f=$("#TargetCost_Grid").jqGrid("getGridParam","data"),e=$.merge(f,u),$("#TargetCost_Grid").jqGrid("setGridParam",{data:e}),$("#TargetCost_Grid").trigger("reloadGrid",[{page:1}])):($("#TargetCost_Grid").jqGrid("setRowData",EditRowId2,n),$("#TargetCost_Grid").trigger("reloadGrid",[{page:1}]),EditRowId2=0),$(".TCdata").val(""),$("#TargetCostSKU .skuOption").remove(),$("#TargetCostSKU .ProductOption").remove(),$("#TargetCostSKU .Options").remove(),$("#TargetCostSKU").prop("selectedIndex",0),$("#TargertCostAdd").prop("disabled",!1),isEditTC=!1)}function onEditTargetCost(n){var t,f,r,i;for($("#TargetCostSKU .skuOption").remove(),EditRowId2=n,isEditTC=!0,t=jQuery("#TargetCost_Grid").jqGrid("getRowData",n),TCEditedSKU=t.SKU,$("#TargetCostProductName").val(t.Product),$("#TargetCostSKU .options").remove(),f=t.SKU.split(","),r=$("#prd_desc").jqGrid("getGridParam","data"),i=0;i<r.length;i++)if(r[i].ExistingName==$("#TargetCostProductName").val()){var e=r[i].SKU,o=e.split(","),u="";$.each(o,function(n,t){(t!=""||t!=null||t!=undefined)&&(u+='<option class="options" value="'+t+'">'+t+"<\/option>")});$("#TargetCostSKU").append(u);break}$("#TargetCostSKU").val(t.SKU);$("#TargetCost").val(t.TargetCost);$("#TargetCostCurrency").val(t.Currency);$("#TargetCostRemarks").val(t.TargetCostRemarks)}function onDeleteTargetCost(n,t=0){t===1?($("#TargetCost_Grid").jqGrid("delRowData",n),$("#TargetCost_Grid").trigger("reloadGrid",[{page:1}])):confirm("Are you sure you want to delete?",function(){$("#TargetCost_Grid").jqGrid("delRowData",n);$("#TargetCost_Grid").trigger("reloadGrid",[{page:1}]);EditRowId2=0;n=0;$(".TCdata").val("");$("#TargetCostSKU .skuOption").remove();$("#TargetCostSKU .ProductOption").remove();$("#TargetCostSKU .Options").remove();$("#TargetCostSKU").prop("selectedIndex",0)})}function onlyNumbersNotdecimals(n){var i=event||n,t=i.which||i.keyCode;return t>31&&(t<48||t>57)||t==46?!1:!0}function onlyNumbers(n){var i=event||n,t=i.which||i.keyCode,r=n.value;return t==46&&(r.indexOf(".")!==-1||r.length===0)?!1:t>31&&(t<48||t>57)&&t!=46?!1:!0}function onDeleteImage(n,t,i){n=="expected"?confirm("Are you sure you want to delete image?",function(){var n=jQuery("#expected").jqGrid("getRowData",i);PackagingProfile={Product:n.Product,SKU:n.SKU,PrimaryPackaging:n.PrimaryPackaging,SecondaryPackaging:n.SecondaryPackaging,TertiaryPackaging:n.TertiaryPackaging,BenchmarkProducts:n.BenchmarkProducts,DesiredPackagingCharacters:n.DesiredPackagingCharacters,Others:n.Others,Mould:n.Mould,PackagingProfileImage:""};deletedImageNameList.push(n.PackagingProfileImage);$("#expected").jqGrid("setRowData",i,PackagingProfile);$("#expected").trigger("reloadGrid",[{page:1}])}):confirm("Are you sure you want to delete image?",function(){var n="";$.trim($("#ImageName").text())!=""?n=$.trim($("#ImageName").text()):$("#ProjectDetailsBenchMarkSampleImage").val()!=""&&(n=$("#ProjectDetailsBenchMarkSampleImage").val());n=n.replace(/"/g,"");n!=""&&(deletedImageNameList.push(n),$("#ProjectDetailsBenchMarkSampleImage").val(""),$("#BenchMarkSampleImage").val(""),$("#ImageName").text(""),ProjectDetailsBenchMarkSampleImage="",$("#delete_icon_Benchmark_Samples_Image").hide())})}function onDeleteSustainability(n){var t=jQuery("#Table_Sustainability").jqGrid("getRowData",n);confirm("Are you sure you want to delete?",function(){var i,r,t;$("#Table_Sustainability").jqGrid("delRowData",n);$("#Table_Sustainability").trigger("reloadGrid",[{page:1}]);$(".Sustainability").val("");i=$("#Table_Sustainability").jqGrid("getCol","Product");r=$("#prd_desc").jqGrid("getCol","ExistingName");sustainabilityProductNameList=$.grep(r,function(n){return $.inArray(n,i)==-1});$("option").remove("#SUS_Product .ProductOption");sustainabilityProductNameList.length>0&&(t="",$.each(sustainabilityProductNameList,function(n,i){i!=""&&(t+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#SUS_Product").append(t));editRowId5=0;n=0});$("#Table_Sustainability").trigger("reloadGrid",[{page:1}])}function onEditSustainability(n){var t,r,i;editRowId5=n;$(".Error_Sustainability").hide();t=jQuery("#Table_Sustainability").jqGrid("getRowData",n);r=$("#Table_Sustainability").jqGrid("getCol","Product");sustainabilityProductNameList=$.grep(sustainabilityProductNameList,function(n){return $.inArray(n,r)==-1});sustainabilityProductNameList.push(t.Product);$("option").remove("#SUS_Product .ProductOption");sustainabilityProductNameList.length>0&&(i="",$.each(sustainabilityProductNameList,function(n,t){t!=""&&(i+='<option class="ProductOption" value="'+t+'">'+t+"<\/option>")}),$("#SUS_Product").append(i));$("#SUS_Product").val(t.Product);$("#SUS_TargetedGoals").val(t.TargetedGoals);$("#SUS_Reusable").val(t.Reusable);$("#SUS_Recycle").val(t.Recycle);$("#SUS_Reducing").val(t.Reducing);$("#SUS_Recovering").val(t.Recovering)}function onEditPackagingProfile(n){var i;$("#PackagingProfileSKU").empty();$("#PackagingProfileSKU").multiselect("rebuild");EditRowIdPackagingProfile=n;isEdited=1;$(".Error_PackagingProfile").hide();var t=packagingProfileData_1[n],e=packagingProfileData_1.map(n=>n.Product),u=$("#prd_desc").jqGrid("getGridParam","data"),r=[],f=t.SKU.split(",").map(n=>n.trim());$.each(u,function(n,i){$.trim(i.ExistingName)==t.Product&&(r=i.SKU.split(",").map(n=>n.trim()))});i="";r.forEach(function(n){i+=f.includes(n)?`<option class="SkuOption" selected value="`+n+`" >`+n+`</option>`:`<option class="SkuOption" value="`+n+`" >`+n+`</option>`});$("option").remove("#PackagingProfileSKU .SkuOption");$("#PackagingProfileSKU").append(i).multiselect("rebuild");$("#PackagingProfileProduct").val(t.Product);CKEDITOR.instances.PackagingProfilePrimaryPackaging.setData(t.PrimaryPackaging);CKEDITOR.instances.PackagingProfileSecondaryPackaging.setData(t.SecondaryPackaging);CKEDITOR.instances.PackagingProfileTertiaryPackaging.setData(t.TertiaryPackaging);CKEDITOR.instances.PackagingProfileBenchMarkProduct.setData(t.BenchmarkProducts);CKEDITOR.instances.PackagingProfileDesiredPackagingCharacters.setData(t.DesiredPackagingCharacters);CKEDITOR.instances.PackagingProfileOthers.setData(t.Others);$("#PackagingProfileMould").val(t.Mould);$("#Display_image_upload").text(t.PackagingProfileImage);editedRowdata=packagingProfileData_1;$(".Err-PackagingProfileSKU").hide();$(".Err-PackagingProfileProduct").hide();$("#image_upload").val("")}function onDeletePackagingProfile(n=-1,t,i=0){var f=packagingProfileData_1[n],r=f.PackagingProfileImage,u="";i==1?(r!=""&&r!=null&&$.ajax({type:"POST",url:ROOT+"NewInitiation/DeleteImageFile",data:{fileName:r},success:function(n){u=n}}),$(".PackagingProfile").val(""),$("#Display_PackageImagesUpload").empty(),CKEDITOR.instances.PackagingProfilePrimaryPackaging.setData(""),CKEDITOR.instances.PackagingProfileSecondaryPackaging.setData(""),CKEDITOR.instances.PackagingProfileTertiaryPackaging.setData(""),CKEDITOR.instances.PackagingProfileBenchMarkProduct.setData(""),CKEDITOR.instances.PackagingProfileDesiredPackagingCharacters.setData(""),CKEDITOR.instances.PackagingProfileOthers.setData(""),$("option").remove("#PackagingProfileSKU .SkuOption"),$("#PackagingProfileSKU").multiselect("rebuild"),EditRowId3=-1,EditRowIdPackagingProfile=-1,delete packagingProfileData_1[n],$(t).remove()):confirm("Are you sure you want to delete?",function(){r!=""&&r!=null&&$.ajax({type:"POST",url:ROOT+"NewInitiation/DeleteImageFile",data:{fileName:r},success:function(n){u=n}});delete packagingProfileData_1[n];$(t).remove();$(".PackagingProfile").val("");$("#Display_PackageImagesUpload").empty();CKEDITOR.instances.PackagingProfilePrimaryPackaging.setData("");CKEDITOR.instances.PackagingProfileSecondaryPackaging.setData("");CKEDITOR.instances.PackagingProfileTertiaryPackaging.setData("");CKEDITOR.instances.PackagingProfileBenchMarkProduct.setData("");CKEDITOR.instances.PackagingProfileDesiredPackagingCharacters.setData("");CKEDITOR.instances.PackagingProfileOthers.setData("");$("option").remove("#PackagingProfileSKU .SkuOption");$("#PackagingProfileSKU").multiselect("rebuild");EditRowId3=-1;EditRowIdPackagingProfile=-1})}function DownloadPackageImage(n){var t=packagingProfileData_1[n].PackagingProfileImage;if(t.length>0)return $("#"+n+"DownloadPackageImage").prop("href",ROOT+"NewInitiation/DownloadImageFile?fileName="+t),!0;$("#"+n+"DownloadPackageImage").empty().text("No Image Present")}function remove_row(n){confirm("Are you sure you want to delete?",function(){var u=$("#FiledProductName").text(),f=$("#FiledSKU").text(),e=$.trim($("#ReamarksName").text().split("-")[0]),o=$("#ProjectId").val(),r=jQuery("#RemarksTable").jqGrid("getRowData",n),t={ProjectId:o,Remarks:r.Remarks,Product:u,SKU:f,FieldName:e,RemarksId:r.RemarksId},i;deletedRemarksData.push(t);i=savedFieldRemarks.findIndex(n=>n.ProjectId===t.ProjectId&&n.Product===t.Product&&n.SKU===t.SKU&&n.FieldName===t.FieldName&&n.Remarks===t.Remarks&&parseInt(n.RemarksId)==parseInt(t.RemarksId));i!==-1&&savedFieldRemarks.splice(i,1);$("#RemarksTable").jqGrid("delRowData",n);$("#RemarksTable").trigger("reloadGrid",[{page:1}])})}function calculateColumnTotals(){for(var r,u,n=$("#business_value"),f=n.jqGrid("getGridParam","colModel"),t={},i=2;i<f.length;i++)r=f[i].name,u=n.jqGrid("getCol",r,!1,"sum"),t[r]=isNaN(u)?"":numberWithCommas(u.toFixed(2));t.Product="Total ($)";n.footerData("set",t,!1);n.trigger("reloadFooterData")}function numberWithCommas(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function adjustGridHeight(){var n=$("#business_value").jqGrid("getGridParam","records")*23+45;$("#business_value").jqGrid("setGridHeight",n)}function isNullColumn(n,t){for(var i=0;i<t.length;i++)if(t[i][n]!==null)return!1;return!0}function isZeroColumn(n,t){for(var i=0;i<t.length;i++)if(t[i][n]!==0&&t[i][n]!==0)return!1;return!0}function numberWithCommas(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function validateEditDataSave(){var u=[],f=[],c=$("#prd_desc").jqGrid("getGridParam","data"),l=$("#business_info").jqGrid("getGridParam","data"),a=packagingProfileData_1.filter(n=>n.length!==0),n=ProjectDetailsImageFile(),t,i,r,e,o,s,h;if(n=n==""?ProjectDetailsBenchMarkSampleImage:n,t=[],i=$("#ProjectName").val(),statusId=="8"||statusId=="1"?r=statusId=="8"?8:1:statusId=="11"&&(r=11),e=$("#Table_Sustainability").jqGrid("getGridParam","data"),o=$("#Grid_Supporting_Document").jqGrid("getGridParam","data"),i=="")return validateEditDataSave();$("table#Reformulation_Table tbody tr").each(function(){t.push({ProjectName:i,Division:$(this).find("#Division option:selected").val(),ProjectType:"2",Category:$(this).find("#Reformulation_Category option:selected").val(),Hub:$(this).find("#Hub").text(),InitiatedBy:$(this).find("#Reformulation_InitiatedBy").text(),status:r})});u={businessrational:$("#ProjectDetailsBusinessRational").val(),benchmarksamplesformulation:$("#ProjectDetailsBenchmarkSampleFormulation").val(),benchmarksamplesimage:n,desiredindications:$("#ProjectDetailsDesiredIndications").val(),desireddosageform:$("#ProjectDetailsDesiredDosageForm").val()};f={AdditionalFormulation:$("#AdditionalRequirementsTextBox").val(),ShelfLife:$("#AdditionalRequirmentsShelfLife").val(),FreeFrom:$("#AdditionalRequirmentsFreeFrom").val(),Others:$("#AdditionalRequirmentsOthers").val()};s=$("#editor").val();$("#ProjectHeaders").val(JSON.stringify(t));$("#reformulationProductDescription").val(JSON.stringify(c));$("#reformulationProjectDetails").val(JSON.stringify(u));$("#reformulationAdditionalFormulationRequirements").val(JSON.stringify(f));$("#reformulationPackagingProfile").val(JSON.stringify(a));$("#reformulationBusinessInformation").val(JSON.stringify(l));$("#InitiatorRemarks").val(s);$("#SustainabilityData").val(JSON.stringify(e));$("#SupportingDocumentData").val(JSON.stringify(o));$("#DeletedSupportingdocument").val(JSON.stringify(deleteImageIn_imageGrid));h=$("#Grid_BenchMarkImage").jqGrid("getGridParam","data");$("#BenchMarkImagesData").val(JSON.stringify(h));$("#DeletedBenchMarkImages").val(JSON.stringify(deleteImageIn_BenchMark));statusId=="8"?$("#ReformulationStatus").val(8):statusId=="11"?$("#ReformulationStatus").val(11):statusId=="1"&&$("#ReformulationStatus").val(1);$.ajax({url:ROOT+"NewInitiation/ReformulationAutoSaveEditData",type:"POST",data:$("#ReformulationEdit").serialize(),success:function(){},error:function(){}})}function validateSendBackformToManager(){var h,i;$("#Reformulation_SendBackToInitiator_Ok").prop("disabled",!1);var n=!0,r=$("#prd_desc").jqGrid("getGridParam","data"),u=$("#business_info").jqGrid("getGridParam","data"),f=packagingProfileData_1.filter(n=>n.length!==0),e=$("#Table_Sustainability").jqGrid("getGridParam","data"),t=ProjectDetailsImageFile();t=t==""?ProjectDetailsBenchMarkSampleImage:t;var c=$("#ProjectName").val(),o=[],s=[];o={businessrational:$("#ProjectDetailsBusinessRational").val(),benchmarksamplesformulation:$("#ProjectDetailsBenchmarkSampleFormulation").val(),benchmarksamplesimage:t,desiredindications:$("#ProjectDetailsDesiredIndications").val(),desireddosageform:$("#ProjectDetailsDesiredDosageForm").val()};s={AdditionalFormulation:$("#AdditionalRequirementsTextBox").val(),ShelfLife:$("#AdditionalRequirmentsShelfLife").val(),FreeFrom:$("#AdditionalRequirmentsFreeFrom").val(),Others:$("#AdditionalRequirmentsOthers").val()};h=$("#editor").val();$("#ProjectDetailsBusinessRational").val()==""?($("#Err-ProjectDetails-BusinessRational").show(),n=!1):$("#Err-ProjectDetails-BusinessRational").hide();r.length===0?($("#Err-ProductDescription").show(),n=!1):$("#Err-ProductDescription").hide();u.length===0?($("#err-business_info").show(),n=!1,$(window).scrollTop($("#err-business_info").position().top)):$("#err-business_info").hide();e.length===0?($("#Error_Sustainability").show(),n=!1):$("#Error_Sustainability").hide();$("input[type=radio][name=survey]:checked").val()=="yes"&&(f.length===0?($("#err-expected").show(),n=!1,$(window).scrollTop($("#err-expected").position().top)):$("#err-expected").hide());$("#ProjectName").val()==""?($("#Error-ProjectName").show(),n=!1):$("#Error-ProjectName").hide();i=[];$("table#Reformulation_Table tbody tr").each(function(){i.push({ProjectName:c,Division:$(this).find("#Division option:selected").val(),ProjectType:"2",Hub:$(this).find("#Hub").text(),Category:$(this).find("#Reformulation_Category option:selected").val(),InitiatedBy:$(this).find("#Reformulation_InitiatedBy").text(),status:8})});i[0].Division==""?(n=!1,$("#Error_Reformulation_Division").show(),$(window).scrollTop($("#Reformulation_Table").position().top)):$("#Error_Reformulation_Division").hide();i[0].Category==""?(n=!1,$("#Error_Reformulation_Category").show(),$(window).scrollTop($("#Reformulation_Table").position().top)):$("#Error_Reformulation_Division").hide();n&&($("div#SendbackModal").modal("show"),$("#Reformulation_SendBackToInitiator_Ok").click(function(){var n,c,l;deletedImageNameList.length>0&&$.each(deletedImageNameList,function(n,i){t!=""&&t!=null&&$.ajax({type:"POST",url:ROOT+"NewInitiation/DeleteImageFile",data:{fileName:i},success:function(n){path=n}})});n=$("#PopUp_SendBackToInitiatorRemarks").val();n!=""?($("#ProjectHeaders").val(JSON.stringify(i)),$("#reformulationProductDescription").val(JSON.stringify(r)),$("#reformulationProjectDetails").val(JSON.stringify(o)),$("#reformulationAdditionalFormulationRequirements").val(JSON.stringify(s)),$("#reformulationPackagingProfile").val(JSON.stringify(f)),$("#reformulationBusinessInformation").val(JSON.stringify(u)),$("#InitiatorRemarks").val(h),$("#SendBackToInitiatorRemarks").val(n),$("#SustainabilityData").val(JSON.stringify(e)),c=$("#Grid_Supporting_Document").jqGrid("getGridParam","data"),$("#SupportingDocumentData").val(JSON.stringify(c)),$("#DeletedSupportingdocument").val(JSON.stringify(deleteImageIn_imageGrid)),l=$("#Grid_BenchMarkImage").jqGrid("getGridParam","data"),$("#BenchMarkImagesData").val(JSON.stringify(l)),$("#DeletedBenchMarkImages").val(JSON.stringify(deleteImageIn_BenchMark)),approvalStatus=[{FromStage:9,FromStageName:statusName,Action:"Send back",ToStage:8,ToStageName:"Sent Back to Initiator"}],$("#ApprovalStatus").val(JSON.stringify(approvalStatus)),$("#ReformulationStatus").val(8),document.getElementById("ReformulationEdit").submit(),$("#Reformulation_SendBackToInitiator_Ok").prop("disabled",!0)):$("#Error_SendBackRemarks").show()}))}function validatesubmitformToManager(){var n=!0,t,f,e,h;$("#ConformReformulation").prop("disabled",!1);r==""?($("#err-prd_desc").show(),n=!1):$("#err-prd_desc").hide();u==""?($("#err-business_info").show(),n=!1):$("#err-business_info").hide();var r=$("#prd_desc").jqGrid("getGridParam","data"),u=$("#business_info").jqGrid("getGridParam","data"),o=packagingProfileData_1.filter(n=>n.length!==0),s=$("#Table_Sustainability").jqGrid("getGridParam","data"),c=ProjectDetailsImageFile(),l=$("#ProjectName").val(),i=[];$("table#Reformulation_Table tbody tr").each(function(){i.push({ProjectName:l,Division:$(this).find("#Division option:selected").val(),ProjectType:"2",Hub:$(this).find("#Hub").text(),Category:$(this).find("#Reformulation_Category option:selected").val(),InitiatedBy:$(this).find("#Reformulation_InitiatedBy").text(),status:9})});t=[];statusId=="1"&&(t=[{FromStage:1,FromStageName:"Draft",Action:"Send to Pending for Approval",ToStage:9,ToStageName:"Pending For Approval"}]);statusId=="8"&&(t=[{FromStage:8,FromStageName:statusName,Action:"Send to Pending for Approval",ToStage:9,ToStageName:"Pending For Approval"}]);statusId=="11"&&(t=[{FromStage:11,FromStageName:"Brief Demoted to Initiator",Action:"Send to Pending for Approval",ToStage:9,ToStageName:"Pending For Approval"}]);f=[];e=[];i[0].Division==""?(n=!1,$("#Error_Reformulation_Division").show(),$(window).scrollTop($("#Reformulation_Table").position().top)):$("#Error_Reformulation_Division").hide();i[0].Category==""?(n=!1,$("#Error_Reformulation_Category").show(),$(window).scrollTop($("#Reformulation_Table").position().top)):$("#Error_Reformulation_Division").hide();f={businessrational:$("#ProjectDetailsBusinessRational").val(),benchmarksamplesformulation:$("#ProjectDetailsBenchmarkSampleFormulation").val(),benchmarksamplesimage:c,desiredindications:$("#ProjectDetailsDesiredIndications").val(),desireddosageform:$("#ProjectDetailsDesiredDosageForm").val()};e={AdditionalFormulation:$("#AdditionalRequirementsTextBox").val(),ShelfLife:$("#AdditionalRequirmentsShelfLife").val(),FreeFrom:$("#AdditionalRequirmentsFreeFrom").val(),Others:$("#AdditionalRequirmentsOthers").val()};h=$("#editor").val();$("#ProjectDetailsBusinessRational").val()==""?($("#Err-ProjectDetails-BusinessRational").show(),n=!1):$("#Err-ProjectDetails-BusinessRational").hide();r.length===0?($("#Err-ProductDescription").show(),n=!1):$("#Err-ProductDescription").hide();u.length===0?($("#err-business_info").show(),n=!1):$("#err-business_info").hide();s.length===0?($("#Error_Sustainability").show(),n=!1):$("#Error_Sustainability").hide();$("input[type=radio][name=survey]:checked").val()=="yes"&&(o.length===0?($("#err-expected").show(),n=!1):$("#err-expected").hide());$("#ProjectName").val()==""?($("#Error-ProjectName").show(),n=!1):$("#Error-ProjectName").hide();n&&($("div#SubmitModal").modal("show"),$("#ConformReformulation").click(function(){var n,c;$("#ProjectHeaders").val(JSON.stringify(i));$("#reformulationProductDescription").val(JSON.stringify(r));$("#reformulationProjectDetails").val(JSON.stringify(f));$("#reformulationAdditionalFormulationRequirements").val(JSON.stringify(e));$("#reformulationPackagingProfile").val(JSON.stringify(o));$("#reformulationBusinessInformation").val(JSON.stringify(u));$("#SustainabilityData").val(JSON.stringify(s));$("#InitiatorRemarks").val(h);$("#ApprovalStatus").val(JSON.stringify(t));$("#SaveOrSubmit").val(9);n=$("#Grid_Supporting_Document").jqGrid("getGridParam","data");$("#SupportingDocumentData").val(JSON.stringify(n));$("#DeletedSupportingdocument").val(JSON.stringify(deleteImageIn_imageGrid));c=$("#Grid_BenchMarkImage").jqGrid("getGridParam","data");$("#BenchMarkImagesData").val(JSON.stringify(c));$("#DeletedBenchMarkImages").val(JSON.stringify(deleteImageIn_BenchMark));document.getElementById("ReformulationEdit").submit();$("#ConformReformulation").prop("disabled",!0)}))}function validateFileUpload(){var r=!0,o=["jpg","jpeg","png","gif","jfif","tiff","bmp","svg"],u=0,f=[],n,s,t,e,i;if(f=$(`#image_upload`).get(0).files,$.each(f,function(n,t){var i=t.name.split(".").pop().toLowerCase();if(jQuery.inArray(i,o)===-1)return $("#Err_InvalidPackagingImage").show(),setTimeout(function(){$("#Err_InvalidPackagingImage").hide()},5e3),$(`#image_upload`).val(""),r=!1,!1}),r)for(n=0;n<$(`#image_upload`).get(0).files.length;n++){if(s=["Bytes","KB","MB","GB","TB"],u+=$(`#image_upload`).get(0).files[n].size/1024,u>5120)return alert("The file size should be less than 5 MB"),$("#image_upload").val(""),$("#deleteSelectedFile").hide(),$(`#image_upload`).get(0).val(""),!1;t=[];e=$(`#image_upload`).get(0).files[n];t.push(e);i=$(`#image_upload`).get(0).files[n].name.toString().split("\\").pop();t.name=i;const r=new File(t,i,{type:t[0].type});formData.append("files",r)}}function ShowImages(n){var t=[],i=n;$.each(imageGrid,function(n){i==imageGrid[n].TableClass&&t.push(imageGrid[n])});jQuery("#uploaded_images_table").jqGrid("clearGridData");$("#uploaded_images_table").jqGrid("setGridParam",{data:t});$("#uploaded_images_table").trigger("reloadGrid",[{page:1}]);$("#Images_show_popup").modal("show")}function DownloadUploadedImage(n){if(n.length>0){var t=$("<a>").attr("href",ROOT+"NewInitiation/DownloadImageFile?fileName="+decodeURIComponent(n)).attr("target","_blank").attr("download",n).appendTo("body");return t[0].click(),t.remove(),!0}}function ViewUploadedImage(n){if(n.length>0){var t=ROOT+"NPDImages/"+decodeURIComponent(n);window.open(t,"_blank")}}function OnRemoveImage(n,t){var r=t,u=[];confirm("Are you sure you want to delete image?",function(){var e=decodeURIComponent(n),o;data.push(e);o=[];$.each(imageGrid,function(n){e!=imageGrid[n].Image&&r==imageGrid[n].TableClass&&u.push(imageGrid[n]);e==imageGrid[n].Image&&r==imageGrid[n].TableClass&&o.push(imageGrid[n])});imageGrid=imageGrid.filter(n=>!o.some(t=>n.TableClass==t.TableClass&&n.Image==t.Image));jQuery("#uploaded_images_table").jqGrid("clearGridData");$("#uploaded_images_table").jqGrid("setGridParam",{data:u});$("#uploaded_images_table").trigger("reloadGrid",[{page:1}]);$("#Display_PackageImagesUpload").text("");var f=[],s="",h=t;for(i=0;i<imageGrid.length;i++)imageGrid[i].TableClass==h&&f.push(imageGrid[i]);for(i=0;i<f.length;i++)s+=i+1==f.length?f[i].Image:f[i].Image+",";packagingProfileData_1[h].PackagingProfileImage=s;u.length==0&&(table="PP_Table_"+r,$(".formulation_table table").each(function(){var n=$(this).attr("id");table==n&&($("#Images_show_popup").modal("hide"),$(this).find(".imagesinfo").hide())}))})}function ValidatePackSaveandUpdate(){var u,i;$("#ByClickUpdate_Ok").prop("disabled",!1);const f=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&t.RemarksId==n.RemarksId));var r=!0,n=$("#PMD_Data").jqGrid("getGridParam","data"),t=$("#TargetCost_Grid").jqGrid("getGridParam","data");n.length===0&&($("#Err-PmdData").show(),r=!1,$(window).scrollTop($(".pmddataform").position().top));var e=fineScreeningData.ProductDetailsPmdRemarksList.length==0?"":fineScreeningData.ProductDetailsPmdRemarksList[0].ProductDetailsPmdRemark,o=fineScreeningData.ProjectDetailsPmdRemarksList.length==0?"":fineScreeningData.ProjectDetailsPmdRemarksList[0].ProjectDetailsPmdRemark,s=fineScreeningData.FormulationProfilePmdRemarksList.length==0?"":fineScreeningData.FormulationProfilePmdRemarksList[0].FormulationProfilePmdRemark,h=fineScreeningData.BusinessInformationPmdRemarksList.length==0?"":fineScreeningData.BusinessInformationPmdRemarksList[0].BusinessInformationPmdRemark,c=fineScreeningData.PackagingProfilePmdRemarksList.length==0?"":fineScreeningData.PackagingProfilePmdRemarksList[0].PackagingProfilePmdRemark,l=fineScreeningData.SustainabilityPmdRemarksList.length==0?"":fineScreeningData.SustainabilityPmdRemarksList[0].SustainabilityPmdRemark;n.length==fineScreeningData.PmdDataList.length&&t.length==fineScreeningData.TargetCostDataList.length&&$.trim($("#PD_PMD_Remarks").val())==e.replaceAll("\r","")&&$.trim($("#ProjDetails_PMD_Remarks").val())==o.replaceAll("\r","")&&$.trim($("#FP_PMD_Remarks").val())==s.replaceAll("\r","")&&$.trim($("#BI_PMD_Remarks").val())==h.replaceAll("\r","")&&$.trim($("#PPR_PMD_Remarks").val())==c.replaceAll("\r","")&&$.trim($("#SUS_PMD_Remarks").val())==l.replaceAll("\r","")&&(u=!1,i=!1,$.each(n,function(t){if(n[t].ProductName!=fineScreeningData.PmdDataList[t].ProductName||n[t].ProjectCategorization!=fineScreeningData.PmdDataList[t].ProjectCategorization||n[t].ComplexityToBeAssigned!=fineScreeningData.PmdDataList[t].ComplexityToBeAssigned||n[t].RandDName!=fineScreeningData.PmdDataList[t].RandDName||n[t].Remarks!=fineScreeningData.PmdDataList[t].Remarks||n[t].ProjectLead!=fineScreeningData.PmdDataList[t].ProjectLead||n[t].TargetFirstPrototypeSubmissionDate!=fineScreeningData.PmdDataList[t].TargetFirstPrototypeSubmissionDate||n[t].TargetTTDCompletionDate!=fineScreeningData.PmdDataList[t].TargetTTDCompletionDate||n[t].TargetProductionDate!=fineScreeningData.PmdDataList[t].TargetProductionDate||n[t].MajorRiskIfAny!=fineScreeningData.PmdDataList[t].MajorRiskIfAny)return u=!0,!1}),t.length==0&&fineScreeningData.TargetCostDataList.length==0?i=!1:$.each(t,function(n){if(t[n].Product!=fineScreeningData.TargetCostDataList[n].Product||t[n].SKU!=fineScreeningData.TargetCostDataList[n].SKU||t[n].Currency!=fineScreeningData.TargetCostDataList[n].Currency||t[n].TargetCost!=fineScreeningData.TargetCostDataList[n].TargetCost||t[n].TargetCostRemarks!=fineScreeningData.TargetCostDataList[n].TargetCostRemarks)return i=!0,!1}));u==!1&&i==!1&&(r=!1,alert("There are no changes available to save"));r&&($("div#UpdateModal").modal("show"),$("#ByClickUpdate_Ok").click(function(){var i=[],r=$("#PMDDataUpdateRemarks").val();r===""?$("#Error_Reformulation_PMDUpdateRemarks").show():(statusId=="6"&&(i=[{FromStage:6,FromStageName:statusName,Action:"Send to Update",ToStage:12,ToStageName:"Updated"}],$("#ReformulationStatus").val(12)),statusId=="12"&&(i=[{FromStage:12,FromStageName:statusName,Action:"Updated",ToStage:12,ToStageName:"Updated"}],$("#ReformulationStatus").val(12)),$("#SendToHgmlRemarks").val(r),$("#PmdData").val(JSON.stringify(n)),t=$("#TargetCost_Grid").jqGrid("getGridParam","data"),$("#TargetCostGridData").val(JSON.stringify(t)),$("#ApprovalStatus").val(JSON.stringify(i)),$("#SavedPackagingRemarks").val(JSON.stringify(f)),$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData)),$("#ReformulationEdit").submit(),$("#ByClickUpdate_Ok").prop("disabled",!0))}))}function PMDSendBacktoInitiator(){const n=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&n.RemarksId===t.RemarksId));$("#Reformulation_SendBackToInitiator_Ok").prop("disabled",!1);$("div#SendbackModal").modal("show");$("#Reformulation_SendBackToInitiator_Ok").click(function(){var t=[],u=$("#PopUp_SendBackToInitiatorRemarks").val(),i,r;if(u=="")return $("#Error_SendBackRemarks").show(),!1;i=[];r=[];statusId=="5"&&(t=[{FromStage:5,FromStageName:"Fine Screening Review",Action:"Send Back",ToStage:11,ToStageName:"Brief Demoted to Initiator"}]);statusId=="16"&&(t=[{FromStage:16,FromStageName:"Under Exploration",Action:"Send Back",ToStage:11,ToStageName:"Brief Demoted to Initiator"}]);$("#ReformulationStatus").val(11);i=$("#PMD_Data").jqGrid("getGridParam","data");$("#PmdData").val(JSON.stringify(i));r=$("#TargetCost_Grid").jqGrid("getGridParam","data");$("#TargetCostGridData").val(JSON.stringify(r));$("#SavedPackagingRemarks").val(JSON.stringify(n));$("#DeletedPackagingRemarks").val(JSON.stringify(deletedRemarksData));$("#ApprovalStatus").val(JSON.stringify(t));$("#SendToHgmlRemarks").val(u);$("#ReformulationEdit").submit();$("#Reformulation_SendBackToInitiator_Ok").prop("disabled",!0)})}function ValidatePackSubmitToPMD(){var n,t,f,e,h;n=!0;$("#ConformReformulation").prop("disabled",!1);$("#ManagerApprovalOK").prop("disabled",!1);r==""?($("#err-prd_desc").show(),n=!1):$("#err-prd_desc").hide();u==""?($("#err-business_info").show(),n=!1):$("#err-business_info").hide();var r=$("#prd_desc").jqGrid("getGridParam","data"),u=$("#business_info").jqGrid("getGridParam","data"),o=packagingProfileData_1.filter(n=>n.length!==0),s=$("#Table_Sustainability").jqGrid("getGridParam","data"),c=ProjectDetailsImageFile(),l=$("#ProjectName").val(),i=[];$("table#Reformulation_Table tbody tr").each(function(){i.push({ProjectName:l,Division:$(this).find("#Division option:selected").val(),ProjectType:"2",Hub:$(this).find("#Hub").text(),Category:$(this).find("#Reformulation_Category option:selected").val(),InitiatedBy:$(this).find("#Reformulation_InitiatedBy").text(),status:5})});t=[];statusId=="11"&&(t=[{FromStage:11,FromStageName:"Brief Demoted to Initiator",Action:"Send to Fine Screening Review",ToStage:5,ToStageName:"Fine Screening Review"}]);statusId=="9"&&(t=[{FromStage:9,FromStageName:"Pending for Approval",Action:"Send to Fine Screening Review",ToStage:5,ToStageName:"Fine Screening Review"}]);statusId=="8"&&(t=[{FromStage:8,FromStageName:"Sent Back to Initiator",Action:"Send to Fine Screening Review",ToStage:5,ToStageName:"Fine Screening Review"}]);f=[];e=[];i[0].Division==""?(n=!1,$("#Error_Reformulation_Division").show(),$(window).scrollTop($("#Reformulation_Table").position().top)):$("#Error_Reformulation_Division").hide();i[0].Category==""?(n=!1,$("#Error_Reformulation_Category").show(),$(window).scrollTop($("#Reformulation_Table").position().top)):$("#Error_Reformulation_Division").hide();f={businessrational:$("#ProjectDetailsBusinessRational").val(),benchmarksamplesformulation:$("#ProjectDetailsBenchmarkSampleFormulation").val(),benchmarksamplesimage:c,desiredindications:$("#ProjectDetailsDesiredIndications").val(),desireddosageform:$("#ProjectDetailsDesiredDosageForm").val()};e={AdditionalFormulation:$("#AdditionalRequirementsTextBox").val(),ShelfLife:$("#AdditionalRequirmentsShelfLife").val(),FreeFrom:$("#AdditionalRequirmentsFreeFrom").val(),Others:$("#AdditionalRequirmentsOthers").val()};h=$("#editor").val();$("#ProjectDetailsBusinessRational").val()==""?($("#Err-ProjectDetails-BusinessRational").show(),n=!1):$("#Err-ProjectDetails-BusinessRational").hide();r.length===0?($("#Err-ProductDescription").show(),n=!1):$("#Err-ProductDescription").hide();u.length===0?($("#err-business_info").show(),n=!1):$("#err-business_info").hide();s.length===0?($("#Error_Sustainability").show(),n=!1):$("#Error_Sustainability").hide();$("input[type=radio][name=survey]:checked").val()=="yes"&&(o.length===0?($("#err-expected").show(),n=!1):$("#err-expected").hide());$("#ProjectName").val()==""?($("#Error-ProjectName").show(),n=!1):$("#Error-ProjectName").hide();n&&(statusId=="9"?($("div#SubmitForHGML").modal("show"),$("#ManagerApprovalOK").click(function(){var l=$("#ShowManagerApprovalRemarks").val(),n,c;$("#ProjectHeaders").val(JSON.stringify(i));$("#reformulationProductDescription").val(JSON.stringify(r));$("#reformulationProjectDetails").val(JSON.stringify(f));$("#reformulationAdditionalFormulationRequirements").val(JSON.stringify(e));$("#reformulationPackagingProfile").val(JSON.stringify(o));$("#reformulationBusinessInformation").val(JSON.stringify(u));$("#SustainabilityData").val(JSON.stringify(s));$("#InitiatorRemarks").val(h);$("#SendBackToInitiatorRemarks").val(l);$("#ApprovalStatus").val(JSON.stringify(t));n=$("#Grid_Supporting_Document").jqGrid("getGridParam","data");$("#SupportingDocumentData").val(JSON.stringify(n));$("#DeletedSupportingdocument").val(JSON.stringify(deleteImageIn_imageGrid));c=$("#Grid_BenchMarkImage").jqGrid("getGridParam","data");$("#BenchMarkImagesData").val(JSON.stringify(c));$("#DeletedBenchMarkImages").val(JSON.stringify(deleteImageIn_BenchMark));$("#SaveOrSubmit").val(5);document.getElementById("ReformulationEdit").submit();$("#ManagerApprovalOK").prop("disabled",!0)})):($("div#SubmitModal").modal("show"),$("#ConformReformulation").click(function(){var n,c;$("#ProjectHeaders").val(JSON.stringify(i));$("#reformulationProductDescription").val(JSON.stringify(r));$("#reformulationProjectDetails").val(JSON.stringify(f));$("#reformulationAdditionalFormulationRequirements").val(JSON.stringify(e));$("#reformulationPackagingProfile").val(JSON.stringify(o));$("#reformulationBusinessInformation").val(JSON.stringify(u));$("#SustainabilityData").val(JSON.stringify(s));$("#InitiatorRemarks").val(h);$("#ApprovalStatus").val(JSON.stringify(t));$("#SaveOrSubmit").val(5);n=$("#Grid_Supporting_Document").jqGrid("getGridParam","data");$("#SupportingDocumentData").val(JSON.stringify(n));$("#DeletedSupportingdocument").val(JSON.stringify(deleteImageIn_imageGrid));c=$("#Grid_BenchMarkImage").jqGrid("getGridParam","data");$("#BenchMarkImagesData").val(JSON.stringify(c));$("#DeletedBenchMarkImages").val(JSON.stringify(deleteImageIn_BenchMark));document.getElementById("ReformulationEdit").submit();$("#ConformReformulation").prop("disabled",!0)})))}function SaveSupportingDocumentFile(n){var t="",i=new FormData;return n!=""&&(i.append("file",n[0]),$.ajax({type:"POST",url:ROOT+"NewInitiation/SaveImageFile","async":!1,data:i,cache:!1,contentType:!1,processData:!1,success:function(n){t=n}})),t}function DownloadUploadedDoc(n){var t=$("#Grid_Supporting_Document").jqGrid("getCell",n,"DocumentName");if(t.length>0)return $(".Report").prop("href",ROOT+"NewInitiation/DownloadImageFile?fileName="+t),!0}function OnDeleteUploadedDoc(n){var t=$("#Grid_Supporting_Document").jqGrid("getCell",n,"DocumentName");confirm("Are you sure you want to delete?",function(){t.length>0&&($("#Grid_Supporting_Document").jqGrid("delRowData",n),$("#Grid_Supporting_Document").trigger("reloadGrid",[{page:1}]),data2={},data2={DocumentName:t},deleteImageIn_imageGrid.push(data2))})}function OnEditUploadedDoc(n){var t=$("#Grid_Supporting_Document").jqGrid("getCell",n,"DocumentName");$("#GetDocName").text(t);editDocId=n}function ViewUploadedDoc(n){var t=$("#Grid_Supporting_Document").jqGrid("getCell",n,"DocumentName"),i;t.length>0&&(i=ROOT+"NPDImages/"+t,window.open(i,"_blank"))}function documentFileValidation(){var n,s,t,e,i;var r=!0,o=["pdf","doc","docx","xls","xlsx","ppt","pptx","csv"],u=0,f=[];if(f=$(`#Supportingdocuments`).get(0).files,$.each(f,function(n,t){var i=t.name.split(".").pop().toLowerCase();if(jQuery.inArray(i,o)===-1)return $("#Err_SupportingDocuments").show(),setTimeout(function(){$("#Err_SupportingDocuments").hide()},5e3),$(`#Supportingdocuments`).val(""),r=!1,!1}),r)for(n=0;n<$(`#Supportingdocuments`).get(0).files.length;n++){if(s=["Bytes","KB","MB","GB","TB"],u+=$(`#Supportingdocuments`).get(0).files[n].size/1024,u>5120)return alert("The file size should be less than 5 MB"),$("#Supportingdocuments").val(""),!1;t=[];e=$(`#Supportingdocuments`).get(0).files[n];t.push(e);i=$(`#Supportingdocuments`).get(0).files[n].name.toString().split("\\").pop();t.name=i;const r=new File(t,i,{type:t[0].type});formData.append("files",r)}}function validateSendToUnderExploration(){$("#ReformulationSendToUnderEX").prop("disabled",!1);$("div#SendToUnderExModal").modal("show");$("#ReformulationSendToUnderEX").click(function(){var n=$("#PopUp_SendToExpRemarks").val(),t=$(".daydatepicker").val(),i,r;n===""||t==""?(n==""?$(".errorUnderExp").show():$(".errorUnderExp").hide(),t==""?$("#Error_Daypicker").show():$("#Error_Daypicker").hide()):(approvalStatus=[{FromStage:5,FromStageName:"Fine Screening Review",Action:"Send to Under Exploration",ToStage:16,ToStageName:"Under Exploration"}],$("#SendToHgmlRemarks").val(n),i=$("#PMD_Data").jqGrid("getGridParam","data"),$("#PmdData").val(JSON.stringify(i)),r=$("#TargetCost_Grid").jqGrid("getGridParam","data"),$("#TargetCostGridData").val(JSON.stringify(r)),$("#ApprovalStatus").val(JSON.stringify(approvalStatus)),$("#ReformulationStatus").val(16),$("#PMdDueDate").val(t),$("#ReformulationEdit").submit(),$("#ReformulationSendToUnderEX").prop("disabled",!0));$("#PopUp_SendToExpRemarks").keyup(function(){$("#PopUp_SendToExpRemarks").val()==""?$(".errorUnderExp").show():$(".errorUnderExp").hide()})})}function validateSendBackToPMD(){$("#Reformulation_SendBackToInitiator_Ok").prop("disabled",!1);$("div#SendbackModal").modal("show");$("#Reformulation_SendBackToInitiator_Ok").click(function(){var i=[],r=$("#PopUp_SendBackToInitiatorRemarks").val(),n,t;if(r=="")return $("#Error_SendBackRemarks").show(),!1;n=[];t=[];i=[{FromStage:16,FromStageName:"Under Exploration",Action:"Send Back",ToStage:5,ToStageName:"Fine Screening Review"}];$("#ReformulationStatus").val(5);n=$("#PMD_Data").jqGrid("getGridParam","data");$("#PmdData").val(JSON.stringify(n));t=$("#TargetCost_Grid").jqGrid("getGridParam","data");$("#TargetCostGridData").val(JSON.stringify(t));$("#ApprovalStatus").val(JSON.stringify(i));$("#SendToHgmlRemarks").val(r);$("#ReformulationEdit").submit();$("#Reformulation_SendBackToInitiator_Ok").prop("disabled",!0)})}function ValidatePackSubmitToUnderExp(){var n,t,f,e,h;n=!0;$("#ConformReformulation").prop("disabled",!1);$("#ManagerApprovalOK").prop("disabled",!1);r==""?($("#err-prd_desc").show(),n=!1):$("#err-prd_desc").hide();u==""?($("#err-business_info").show(),n=!1):$("#err-business_info").hide();var r=$("#prd_desc").jqGrid("getGridParam","data"),u=$("#business_info").jqGrid("getGridParam","data"),o=packagingProfileData_1.filter(n=>n.length!==0),s=$("#Table_Sustainability").jqGrid("getGridParam","data"),c=ProjectDetailsImageFile(),l=$("#ProjectName").val(),i=[];$("table#Reformulation_Table tbody tr").each(function(){i.push({ProjectName:l,Division:$(this).find("#Division option:selected").val(),ProjectType:"2",Hub:$(this).find("#Hub").text(),Category:$(this).find("#Reformulation_Category option:selected").val(),InitiatedBy:$(this).find("#Reformulation_InitiatedBy").text(),status:16})});t=[];statusId=="11"&&(t=[{FromStage:11,FromStageName:"Brief Demoted to Initiator",Action:"Send to Fine Screening Review",ToStage:16,ToStageName:"Under Exploration"}]);statusId=="9"&&(t=[{FromStage:9,FromStageName:"Pending for Approval",Action:"Send to Fine Screening Review",ToStage:16,ToStageName:"Under Exploration"}]);statusId=="8"&&(t=[{FromStage:8,FromStageName:"Sent Back to Initiator",Action:"Send to Fine Screening Review",ToStage:16,ToStageName:"Under Exploration"}]);f=[];e=[];i[0].Division==""?(n=!1,$("#Error_Reformulation_Division").show(),$(window).scrollTop($("#Reformulation_Table").position().top)):$("#Error_Reformulation_Division").hide();i[0].Category==""?(n=!1,$("#Error_Reformulation_Category").show(),$(window).scrollTop($("#Reformulation_Table").position().top)):$("#Error_Reformulation_Division").hide();f={businessrational:$("#ProjectDetailsBusinessRational").val(),benchmarksamplesformulation:$("#ProjectDetailsBenchmarkSampleFormulation").val(),benchmarksamplesimage:c,desiredindications:$("#ProjectDetailsDesiredIndications").val(),desireddosageform:$("#ProjectDetailsDesiredDosageForm").val()};e={AdditionalFormulation:$("#AdditionalRequirementsTextBox").val(),ShelfLife:$("#AdditionalRequirmentsShelfLife").val(),FreeFrom:$("#AdditionalRequirmentsFreeFrom").val(),Others:$("#AdditionalRequirmentsOthers").val()};h=$("#editor").val();$("#ProjectDetailsBusinessRational").val()==""?($("#Err-ProjectDetails-BusinessRational").show(),n=!1):$("#Err-ProjectDetails-BusinessRational").hide();r.length===0?($("#Err-ProductDescription").show(),n=!1):$("#Err-ProductDescription").hide();u.length===0?($("#err-business_info").show(),n=!1):$("#err-business_info").hide();s.length===0?($("#Error_Sustainability").show(),n=!1):$("#Error_Sustainability").hide();$("input[type=radio][name=survey]:checked").val()=="yes"&&(o.length===0?($("#err-expected").show(),n=!1):$("#err-expected").hide());$("#ProjectName").val()==""?($("#Error-ProjectName").show(),n=!1):$("#Error-ProjectName").hide();n&&(statusId=="9"?($("div#SubmitForHGML").modal("show"),$("#ManagerApprovalOK").click(function(){var l=$("#ShowManagerApprovalRemarks").val(),n,c;$("#ProjectHeaders").val(JSON.stringify(i));$("#reformulationProductDescription").val(JSON.stringify(r));$("#reformulationProjectDetails").val(JSON.stringify(f));$("#reformulationAdditionalFormulationRequirements").val(JSON.stringify(e));$("#reformulationPackagingProfile").val(JSON.stringify(o));$("#reformulationBusinessInformation").val(JSON.stringify(u));$("#SustainabilityData").val(JSON.stringify(s));$("#InitiatorRemarks").val(h);$("#SendBackToInitiatorRemarks").val(l);$("#ApprovalStatus").val(JSON.stringify(t));$("#SaveOrSubmit").val(16);n=$("#Grid_Supporting_Document").jqGrid("getGridParam","data");$("#SupportingDocumentData").val(JSON.stringify(n));$("#DeletedSupportingdocument").val(JSON.stringify(deleteImageIn_imageGrid));c=$("#Grid_BenchMarkImage").jqGrid("getGridParam","data");$("#BenchMarkImagesData").val(JSON.stringify(c));$("#DeletedBenchMarkImages").val(JSON.stringify(deleteImageIn_BenchMark));document.getElementById("ReformulationEdit").submit();$("#ManagerApprovalOK").prop("disabled",!0)})):($("div#SubmitModal").modal("show"),$("#ConformReformulation").click(function(){var n,c;$("#ProjectHeaders").val(JSON.stringify(i));$("#reformulationProductDescription").val(JSON.stringify(r));$("#reformulationProjectDetails").val(JSON.stringify(f));$("#reformulationAdditionalFormulationRequirements").val(JSON.stringify(e));$("#reformulationPackagingProfile").val(JSON.stringify(o));$("#reformulationBusinessInformation").val(JSON.stringify(u));$("#SustainabilityData").val(JSON.stringify(s));$("#InitiatorRemarks").val(h);$("#ApprovalStatus").val(JSON.stringify(t));$("#SaveOrSubmit").val(16);n=$("#Grid_Supporting_Document").jqGrid("getGridParam","data");$("#SupportingDocumentData").val(JSON.stringify(n));$("#DeletedSupportingdocument").val(JSON.stringify(deleteImageIn_imageGrid));c=$("#Grid_BenchMarkImage").jqGrid("getGridParam","data");$("#BenchMarkImagesData").val(JSON.stringify(c));$("#DeletedBenchMarkImages").val(JSON.stringify(deleteImageIn_BenchMark));document.getElementById("ReformulationEdit").submit();$("#ConformReformulation").prop("disabled",!0)})))}function ReformulationSendToUnderExplorationForm(){var n=!0,t,i;$("#ReformulationSendToPMD").prop("disabled",!1);t=$(".HgmlDataSendToHubConfirmation").val();t===""?($("#Error_DoYouWantSentToHUB").show(),n=!1,$(window).scrollTop($("#Hgml_Data-Field").position().top)):$("#Error_DoYouWantSentToHUB").hide();i=$("#HGML_Data").jqGrid("getGridParam","data");t=="No"?(n=!0,i.length===0?($(".Error_EmptyGrid").show(),n=!1):$(".Error_EmptyGrid").hide()):n=!1;n&&($("div#SendToPmdModal").modal("show"),$("#ReformulationSendToPMD").click(function(){var r=$("#PopUp_SendToPmdRemarks").val();r!=""?(statusId=="2"&&(approvalStatus=[{FromStage:2,FromStageName:statusName,Action:"Send to Under Exploration",ToStage:16,ToStageName:"Under Exploration"}]),statusId=="13"&&(approvalStatus=[{FromStage:13,FromStageName:"Brief Demoted to HGML",Action:"Send to Under Exploration",ToStage:16,ToStageName:"Under Exploration"}]),$("#HgmlData").val(JSON.stringify(i)),$("#ApprovalStatus").val(JSON.stringify(approvalStatus)),$("#HgmlDataSendToHubConfirmation").val(t),$("#SendToHubRemarks").val(r),$("#ReformulationStatus").val(16),$("#SendToPmdRemarks").val(r),$("#ReformulationEdit").submit(),$("#ReformulationSendToPMD").prop("disabled",!0)):r==""?$("#Error_Reformulation_PMDremarks").show():$("#Error_Reformulation_PMDremarks").hide();$("#PopUp_SendToPmdRemarks").keyup(function(){$("#PopUp_SendToPmdRemarks").val()==""?($("#Error_Reformulation_PMDremarks").show(),n=!1):($("#Error_Reformulation_PMDremarks").hide(),n=!0)})}))}function ReformulationSendToUnderExploration(){$("#ReformulationSendToPMD").prop("disabled",!1);var n=!0,t=$("#HGML_Data").jqGrid("getGridParam","data");t.length===0?($("#err-hgml_data").show(),$(window).scrollTop($("#HgmlData_ApprovePage").position().top)):($("div#SendToPmdModal").modal("show"),$("#ReformulationSendToPMD").click(function(){$("#PopUp_SendToPmdRemarks").val()==""?($("#Error_Reformulation_PMDremarks").show(),n=!1):($("#Error_Reformulation_PMDremarks").hide(),n=!0);var i=$("#PopUp_SendToPmdRemarks").val();n&&(statusId=="4"&&(approvalStatus=[{FromStage:4,FromStageName:statusName,Action:"Send to "+statusList[4].StatusName,ToStage:16,ToStageName:"Under Exploration"}]),statusId=="14"&&(approvalStatus=[{FromStage:14,FromStageName:"Brief Demoted to HGML",Action:"Send to Brief Demoted",ToStage:16,ToStageName:"Under Exploration"}]),$("#HgmlData").val(JSON.stringify(t)),$("#ApprovalStatus").val(JSON.stringify(approvalStatus)),$("#SendToPmdRemarks").val(i),$("#ReformulationStatus").val(16),$("#ReformulationEdit").submit(),$("#ReformulationSendToPMD").prop("disabled",!0));$("#PopUp_SendToPmdRemarks").keyup(function(){$("#PopUp_SendToPmdRemarks").val()==""?($("#Error_Reformulation_PMDremarks").show(),n=!1):($("#Error_Reformulation_PMDremarks").hide(),n=!0)})}))}function SaveBenchMarkImageFile(){for(var t,i=[],r=$("#ProjectDetailsBenchMarkSampleImage").prop("files"),n=0;n<r.length;n++)t=new FormData,t.append("file",r[n]),$.ajax({type:"POST",url:ROOT+"NewInitiation/SaveImageFile","async":!1,data:t,cache:!1,contentType:!1,processData:!1,success:function(n){i.push(n.replaceAll('"',""))}});return i}function DeleteBenchmarkImage(n){var t=decodeURIComponent(n);confirm("Are you sure you want to delete?",function(){if(n.length>0){griddata_Bench=griddata_Bench.filter(n=>n.Image!==t);var i={},i={Image:t};deleteImageIn_BenchMark.push(i);$("#Grid_BenchMarkImage").jqGrid("clearGridData");$("#Grid_BenchMarkImage").jqGrid("setGridParam",{data:griddata_Bench});$("#Grid_BenchMarkImage").trigger("reloadGrid",[{page:1}])}})}var editRowId5=0,deletedRemarksData=[],packagingProfileData_1=[],PackageImageFileName="",imageGrid=[],fineScreeningData=[],deleteImageIn_imageGrid=[],deleteImageIn_BenchMark=[],ReformulationJQgrid,JsonFormReformulationHgmlReviewData,JsonFormReformulationHubReviewData,JsonFormReformulationPmdReviewData,JsonFormReformulationHubBusinessData,ParticipatingMarkets,editedProductName,BenchMarkSampleImage,textNode,subHeadElement,parentElement,todayDate,EditRowId1,date,today,useremails,reformulationPackagingProfileGrid,isEditTC,EditRowId2,TCEditedSKU,EditRowTC,deletedImageNameList,divTag,htmlTag,ppRowId,editedRowdata,isEdited,$TableHeight1,formData,data,previousStage,i,id,editDocId,$TableHeight,griddata_Bench,docData;$(".data-datepicker").datepicker({todayHighlight:!0,autoclose:!0,format:"dd-mm-yyyy",startDate:"+0d"});CKEDITOR.replace("PackagingProfilePrimaryPackaging",{height:275,toolbarGroups:[{name:"basicstyles",groups:["basicstyles"]},{name:"paragraph",groups:["list","blocks"]},],removeButtons:"Underline,Strike,Subscript,Superscript,Anchor,Styles,Specialchar,PasteFromWord"});CKEDITOR.replace("PackagingProfileSecondaryPackaging",{height:275,toolbarGroups:[{name:"basicstyles",groups:["basicstyles"]},{name:"paragraph",groups:["list","blocks"]},],removeButtons:"Underline,Strike,Subscript,Superscript,Anchor,Styles,Specialchar,PasteFromWord"});CKEDITOR.replace("PackagingProfileTertiaryPackaging",{height:275,toolbarGroups:[{name:"basicstyles",groups:["basicstyles"]},{name:"paragraph",groups:["list","blocks"]},],removeButtons:"Underline,Strike,Subscript,Superscript,Anchor,Styles,Specialchar,PasteFromWord"});CKEDITOR.replace("PackagingProfileBenchMarkProduct",{height:275,toolbarGroups:[{name:"basicstyles",groups:["basicstyles"]},{name:"paragraph",groups:["list","blocks"]},],removeButtons:"Underline,Strike,Subscript,Superscript,Anchor,Styles,Specialchar,PasteFromWord"});CKEDITOR.replace("PackagingProfileDesiredPackagingCharacters",{height:275,toolbarGroups:[{name:"basicstyles",groups:["basicstyles"]},{name:"paragraph",groups:["list","blocks"]},],removeButtons:"Underline,Strike,Subscript,Superscript,Anchor,Styles,Specialchar,PasteFromWord"});CKEDITOR.replace("PackagingProfileOthers",{height:275,toolbarGroups:[{name:"basicstyles",groups:["basicstyles"]},{name:"paragraph",groups:["list","blocks"]},],removeButtons:"Underline,Strike,Subscript,Superscript,Anchor,Styles,Specialchar,PasteFromWord"});$(".multiselectDropdown1").multiselect({enableFiltering:!0,enableCaseInsensitiveFiltering:!0,maxHeight:500,buttonWidth:"100%",dropUp:!0});var YesNo,ProjectDetailsBenchMarkSampleImage,hubApprove,PackageImageFileName,businessInfoProductNameList=[],packagingProfileProductNameList=[],hgmlDataProductNameList=[],pmdDataProductNameList=[],targetCostProductNameList=[],sustainabilityProductNameList=[];$("#BusinessInformationLaunchDate").keypress(function(n){var t=$(this).val(),i=[45];if(n.which>=48&&n.which<=57&&i.push(n.which),i.indexOf(n.which)==-1){n.preventDefault();return}if((t.match(/-/g)||[]).length>=2){n.preventDefault();return}if(!/^\d{2}-\d{2}-\d{4}$/.test(t)){n.preventDefault();return}});$("#Division").change(function(){var n=$("#Division").val();$.ajax({type:"POST",url:ROOT+"NewInitiation/GetCategory",data:{divisionId:n},dataType:"json",success:function(n){n!=null&&($("option").remove(".CategoryOption"),$.each(n,function(n,t){var i='<option class="CategoryOption" value="'+t.CategoryId+'">'+t.CategoryName+"<\/option>";$(".addCategoryOption").append(i)}))},error:function(){alert("Error occured!!")}})});CKEDITOR.replace("editornf",{height:150,toolbarGroups:[{name:"basicstyles",groups:["basicstyles"]},{name:"links",groups:["links"]},{name:"paragraph",groups:["list","blocks"]},{name:"insert",groups:["insert"]},],removeButtons:"Underline,Strike,Subscript,Superscript,Anchor,Styles,Specialchar,PasteFromWord"});ReformulationJQgrid=$.parseJSON($("#ReformulationJSON").val());$("#BI_TotalBusinessValue").val(ReformulationJQgrid.ReformulationBusinessInformation.length>0?ReformulationJQgrid.ReformulationBusinessInformation[0].TotalBusinessValue:"");var headerTable=ReformulationJQgrid.ReformulationTableData,statusList=$.parseJSON($("#StatusList").val()),statusName=headerTable[0].Status,statusId=$("#StatusId").val(),packagingProfile=ReformulationJQgrid.PackagingProfile===undefined?($("#PackagingProfile").hide(),$("#PackagingProfileGrid").hide()):($("#PackagingProfile").show(),$("#PackagingProfileGrid").show()),JsonFormReformulationStagesData=$.parseJSON($("#JsonFormReformulationApprovalStagesData").val()),listLength=JsonFormReformulationStagesData.ApprovalStages.length;if(listLength=listLength-1,(statusId=="5"||statusId=="16")&&$("#PreviousStage").val(JsonFormReformulationStagesData.ApprovalStages[0].FromStageName),(statusId=="1"||statusId=="8"||statusId=="11")&&$("#PackagingProfile").show(),JsonFormReformulationHgmlReviewData=$.parseJSON($("#JsonFormReformulationHgmlReviewData").val()),(statusId=="4"|statusId=="14"||statusId=="5"||statusId=="16"||statusId=="3"||statusId=="6"||statusId=="7"||statusId=="12")&&(JsonFormReformulationHubReviewData=$.parseJSON($("#JsonFormReformulationHubReviewData").val()),hubApprove=$("#HubApprove").val()),(statusId=="5"||statusId=="16"||statusId==="6"||statusId=="4"||statusId=="12"||statusId=="14")&&(JsonFormReformulationPmdReviewData=$.parseJSON($("#JsonFormReformulationPmdReviewData").val()),JsonFormReformulationHubBusinessData=JSON.parse($("#JsonFormReformulationHubBusinessData").val()),fineScreeningData=$.parseJSON($("#JsonFormReformulationPmdReviewData").val())),statusId=="3"&&(JsonFormReformulationHubBusinessData=JSON.parse($("#JsonFormReformulationHubBusinessData").val())),colmodels=[{name:"Action",label:"Action",width:90,resizable:!0,ignoreCase:!0,formatter:function(n,t){return'<div class="text-center icon_section align-items-left"><a onclick=onEditBusinessInformation('+t.rowId+') class= "icon_color btn_button edit" title = "Edit" id = "edit_info" ><i class="fa fa-edit mr-2" title="Edit" aria-hidden="true"><\/i><span class="sr-only">Edit<\/span><\/a ><a onclick=onDeleteBusinessInformation('+t.rowId+') class="icon_color btn_button" title="Delete"><i class="fa fa-trash" title="Delete" aria-hidden="true"><\/i><span class="sr-only">Delete<\/span><\/a><\/div> '}},{name:"Product",label:"Product",width:90,resizable:!0,ignoreCase:!0},{name:"SKU",label:"SKU",width:90,resizable:!0,ignoreCase:!0},{name:"ProposedName",label:"Proposed Name",width:130,resizable:!0,ignoreCase:!0},{name:"ProposeLaunchDate",label:"Proposed Launch Date",width:130,resizable:!0,ignoreCase:!0},{name:"ProposedSellingPrice",label:"Proposed Selling Price",width:130,resizable:!0,ignoreCase:!0},{name:"ProposedTP",label:"Expected COP",width:130,resizable:!0,ignoreCase:!0},{name:"ProposedMRP",label:"Proposed MRP",width:130,resizable:!0,ignoreCase:!0},{name:"Currency",label:"Currency",width:130,resizable:!0,ignoreCase:!0},{name:"ExpectedGP",label:"Expected GP % ",width:130,resizable:!0,ignoreCase:!0},{name:"BusinessValue",label:'Business Value <span class="Bus_val">(Y2 Quantity * Proposed Selling Price)<\/span>',width:140,resizable:!0,ignoreCase:!0},{name:"M1Quantity",label:"M1 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M2Quantity",label:"M2 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M3Quantity",label:"M3 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M4Quantity",label:"M4 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M5Quantity",label:"M5 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M6Quantity",label:"M6 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"Y1Quantity",label:"Y1 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"Y2Quantity",label:"Y2 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"Y3Quantity",label:"Y3 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"RevisionInPackagingFormat",label:"Revision in Packaging Format",width:140,resizable:!0,ignoreCase:!0},{name:"UOM",label:"UOM",width:140,resizable:!0,ignoreCase:!0},],$("#business_info").jqGrid({url:"",datatype:"local",data:[],mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,pager:"#pager_businessinfo",rowNum:20,scroll:1,gridComplete:function(){var t=$("#business_info tbody tr"),r=$("#business_info tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"));(statusId=="2"||statusId=="7"||statusId=="5"||statusId=="16"||statusId=="13")&&jQuery("#business_info").jqGrid("hideCol","Action");(statusId=="1"||statusId=="2"||statusId=="8"||statusId=="9"||statusId=="13")&&jQuery("#business_info").jqGrid("hideCol","ProposedName");statusId=="3"&&(jQuery("#business_info").jqGrid("hideCol","RevisionInPackagingFormat"),jQuery("#business_info").jqGrid("hideCol","ProposedName"));(statusId=="4"||statusId=="14")&&(jQuery("#business_info").jqGrid("hideCol","Action"),jQuery("#business_info").jqGrid("hideCol","ProposedName"));(statusId=="5"||statusId=="16"||statusId=="6"||statusId=="12")&&(jQuery("#business_info").jqGrid("hideCol","Action"),jQuery("#business_info").jqGrid("hideCol","ProposedName"));$("#ViewStatus").val()=="View"&&jQuery("#business_info").jqGrid("hideCol","Action")}}),$(".ui-jqgrid-bdiv").css({"max-height":"45vh"}),$(".ui-jqgrid-bdiv").children("div").css({"min-height":"5vh"}),$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height(),$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px")),$(".hubReviewStatus").hide(),$("#HubReviewStatus").hide(),$(".hgmldatagrid").hide(),$("#ProjectName").val(ReformulationJQgrid.ReformulationTableData[0].ProjectName),$("#ProjectId").val(ReformulationJQgrid.ReformulationTableData[0].ProjectId),$("#editor").val(ReformulationJQgrid.ReformulationInitiatorRemarks[0]===undefined?"":ReformulationJQgrid.ReformulationInitiatorRemarks[0].initiatorRemarks),$("#Hub").text(ReformulationJQgrid.ReformulationTableData[0].Hub),$("#Division").val(ReformulationJQgrid.ReformulationTableData[0].Division),$("#Category").val(ReformulationJQgrid.ReformulationTableData[0].Category),$("#Reformulation_InitiatedBy").text(ReformulationJQgrid.ReformulationTableData[0].InitiatedBy),$("#Reformulation_Status").text(statusName),$("#AdditionalRequirementsTextBox").val(ReformulationJQgrid.ReformulationAdditionalFormulation[0]===undefined?"":ReformulationJQgrid.ReformulationAdditionalFormulation[0].AdditionalFormulation),$("#AdditionalRequirmentsShelfLife").val(ReformulationJQgrid.ReformulationAdditionalFormulation[0]===undefined?"":ReformulationJQgrid.ReformulationAdditionalFormulation[0].ShelfLife),$("#AdditionalRequirmentsFreeFrom").val(ReformulationJQgrid.ReformulationAdditionalFormulation[0]===undefined?"":ReformulationJQgrid.ReformulationAdditionalFormulation[0].FreeFrom),$("#AdditionalRequirmentsOthers").val(ReformulationJQgrid.ReformulationAdditionalFormulation[0]===undefined?"":ReformulationJQgrid.ReformulationAdditionalFormulation[0].Others),$("#ProjectDetailsBusinessRational").val(ReformulationJQgrid.ReformulationProjectDetails[0]===undefined?"":ReformulationJQgrid.ReformulationProjectDetails[0].BusinessRational),$("#ProjectDetailsBenchmarkSampleFormulation").val(ReformulationJQgrid.ReformulationProjectDetails[0]===undefined?"":ReformulationJQgrid.ReformulationProjectDetails[0].BenchmarkSample),$("#ProjectDetailsDesiredIndications").val(ReformulationJQgrid.ReformulationProjectDetails[0]===undefined?"":ReformulationJQgrid.ReformulationProjectDetails[0].DesiredIndication),$("#ProjectDetailsDesiredDosageForm").val(ReformulationJQgrid.ReformulationProjectDetails[0]===undefined?"":ReformulationJQgrid.ReformulationProjectDetails[0].DesiredDosageForm),$("#ProjectDetailsBenchMarkSampleImageText").val(ReformulationJQgrid.ReformulationProjectDetails[0]===undefined?"":ReformulationJQgrid.ReformulationProjectDetails[0].BenchmarkImage),ProjectDetailsBenchMarkSampleImage=ReformulationJQgrid.ReformulationProjectDetails[0]===undefined?"":ReformulationJQgrid.ReformulationProjectDetails[0].BenchmarkImage,todayDate=new Date(ReformulationJQgrid.ReformulationTableData[0].InitiatedDate),$("#Reformulation_InitiatedDate").text(todayDate.toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})),statusId!="1"&&($(".prodPackData").hide(),$("#ProjectName").attr("disabled",!0),$("#ProjDetails_HGML_Remarks").val(JsonFormReformulationHgmlReviewData.ProjectDetailsHGMLRemarksList.length==0?"":JsonFormReformulationHgmlReviewData.ProjectDetailsHGMLRemarksList[0].ProjectDetailsHgmlRemark),$("#PD_HGML_Remarks").val(JsonFormReformulationHgmlReviewData.ProductDetailsHGMLRemarksList.length==0?"":JsonFormReformulationHgmlReviewData.ProductDetailsHGMLRemarksList[0].ProductDetailsHgmlRemark),$("#FP_HGML_Remarks").val(JsonFormReformulationHgmlReviewData.FormulationProfileHGMLRemarksList.length==0?"":JsonFormReformulationHgmlReviewData.FormulationProfileHGMLRemarksList[0].FormulationProfileHgmlRemark),$("#PPR_HGML_Remarks").val(JsonFormReformulationHgmlReviewData.PackagingProfileHGMLRemarksList.length==0?"":JsonFormReformulationHgmlReviewData.PackagingProfileHGMLRemarksList[0].PackagingProfileHgmlRemark),$("#BI_HGML_Remarks").val(JsonFormReformulationHgmlReviewData.BusinessInformationHGMLRemarksList.length==0?"":JsonFormReformulationHgmlReviewData.BusinessInformationHGMLRemarksList[0].BusinessInformationHgmlRemark),$("#Division,#Category_Reformulation").attr("disabled",!0)),statusId!="5"&&statusId!="16"&&statusId!="6"&&statusId!="12"&&$(".pmddata").hide(),statusId==="1"&&$(".PackgagingProfileHeader").show(),statusId!="3"&&$(".init_businessInfo").hide(),statusId!="4"&&statusId!="3"&&statusId!="14"&&$(".hubstatus").hide(),statusId=="2"||statusId=="13"){$(".hubHidden").hide();$(".approveHgmlData").show();$(".pmdHidden").hide();$("#business_info").hideCol("ProposedName");$(".HubReview").hide();$(".HideClass").hide();$(".approveHgmlData").show();$(".pmdHidden").hide();$(".hideHgmlGrid").hide();$(".hubstatus").hide();$(".NoEdit").attr("readonly",!0);$(".PackagingProfileHeadingName").show();$("#PackagingProfileGrid").show();statusId=="13"?$("#statusHeader").text("Reformulation - Brief Demoted to HGML"):$("#statusHeader").text("Reformulation - "+statusName);$("#HubReviewStatus").hide();$("#InitiatorRemarks").hide();ReformulationHgmlData=$.parseJSON($("#HgmlData").val());$("body").on("change","#HgmlDataSendToHubConfirmation",function(){var n,t;if(YesNo=$(this).val(),YesNo=="Yes")$("#HgmlData_HubDropdown").val(JsonFormReformulationHgmlReviewData.HgmlDataList.length==0?"":JsonFormReformulationHgmlReviewData.HgmlDataList[0].Hub),$("#HgmlData_HubUsersDropdown").val(JsonFormReformulationHgmlReviewData.HgmlDataList.length==0?"":JsonFormReformulationHgmlReviewData.HgmlDataList[0].HubUsers),$("#HgmlDataHgmlToHubRemarks").val(JsonFormReformulationHgmlReviewData.HgmlDataList.length==0?"":JsonFormReformulationHgmlReviewData.HgmlDataList[0].HgmlToHubRemarks),$("#HgmlData_SendToHub_Yes").show(),$("#HgmlData_SendToHub_No").hide(),$("#Button_SendToPmd").hide(),$(".hideHgmlGrid").hide(),$("#Button_SendToHub").show(),$("#HGML_Data").jqGrid("clearGridData"),$("#Button_SendToUnderExploration").hide();else if(YesNo=="No")for($("#HgmlData_SendToHub_Yes").hide(),$("#HgmlData_SendToHub_No").show(),$("#Button_SendToHub").hide(),$(".hideHgmlGrid").show(),$("#HgmlData_HubDropdown").val("").multiselect("refresh"),$("#HgmlData_HubUsersDropdown").val("").multiselect("refresh"),n=0;n<JsonFormReformulationStagesData.ApprovalStages.length;n++)if(t=JsonFormReformulationStagesData.ApprovalStages[n].FromStage,t==16){$("#Button_SendToUnderExploration").show();break}else $("#Button_SendToPmd").show();else $("#HgmlData_SendToHub_Yes").hide(),$("#HgmlData_SendToHub_No").hide(),$("#Button_SendToHub").hide(),$("#Button_SendToPmd").hide(),$(".hgmldatagrid").hide()});$("#business_info").jqGrid("clearGridData");$("#business_info").jqGrid("setGridParam",{data:ReformulationJQgrid.ReformulationBusinessInformation});$("#business_info").trigger("reloadGrid",[{page:1}])}if(statusId=="7")$("#business_info").jqGrid("clearGridData"),$("#business_info").jqGrid("setGridParam",{data:ReformulationJQgrid.ReformulationBusinessInformation}),$("#business_info").trigger("reloadGrid",[{page:1}]);else if(statusId=="8"||statusId=="9"||statusId=="11")$(".prodPackData").show(),$(".HubReview").hide(),$(".pmdHidden").hide(),$("#business_info").hideCol("ProposedName"),$(".PackagingProfileHeadingName").show(),$("#PackagingProfileGrid").show(),$(".HgmlRemarksButton").hide(),$(".HubNoEdit").hide(),$(".hubHidden").hide(),$(".HgmlRemarks").hide(),statusId=="8"||statusId=="9"?(textNode=document.createTextNode("Reformulation-"+statusName),subHeadElement=document.createElement("span"),subHeadElement.className="sub_head",subHeadElement.innerHTML="<br>(<strong>Note:<\/strong> The Project Brief information will be auto-saved every 5 minutes. Please ensure that Project Name is entered to auto-save the data.)",parentElement=document.getElementById("statusHeader"),parentElement.appendChild(textNode),parentElement.appendChild(subHeadElement)):$("#statusHeader").text("Reformulation - "+statusName),$(".pmddata").hide(),$(".Forhub").hide(),$(".InitiatorRemarks").show(),$("#business_info").jqGrid("clearGridData"),$("#business_info").jqGrid("setGridParam",{data:ReformulationJQgrid.ReformulationBusinessInformation}),$("#business_info").trigger("reloadGrid",[{page:1}]);else if(statusId=="7")$(".prodPackData").hide(),$(".HgmlRemarksButton").hide(),$(".RejectedButton").show(),$(".hubHidden").hide(),$("#statusHeader").text("Reformulation - "+statusName),$(".hgmlremarks").attr("disabled",!0),$(".pmddata").hide(),$(".PackagingProfileHeadingName").show(),$("#PackagingProfileGrid").show(),$("#InitiatorRemarks").hide();else if(statusId=="4"||statusId=="5"||statusId=="16"||statusId=="3"||statusId=="6"||statusId=="12"||statusId=="14"){if((statusId==="4"||statusId=="14")&&($(".prodPackData").hide(),$(".HgmlApprovebuttons").show(),statusId==="4"?$("#statusHeader").text("Reformulation - "+statusName):$("#statusHeader").text("Reformulation - Brief Demoted to HGML"),$(".hub").hide(),$(".SentToHubYesOrNo").hide(),$(".product_profile").show(),$("#HgmlData_ApprovePage").hide(),$(".HubNoEdit").attr("readonly",!1),$(".PackagingProfileHeadingName").show(),$("#business_info").jqGrid("clearGridData"),$("#business_info").jqGrid("setGridParam",{data:ReformulationJQgrid.ReformulationBusinessInformation}),$("#business_info").trigger("reloadGrid",[{page:1}]),$("#business_info").jqGrid("clearGridData"),$("#business_info").jqGrid("setGridParam",{data:ReformulationJQgrid.ReformulationBusinessInformation}),$("#business_info").trigger("reloadGrid",[{page:1}]),ParticipatingMarkets="",$.each(JsonFormReformulationHubReviewData.HgmlDataHUBParticipatingMarketsList,function(n,t){n==JsonFormReformulationHubReviewData.HgmlDataHUBParticipatingMarketsList.length-1?t.HgmlDataHUBParticipatingMarkets!=null&&(ParticipatingMarkets+=t.HgmlDataHUBParticipatingMarkets):t.HgmlDataHUBParticipatingMarkets!=null&&(ParticipatingMarkets+=t.HgmlDataHUBParticipatingMarkets+" ,")}),$("#HgmlData_ParticipatingMarketsApprovePage").val(ParticipatingMarkets)),(statusId=="5"||statusId=="16"||statusId=="6"||statusId=="12")&&($("#ProjDetails_PMD_Remarks").val(JsonFormReformulationPmdReviewData.ProjectDetailsPmdRemarksList.length==0?"":JsonFormReformulationPmdReviewData.ProjectDetailsPmdRemarksList[0].ProjectDetailsPmdRemark),$("#PD_PMD_Remarks").val(JsonFormReformulationPmdReviewData.ProductDetailsPmdRemarksList.length==0?"":JsonFormReformulationPmdReviewData.ProductDetailsPmdRemarksList[0].ProductDetailsPmdRemark),$("#FP_PMD_Remarks").val(JsonFormReformulationPmdReviewData.FormulationProfilePmdRemarksList.length==0?"":JsonFormReformulationPmdReviewData.FormulationProfilePmdRemarksList[0].FormulationProfilePmdRemark),$("#PPR_PMD_Remarks").val(JsonFormReformulationPmdReviewData.PackagingProfilePmdRemarksList.length==0?"":JsonFormReformulationPmdReviewData.PackagingProfilePmdRemarksList[0].PackagingProfilePmdRemark),$("#BI_PMD_Remarks").val(JsonFormReformulationPmdReviewData.BusinessInformationPmdRemarksList.length==0?"":JsonFormReformulationPmdReviewData.BusinessInformationPmdRemarksList[0].BusinessInformationPmdRemark),$(".prodPackData").hide(),$(".PmdRemarks").show(),$(".HgmlRemarks").attr("readonly",!0),$(".HubNoEdit").attr("readonly",!0),$("#statusHeader").text("Reformulation - "+statusName),$(".pmdHidden").hide(),$(".HgmlRemarksButton,.HgmlApprovebuttons, .HideClass").hide(),$(".PMDButtons").show(),$(".HubReview").hide(),$(".NoEdit ").attr("readonly",!0),$("#HubBusinessInfoLinks").show(),$(".BusinessInfo").hide(),$("#HubReviewStatus").hide(),$("#PackagingProfileGrid").show(),$("#productDetailsHubRemarksGrid").show(),$("#projectDetailsHubRemarksGrid").show(),$("#formulationDetailsHubRemarksGrid").show(),$("#businessinfoHubRemarksGrid").show(),$("#packagingProfiileHubRemarksGrid").show(),$(".PackagingProfileHeadingName").show(),$(".hgmldatagrid").show(),$(".hubHidden").hide(),$(".pmddata").show(),$(".hubstatus").hide(),$("#business_info").jqGrid("clearGridData"),$("#business_info").jqGrid("setGridParam",{data:ReformulationJQgrid.ReformulationBusinessInformation}),$("#business_info").trigger("reloadGrid",[{page:1}]),(statusId=="6"||statusId=="12")&&($("#statusHeader").text("Reformulation - "+statusName),$(".HgmlRemarksButton,.HgmlApprovebuttons,.PMDButtons").hide(),$(".RejectedButton").show(),$(".InitiatorRemarks").hide()),colmodels=[{name:"Action",label:"Action",width:90,resizable:!0,ignoreCase:!0,formatter:function(n,t){return`<div class="text-center icon_section align-items-left">
            <a onclick = onEditPmdData(`+t.rowId+`) class="icon_color btn_button" title="Edit" id="edit_worksheet"><i class="fa fa-edit mr-2" title="Edit"></i></a>
            <a onclick = onDeletePmdData(`+t.rowId+`) class="icon_color btn_button" title="Delete" ><i class="fa fa-trash" title="Delete"></i></a>
        </div>`}},{name:"ProductName",label:"Product Name",resizable:!0,ignoreCase:!0},{name:"ComplexityToBeAssigned",label:"Complexity to be Assigned ",resizable:!0,ignoreCase:!0},{name:"RandDName",label:"R&D Name ",resizable:!0,ignoreCase:!0},{name:"Remarks",label:"Remarks",resizable:!0,ignoreCase:!0},{name:"ProjectLead",label:"Project Lead",resizable:!0,ignoreCase:!0},{name:"TargetFirstPrototypeSubmissionDate",label:"Target 1st Prototype submission date",resizable:!0,ignoreCase:!0},{name:"TargetTTDCompletionDate",label:"Target TTD completion date",resizable:!0,ignoreCase:!0},{name:"TargetProductionDate",label:"Target production date",resizable:!0,ignoreCase:!0},{name:"MajorRiskIfAny",label:"Major Risk if any",resizable:!0,ignoreCase:!0},],$("#PMD_Data").jqGrid({url:"",datatype:"local",data:JsonFormReformulationPmdReviewData.PmdDataList,mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,pager:"#pager_PMD",rowNum:20,scroll:1,gridComplete:function(){var t=$("#PMD_Data tbody tr"),r=$("#PMD_Data tbody tr td"),n;if(t.length>1){for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"));$("#ViewStatus").val()=="View"&&jQuery("#PMD_Data").jqGrid("hideCol","Action")}}}),$(".ui-jqgrid-bdiv").css({"max-height":"45vh"}),$(".ui-jqgrid-bdiv").children("div").css({"min-height":"10vh"}),$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height(),$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px")),colmodels1=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"ProductDetailsHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet1").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.ProductDetailsHubRemarksList,mtype:"GET",colModel:colmodels1,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet1",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet1 tbody tr"),r=$("#worksheet1 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),colmodels2=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"ProjectDetailsHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet2").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.ProjectDetailsHubRemarksList,mtype:"GET",colModel:colmodels2,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet2",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet2 tbody tr"),r=$("#worksheet2 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),colmodels3=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"FormulationProfileHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet3").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.FormulationProfileHubRemarksList,mtype:"GET",colModel:colmodels3,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet3",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet3 tbody tr"),r=$("#worksheet3 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),colmodels4=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"BusinessInformationHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet4").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.BusinessInformationHubRemarksList,mtype:"GET",colModel:colmodels4,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet4",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet4 tbody tr"),r=$("#worksheet4 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),colmodels5=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"PackagingProfileHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet5").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.PackagingProfileHubRemarksList,mtype:"GET",colModel:colmodels5,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet5",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet5 tbody tr"),r=$("#worksheet5 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),colmodels7=[{name:"ExistingName",label:"Brand Name",resizable:!0,ignoreCase:!0},{name:"NewBrandName",label:"New Brand Name",resizable:!0,ignoreCase:!0},{name:"SKU",label:"SKU",resizable:!0,ignoreCase:!0},],$("#prd_desc").jqGrid({url:"",datatype:"local",data:ReformulationJQgrid.ReformulationProductDetails,mtype:"GET",colModel:colmodels7,loadonce:!0,viewrecords:!0,pager:"#pager_moulds",rowNum:20,scroll:1,gridComplete:function(){var t=$("#prd_desc tbody tr"),r=$("#prd_desc tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),$(".ui-jqgrid-bdiv").css({"max-height":"45vh"}),$(".ui-jqgrid-bdiv").children("div").css({"min-height":"10vh"}),$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height(),$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"))),statusId=="3"&&$("#Role").val()!="HGML Team"){$(".pmddata").hide();$("#ProjDetails_HUB_Remarks").val(JsonFormReformulationHubReviewData.HUBProjectDetailsRemarksList.length==0?"":JsonFormReformulationHubReviewData.HUBProjectDetailsRemarksList[0].ProjectDetailsHubRemark);$("#PD_HUB_Remarks").val(JsonFormReformulationHubReviewData.HUBProductDetailsRemarksList.length==0?"":JsonFormReformulationHubReviewData.HUBProductDetailsRemarksList[0].ProductDetailsHubRemark);$("#FP_HUB_Remarks").val(JsonFormReformulationHubReviewData.HUBAdditionalFormulationProfileRemarksList.length==0?"":JsonFormReformulationHubReviewData.HUBAdditionalFormulationProfileRemarksList[0].FormulationProfileHubRemark);$("#PPR_HUB_Remarks").val(JsonFormReformulationHubReviewData.HUBPackagingProfileRemarksList.length==0?"":JsonFormReformulationHubReviewData.HUBPackagingProfileRemarksList[0].PackagingProfileHubRemark);$("#BI_HUB_Remarks").val(JsonFormReformulationHubReviewData.HUBBusinessInformationRemarksList.length==0?"":JsonFormReformulationHubReviewData.HUBBusinessInformationRemarksList[0].BusinessInformationHubRemark);$(".HgmlOrHubDataHubRemarks").val(JsonFormReformulationHubReviewData.HUBHgmlDataRemarksList.length==0?"":JsonFormReformulationHubReviewData.HUBHgmlDataRemarksList[0].HgmlOrHubDataHubRemarks);$("#HgmlToHubRemarks").val(JsonFormReformulationHgmlReviewData.HGMLtoHubRemarksList.length==0?"":JsonFormReformulationHgmlReviewData.HGMLtoHubRemarksList[0].HgmlToHubRemarks);$("#ProductDescriptionAdd").hide();$(".HgmlRemarks").attr("readonly",!0);$(".PmdRemarks").show();$(".HubNoEdit").attr("readonly",!0);$("#statusHeader").text("Reformulation - "+statusName);$(".hubReviewStatus").show();$(".pmdHidden").hide();$(".HgmlApprovebuttons").hide();$(".PMDButtons").hide();$(".hubHidden").show();$("#HgmlDataHgmlToHubRemarks").attr("disabled",!0);$(".PackagingProfileHeadingName").show();$("#PackagingProfileGrid").show();$("#HgmlDataHgmlToHubRemarks").attr("disabled",!0);$(".approveHgmlData").hide();$("#HGMLApprove").show();$("#InitiatorRemarks").hide();$("#Initiator_BusinessInformation_Link").text(""+ReformulationJQgrid.ReformulationTableData[0].Hub+" "+$("#Initiator_BusinessInformation_Link").text()+"");$("#HubBusinessInformationPopupHeading").text(ReformulationJQgrid.ReformulationTableData[0].Hub+" Business Information");$("#HgmlData_HUBParticipatingMarkets").val(JsonFormReformulationHubReviewData.HgmlDataHUBParticipatingMarketsList[0]==undefined?"":JsonFormReformulationHubReviewData.HgmlDataHUBParticipatingMarketsList[0].HgmlDataHUBParticipatingMarkets);JsonFormReformulationHubReviewData.ReformulationHubBusinessInformation!=null&&($("#business_info").jqGrid("clearGridData"),$("#business_info").jqGrid("setGridParam",{data:JsonFormReformulationHubReviewData.ReformulationHubBusinessInformation}),$("#business_info").trigger("reloadGrid",[{page:1}]));colmodels=[{name:"HubName",label:"HUB",resizable:!0,ignoreCase:!0},{name:"HgmlDataHUBParticipatingMarkets",label:"Participating Markets",resizable:!0,ignoreCase:!0},{name:"HgmlOrHubDataRemarks",label:"Remarks",resizable:!0,ignoreCase:!0},];var PM_List=JsonFormReformulationHubReviewData.HgmlDataHUBParticipatingMarketsList,RowIdHGML=0,EditRowIdHGML=0,isvalid=!0;$("#HUB_ParticipatingMarkets").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.AllHUBParticipatingMarketsList,mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,rowNum:20,scroll:!0,gridComplete:function(){var t=$("#HUB_PartcipatingMarkets tbody tr"),r=$("#HUB_PartcipatingMarkets tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"10vh"});$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"))}statusId=="3"&&$("#ViewStatus").val()!="View"&&($("#Initiator_BusinessInformation_Link").text(""),$("#Initiator_BusinessInformation_Link").text(""+ReformulationJQgrid.ReformulationTableData[0].Hub+" "+$("#Initiator_BusinessInformation_Link").text()+"Business Information"));function n(){$("div#BusinessInformation_Popup").modal("show");$(".PopupBusinessInformationSaveButtons").hide()}(statusId=="4"||statusId=="14")&&($("#productDetailsHubRemarksGrid").show(),$("#projectDetailsHubRemarksGrid").show(),$("#formulationDetailsHubRemarksGrid").show(),$("#HubBusinessInfoLinks").show(),$("#businessinfoHubRemarksGrid").show(),$("#packagingprofileHubRemarksGrid").show(),$("#HgmlData_ApprovePage").show(),$("#HubReviewStatus").show(),$("#InitiatorRemarks").hide(),$("#business_info").jqGrid("clearGridData"),$("#business_info").jqGrid("setGridParam",{data:ReformulationJQgrid.ReformulationBusinessInformation}),$("#business_info").trigger("reloadGrid",[{page:1}]),$("#ProductDescriptionAdd").hide(),$(".HideClass").hide(),$(".NoEdit").attr("readonly",!0),$(".NotInHubReview").hide(),$(".HgmlRemarksButton").hide(),$(".approveHgmlData").show(),$(".HideForhub").hide(),$(".HubReview").hide(),$(".hubHidden").hide(),$("#PackagingProfile").show(),$("#PackagingProfileGrid").show(),$("#HgmlData_SendToHub_No").show(),$(".hgmldatagrid").hide(),$(".pmddata").hide(),$("#HgmlData_SendToHub_No").show(),$(".hubstatus").show(),$("#HubReviewStatus").show(),$(".hideHgmlGrid").show(),$("#Initiator_BusinessInformation_Link").hide(),divTag="",$.each(JsonFormReformulationHubReviewData.HubApprovalStatusList,function(n,t){t.IsHubApproved=="Yes"&&(divTag+='<div class="col-1"> <label class= "col-form-label mt-2">'+t.HubName+'<\/label><\/div>  <div class="col-2 "> <input type = "text" class= "form-control green hubStatusValue mt-2" value = "Yes" readonly > <\/div>');t.IsHubApproved=="No"&&(divTag+='<div class="col-1"> <label class= "col-form-label mt-2">'+t.HubName+'<\/label><\/div>  <div class="col-2 "> <input type = "text" class= "form-control red hubStatusValue mt-2" value = "No" readonly > <\/div>');t.IsHubApproved=="Yet to Confirm"&&(divTag+='<div class="col-1"> <label class= "col-form-label mt-2">'+t.HubName+'<\/label><\/div>  <div class="col-2 "> <input type = "text" class= "form-control orange hubStatusValue mt-2" value = "Yet to Confirm" readonly > <\/div>')}),$("#HubReviewStatus").html(divTag),colmodels1=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"ProductDetailsHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet1").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.ProductDetailsHubRemarksList,mtype:"GET",colModel:colmodels1,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet1",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet1 tbody tr"),r=$("#worksheet1 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),colmodels2=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"ProjectDetailsHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet2").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.ProjectDetailsHubRemarksList,mtype:"GET",colModel:colmodels2,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet2",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet2 tbody tr"),r=$("#worksheet2 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),colmodels3=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"FormulationProfileHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet3").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.FormulationProfileHubRemarksList,mtype:"GET",colModel:colmodels3,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet3",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet3 tbody tr"),r=$("#worksheet3 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),colmodels4=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"BusinessInformationHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet4").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.BusinessInformationHubRemarksList,mtype:"GET",colModel:colmodels4,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet4",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet4 tbody tr"),r=$("#worksheet4 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),colmodels5=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"PackagingProfileHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet5").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.PackagingProfileHubRemarksList,mtype:"GET",colModel:colmodels5,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet5",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet5 tbody tr"),r=$("#worksheet5 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),colmodels7=[{name:"ExistingName",label:"Brand Name",resizable:!0,ignoreCase:!0},{name:"NewBrandName",label:"New Brand Name",resizable:!0,ignoreCase:!0},{name:"SKU",label:"SKU",resizable:!0,ignoreCase:!0}],$("#prd_desc").jqGrid({url:"",datatype:"local",data:ReformulationJQgrid.ReformulationProductDetails,mtype:"GET",colModel:colmodels7,loadonce:!0,viewrecords:!0,pager:"#pager_moulds",rowNum:20,scroll:1,gridComplete:function(){var t=$("#prd_desc tbody tr"),r=$("#prd_desc tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}))}else(statusId=="2"||statusId=="13")&&$("#statusHeader").text("Reformulation - "+statusName);statusId!="5"&&statusId!="6"&&statusId!="12"&&$(".PmdRemarks").hide();ApprovalStatuscolmodels=[{name:"FromStageName",label:"From Stage",resizable:!0,ignoreCase:!0},{name:"FromStage",label:"FromStageId",resizable:!0,ignoreCase:!0,hidden:!0},{name:"ToStageName",label:"To Stage",resizable:!0,ignoreCase:!0},{name:"ToStage",label:"ToStageId",resizable:!0,ignoreCase:!0,hidden:!0},{name:"Remarks",label:"Remarks",resizable:!0,ignoreCase:!0},{name:"RemarksBy",label:"Remarks By",resizable:!0,ignoreCase:!0},{name:"Date",label:"Submitted Date",resizable:!0,ignoreCase:!0,formatter:function(n){return showDate(n)}},];$("#remarks_grid").jqGrid({url:"",datatype:"local",data:JsonFormReformulationStagesData.ApprovalStages,mtype:"GET",colModel:ApprovalStatuscolmodels,loadonce:!0,scroll:1,gridComplete:function(){var t=$("#prd_desc tbody tr"),r=$("#prd_desc tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){var n=$(".ui-jqgrid-bdiv").find("tbody").height();n>90?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".tableremarks").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".tableremarks").find(".ui-jqgrid-hbox").css("padding-right","0px"))},200)});jQuery("#remarks_grid").jqGrid("filterToolbar",{stringResult:!0,searchOnEnter:!1,defaultSearch:"cn"});var DivId=$("#Division").val(),categoryId=$("#Category").val(),link="";link=(statusId=="1"||statusId=="8"||statusId=="9"||statusId=="11")&&$("#ViewStatus").val()!="View"?ROOT+"NewInitiation/GetCategory":ROOT+"User/GetCategoryBYId";$.ajax({type:"POST",url:link,data:{divisionId:DivId},dataType:"json",success:function(n){if(n!=null){$("option").remove(".CategoryOption");var t="";$.each(n,function(i,r){var u=n;(statusId=="1"||statusId=="8"||statusId=="9"||statusId=="11")&&$("#ViewStatus").val()!="View"?(t=r.CategoryId==categoryId?'<option class="CategoryOption" selected value="'+r.CategoryId+'">'+r.CategoryName+"<\/option>":'<option class="CategoryOption" value="'+r.CategoryId+'">'+r.CategoryName+"<\/option>",$(".addCategoryOption").append(t)):(statusId=="1"||statusId=="8"||statusId=="9"||statusId=="11")&&$("#ViewStatus").val()=="View"?(t=r.CategoryID==categoryId?'<option class="CategoryOption" selected value="'+r.CategoryId+'">'+r.CategoryName+"<\/option>":'<option class="CategoryOption" value="'+r.CategoryId+'">'+r.CategoryName+"<\/option>",$(".addCategoryOption").append(t)):(t=r.CategoryID==categoryId?'<option class="CategoryOption" selected value="'+r.CategoryID+'">'+r.CategoryName+"<\/option>":'<option class="CategoryOption" value="'+r.CategoryID+'">'+r.CategoryName+"<\/option>",$(".addCategoryOption").append(t))})}},error:function(){alert("Error occured!!")}});colmodels=[{name:"Action",label:"Action",width:90,resizable:!0,ignoreCase:!0,formatter:function(n,t){return'<div class="text-center icon_section align-items-left"><a onclick=onEditProductDescription('+t.rowId+') class= "icon_color btn_button edit" title = "Edit" id = "edit_info" ><i class="fa fa-edit mr-2" title="Edit" aria-hidden="true"><\/i><span class="sr-only">Edit<\/span><\/a ><a onclick=onDeleteProductDescription('+t.rowId+') class="icon_color btn_button" title="Delete"><i class="fa fa-trash" title="Delete" aria-hidden="true"><\/i><span class="sr-only">Delete<\/span><\/a><\/div> '}},{name:"ExistingName",label:"Brand Name",resizable:!0,ignoreCase:!0},{name:"NewBrandName",label:"New Brand Name",resizable:!0,ignoreCase:!0},{name:"SKU",label:"SKU",resizable:!0,ignoreCase:!0},];$("#prd_desc").jqGrid({url:"",datatype:"local",data:ReformulationJQgrid.ReformulationProductDetails,mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,pager:"#pager_moulds",rowNum:20,scroll:1,gridComplete:function(){var t=$("#prd_desc tbody tr"),r=$("#prd_desc tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"));(statusId=="2"||statusId=="3"||statusId=="7"||statusId=="13")&&jQuery("#prd_desc").jqGrid("hideCol","Action");$("#ViewStatus").val()=="View"&&jQuery("#prd_desc").jqGrid("hideCol","Action")}});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"5vh"});$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"));var RowIdProductDescription=0,ProductDescriptionEditRowId=0,isvalid=!0,noDuplicate=!0;$("#ProductDescriptionExistingName").change(function(){var n;if(ProductDescriptionEditRowId>0){n=$("#prd_desc").jqGrid("getCol","ExistingName");const t=n.map(n=>n.toLowerCase());t.includes($(this).val().trim().toLowerCase())&&editedProductName!=$(this).val().trim().toLowerCase()?(noDuplicate=!1,$("#nameAlreadyExists_Err").show()):(noDuplicate=!0,$("#nameAlreadyExists_Err").hide())}else{n=$("#prd_desc").jqGrid("getCol","ExistingName");const t=n.map(n=>n.toLowerCase());t.includes($(this).val().trim().toLowerCase())&&editedProductName!=$(this).val().trim().toLowerCase()?(noDuplicate=!1,$("#nameAlreadyExists_Err").show()):(noDuplicate=!0,$("#nameAlreadyExists_Err").hide())}});$("#ProductDescriptionAdd").click(function(){var r,t,u,f,e,o,i,n;if($.each($(".ProductDescription"),function(){var i;$.trim($(this).val())===""||$.trim($(this).val())===null?($(this).parents(".form-group").find(".Err-ProductDescription").show(),isvalid=!1):$(this).parents(".form-group").find(".Err-ProductDescription").hide();var r=$("#SKUDetails").val().replace(/(^,|,$)/g,"").replace(/,,+/g,",").trim(),u=r.split(/\s*,\s*/),n=[],t={};u.forEach(function(i){var r=i.toLowerCase().replace(/\s+/g,"");t[r]||(t[r]=!0,n.push(i))});i=n.join(",").replace(/(^,|,$)/g,"").replace(/,,+/g,",");SKU=i;SKU==""?($("#Err-ProductDescription-sku").show(),isvalid=!1):$("#Err-ProductDescription").hide()}),r={},t=$.trim($("#ProductDescriptionExistingName").val()),isvalid&&noDuplicate){if($("#Err-ProductDescription").hide(),u=[],r={ExistingName:$.trim($("#ProductDescriptionExistingName").val()),NewBrandName:$("#ProductDescriptionNewBrandName").val(),SKU:SKU},ProductDescriptionEditRowId==0)u.push(r),f=$("#prd_desc").jqGrid("getGridParam","data"),e=$.merge(f,u),$("#prd_desc").jqGrid("setGridParam",{data:e}),$("#prd_desc").trigger("reloadGrid",[{page:1}]);else{if(o=jQuery("#prd_desc").jqGrid("getRowData",ProductDescriptionEditRowId),i=o.ExistingName,t!=i){var s=packagingProfileData_1,h=$("#business_info").jqGrid("getGridParam","data"),c=$("#Table_Sustainability").jqGrid("getGridParam","data");$.each(s,function(n,r){r!=undefined&&r.Product==i&&(packagingProfileData_1[n].Product=t,$("#PP_Table_"+n+" span.expectedProduct").text(t))});$.each(h,function(n,r){r.Product==i&&$("#business_info").jqGrid("setCell",n+1,"Product",t)});$.each(c,function(n,r){r.Product==i&&$("#Table_Sustainability").jqGrid("setCell",n+1,"Product",t)})}$("#prd_desc").jqGrid("setRowData",ProductDescriptionEditRowId,r);$("#prd_desc").trigger("reloadGrid",[{page:1}]);ProductDescriptionEditRowId=0}productDescriptionProductNameList=jQuery("#prd_desc").jqGrid("getCol","ExistingName");packagingProfileProductNameList=$("#expected").jqGrid("getCol","Product");packagingProfileProductNameList=productDescriptionProductNameList.slice(0);businessInfoProductNameList=$("#business_info").jqGrid("getCol","Product");businessInfoProductNameList=productDescriptionProductNameList.slice(0);sustainabilityProductNameList=$("#Table_Sustainability").jqGrid("getCol","Product");sustainabilityProductNameList=$.grep(productDescriptionProductNameList,function(n){return $.inArray(n,sustainabilityProductNameList)==-1});$("option").remove("#PackagingProfileProduct .ProductOption");packagingProfileProductNameList.length>0&&(n="",$.each(packagingProfileProductNameList,function(t,i){i!=""&&(n+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#PackagingProfileProduct").append(n));$("option").remove("#BusinessInformationProductName .ProductOption");businessInfoProductNameList.length>0&&(n="",$.each(businessInfoProductNameList,function(t,i){i!=""&&(n+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#BusinessInformationProductName").append(n));$("option").remove("#SUS_Product .ProductOption");sustainabilityProductNameList.length>0&&(n="",$.each(sustainabilityProductNameList,function(t,i){i!=""&&(n+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#SUS_Product").append(n));$(".ProductDesctipitonEmpty").val("");$("#BusinessInformationSKU").empty();$("#BusinessInformationSKU").append('<option value="">--Select--<\/option>');$("#PackagingProfileSKU").empty();$("#PackagingProfileSKU").multiselect("rebuild")}isvalid=!0});editedProductName="";$(document).ready(function(){var n;ReformulationJQgrid.ReformulationPackagingProfile.length<=0?($("#PackagingProfile").hide(),$("#PackagingProfileGrid").hide()):($("#PackagingProfile").show(),$("#PackagingProfileGrid").show());statusId>1?$("#PackagingProfile").hide():$("#PackagingProfile").show();ReformulationJQgrid.ReformulationProductDetails.length!=0&&(n="",$("option").remove(".ProductOption"),$.each(ReformulationJQgrid.ReformulationProductDetails,function(t,i){n+='<option class="ProductOption" value="'+i.ExistingName+'">'+i.ExistingName+"<\/option>"}),productDescriptionProductNameList=jQuery("#prd_desc").jqGrid("getCol","ExistingName"),businessInfoProductNameList=$("#business_info").jqGrid("getCol","Product"),businessInfoProductNameList=productDescriptionProductNameList.slice(0),packagingProfileProductNameList=$("#expected").jqGrid("getCol","Product"),packagingProfileProductNameList=productDescriptionProductNameList.slice(0),sustainabilityProductNameList=$("#Table_Sustainability").jqGrid("getCol","Product"),sustainabilityProductNameList=$.grep(productDescriptionProductNameList,function(n){return $.inArray(n,sustainabilityProductNameList)==-1}),hgmlDataProductNameList=$("#HGML_Data").jqGrid("getCol","ProductName"),hgmlDataProductNameList=productDescriptionProductNameList.slice(0),(statusId=="4"||statusId=="14")&&(hgmlDataProductNameList=[],hgmlDataProductNameList=$("#HGML_Data").jqGrid("getCol","HgmlData_ProductNameApprovePage"),hgmlDataProductNameList=productDescriptionProductNameList.slice(0)),(statusId=="5"||statusId=="16"||statusId=="6"||statusId=="12")&&(pmdDataProductNameList=$("#PMD_Data").jqGrid("getCol","ProductName"),pmdDataProductNameList=productDescriptionProductNameList.slice(0)),businessInfoProductNameList.length>0&&(n="",$("option").remove("#BusinessInformationProductName .ProductOption"),$.each(businessInfoProductNameList,function(t,i){i!=""&&(n+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#BusinessInformationProductName").append(n)),packagingProfileProductNameList.length>0&&(n="",$("option").remove("#PackagingProfileProduct .ProductOption"),$.each(packagingProfileProductNameList,function(t,i){i!=""&&(n+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#PackagingProfileProduct").append(n)),sustainabilityProductNameList.length>0&&(n="",$("option").remove("SUS_Product .ProductOption"),$.each(sustainabilityProductNameList,function(t,i){i!=""&&(n+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#SUS_Product").append(n)),statusId=="4"||statusId=="14"?hgmlDataProductNameList.length>0&&(n="",$("option").remove("#HgmlData_ProductNameApprovePage .ProductOption"),$.each(hgmlDataProductNameList,function(t,i){i!=""&&(n+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#HgmlData_ProductNameApprovePage").append(n)):hgmlDataProductNameList.length>0&&(n="",$("option").remove("#HgmlData_ProductName .ProductOption"),$.each(hgmlDataProductNameList,function(t,i){i!=""&&(n+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#HgmlData_ProductName").append(n)),pmdDataProductNameList.length>0&&(n="",$("option").remove("#PmdProductName .ProductOption"),$.each(pmdDataProductNameList,function(t,i){i!=""&&(n+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#PmdProductName").append(n)),productDescriptionProductNameList.length>0&&(n="",$("option").remove("#TargetCostProductName .ProductOption"),$.each(productDescriptionProductNameList,function(t,i){i!=""&&(n+='<option class="ProductOption" value="'+i+'">'+i+"<\/option>")}),$("#TargetCostProductName").append(n)))});$("#BusinessInformationSellingPrice, #BusinessInformationY2").change(function(){if($("#BI_BusinessValue").val(""),$("#BusinessInformationSellingPrice").val()!=""&&$("#BusinessInformationY2").val()!=""){var n=$("#BusinessInformationSellingPrice").val()*$("#BusinessInformationY2").val();const t=n.toLocaleString("en-US",{maximumFractionDigits:0});$("#BusinessInformationBusinessValue").val(t)}});$("#Radio1").click(function(){$("#PackagingProfile").show();$("#PackagingProfileGrid").show();$(".PackagingProfileHeadingName").hide()});$("#Radio2").click(function(){$("#PackagingProfile").hide();$("#PackagingProfileGrid").hide()});var RowIdBusinessInformation=0,EditRowIdBusinessInformation=0,isvalid=!0,isEditBI=!1,BIEditedSKU="";$("#BusinessInformationAdd").click(function(){var n=!0,i,it,h,t,r,u,f,v,y,p,e,o,s,b,d,l,a,k,w,g,nt,c,tt;if($.each($(".BusinessInformationManditoryField"),function(){$.trim($(this).val())===""||$.trim($(this).val())===null?($(this).parents(".form-group").find(".Err-BusinessInformation").show(),n=!1):$(this).parents(".form-group").find(".Err-BusinessInformation").hide()}),t=$("#BusinessInformationExpectedGP").val(),i=$("#BusinessInformationSellingPrice").val(),r=$("#BusinessInformationM1").val(),u=$("#BusinessInformationM2").val(),f=$("#BusinessInformationM3").val(),v=$("#BusinessInformationM4").val(),y=$("#BusinessInformationM5").val(),p=$("#BusinessInformationM6").val(),e=$("#BusinessInformationY1").val(),o=$("#BusinessInformationY2").val(),s=$("#BusinessInformationY3").val(),h=$("#BusinessInformationProposedTP").val(),MRP=$("#BusinessInformationProposedMRP").val(),it=$("#BusinessInformationCurrency").val(),c=$("#BusinessInformationLaunchDate").val(),b=new Date(c),b=c,t=parseFloat(t.replace(/,/g,"")),t<1||t>100?($("#Error_Range_ExpectedGP").show(),flag=!1):$("#Error_Range_ExpectedGP").hide(),h!=""&&i!=""&&r!=""&&u!=""&&f!=""&&e!=""&&o!=""&&s!=""&&i!=""&&MRP!=""?(h=parseFloat(h.replace(/,/g,"")),i=parseFloat(i.replace(/,/g,"")),r=parseFloat(r.replace(/,/g,"")),u=parseFloat(u.replace(/,/g,"")),f=parseFloat(f.replace(/,/g,"")),v=parseFloat(v.replace(/,/g,"")),y=parseFloat(y.replace(/,/g,"")),p=parseFloat(p.replace(/,/g,"")),e=parseFloat(e.replace(/,/g,"")),o=parseFloat(o.replace(/,/g,"")),s=parseFloat(s.replace(/,/g,"")),(isNaN(r)||isNaN(u)||isNaN(f)||isNaN(e)||isNaN(o)||isNaN(s)||isNaN(h)||isNaN(t)||isNaN(i)||isNaN(MRP))&&(n=!1,isNaN(r)?$("#Err-NAN-M1").show():$("#Err-NAN-M1").hide(),isNaN(u)?$("#Err-NAN-M2").show():$("#Err-NAN-M2").hide(),isNaN(f)?$("#Err-NAN-M3").show():$("#Err-NAN-M3").hide(),isNaN(e)?$("#Err-NAN-Y1").show():$("#Err-NAN-Y1").hide(),isNaN(o)?$("#Err-NAN-Y2").show():$("#Err-NAN-Y2").hide(),isNaN(s)?$("#Err-NAN-Y3").show():$("#Err-NAN-Y3").hide(),isNaN(h)?$("#Err-NAN-TP").show():$("#Err-NAN-TP").hide(),isNaN(t)?$("#Err-NAN-GP").show():$("#Err-NAN-GP").hide(),isNaN(i)?$("#Err-NAN-SP").show():$("#Err-NAN-SP").hide(),isNaN(MRP)?$("#Err-NAN-MRP").show():$("#Err-NAN-MRP").hide())):(h===0||t===0||i===0||r===0||u===0||f===0||e===0||o===0||s===0)&&(r==0?($("#Err-Zero-M1").show(),n=!1):$("#Err-Zero-M1").hide(),u==0?($("#Err-Zero-M2").show(),n=!1):$("#Err-Zero-M2").hide(),f==0?($("#Err-Zero-M3").show(),n=!1):$("#Err-Zero-M3").hide(),e==0?($("#Err-Zero-Y1").show(),n=!1):$("#Err-Zero-Y1").hide(),o==0?($("#Err-Zero-Y2").show(),n=!1):$("#Err-Zero-Y2").hide(),s==0?($("#Err-Zero-Y3").show(),n=!1):$("#Err-Zero-Y3").hide(),i==0?($("#Err-Zero-SP").show(),n=!1):$("#Err-Zero-SP").hide()),d=$("#BusinessInformationBusinessValue").val(),e<r+u+f+(isNaN(v)?0:v)+(isNaN(y)?0:y)+(isNaN(p)?0:p)?($("#Y1Less").show(),n=!1):$("#Y1Less").hide(),t<1||t>100?($("#Error_Range_ExpectedGP").show(),n=!1):$("#Error_Range_ExpectedGP").hide(),l=$("#BusinessInformationUOM").val(),l!="")for(a=0;a<l.length;a++)if(l.charCodeAt(a)>=65&&l.charCodeAt(a)<=90||l.charCodeAt(a)>=97&&l.charCodeAt(a)<=122)continue;else{n=!1;$(".UomErr").show();break}EditRowIdBusinessInformation==0&&$(".Error_BI_Product").text()!=""?n=!1:"";n&&($("#err-business_info").hide(),k=[],w={},$("#Err-NAN-GP").hide(),$("#Err-NAN-BV").hide(),$("#Err-NAN-TP").hide(),$("#Err-NAN-MRP").hide(),$("#Err-NAN-M1").hide(),$("#Err-NAN-M2").hide(),$("#Err-NAN-M3").hide(),$("#Err-NAN-Y1").hide(),$("#Err-NAN-Y2").hide(),$("#Err-NAN-Y3").hide(),w={Product:$("#BusinessInformationProductName").val(),SKU:$("#BusinessInformationSKU").val(),ProposedName:$("#BusinessInformationProposedNamesOfProduct").val(),ProposeLaunchDate:b,ProposedSellingPrice:$("#BusinessInformationSellingPrice").val(),ProposedTP:$("#BusinessInformationProposedTP").val(),ProposedMRP:$("#BusinessInformationProposedMRP").val(),ExpectedGP:$("#BusinessInformationExpectedGP").val(),BusinessValue:d,M1Quantity:$("#BusinessInformationM1").val(),M2Quantity:$("#BusinessInformationM2").val(),M3Quantity:$("#BusinessInformationM3").val(),M4Quantity:$("#BusinessInformationM4").val(),M5Quantity:$("#BusinessInformationM5").val(),M6Quantity:$("#BusinessInformationM6").val(),Y1Quantity:$("#BusinessInformationY1").val(),Y2Quantity:$("#BusinessInformationY2").val(),Y3Quantity:$("#BusinessInformationY3").val(),RevisionInPackagingFormat:$("input[type=radio][name=survey]:checked").val(),UOM:$("#BusinessInformationUOM").val(),Currency:$("#BusinessInformationCurrency").val()},EditRowIdBusinessInformation==0?(k.push(w),g=$("#business_info").jqGrid("getGridParam","data"),nt=$.merge(g,k),$("#business_info").jqGrid("setGridParam",{data:nt}),$("#business_info").trigger("reloadGrid",[{page:1}])):($("#business_info").jqGrid("setRowData",EditRowIdBusinessInformation,w),$("#business_info").trigger("reloadGrid",[{page:1}]),EditRowIdBusinessInformation=0),$(".BusinessInformationManditoryField").val(""),$("#BusinessInformationM4").val(""),$("#BusinessInformationM5").val(""),$("#BusinessInformationM6").val(""),$(".BusinessInformationProposedNamesOfProduct").val(""),c=new Date,tt=new Date(c.getFullYear(),c.getMonth(),c.getDate()),$(".data-datepicker").datepicker("setDate",tt),$("#BusinessInformationLaunchDate").val(""),$("#BusinessInformationSKU .skuOption").remove(),$("#BusinessInformationSKU .options").remove());n=!0;isEditBI=!1});$("#ProjectDetailsBusinessRational").keyup(function(){$("#ProjectDetailsBusinessRational").val()==""?$("#Err-ProjectDetails-BusinessRational").show():$("#Err-ProjectDetails-BusinessRational").hide()});$("#BusinessInformationSKU").change(function(){var i=$("#BusinessInformationProductName").val(),r=$("#BusinessInformationSKU").val(),t=$("#business_info").jqGrid("getGridParam","data"),n;if(isEditBI)for(n=0;n<t.length;n++)if(t[n].Product==i&&t[n].SKU==r&&t[n].SKU!=BIEditedSKU){$(".Err-BIcombination").show();$("#BusinessInformationAdd").prop("disabled",!0);break}else $(".Err-BIcombination").hide(),$("#BusinessInformationAdd").prop("disabled",!1);else for(n=0;n<t.length;n++)if(t[n].Product==i&&t[n].SKU==r){$(".Err-BIcombination").show();$("#BusinessInformationAdd").prop("disabled",!0);break}else $(".Err-BIcombination").hide(),$("#BusinessInformationAdd").prop("disabled",!1)});$("#image_upload").change(function(){$("#Display_PackageImagesUpload").empty()});BenchMarkSampleImage=$("#BenchMarkSampleImage").val();$("#ImageName").text($("#BenchMarkSampleImage").val());$("#ImageName").text()!=""?$("#delete_icon_Benchmark_Samples_Image").show():$("#delete_icon_Benchmark_Samples_Image").hide();BenchMarkSampleImage!=""&&$("#ProjectDetailsBenchMarkSampleImageDownload").show();$("#ProjectDetailsBenchMarkSampleImageDownload").click(function(){return ProjectDetailsBenchMarkSampleImage=$("#BenchMarkSampleImage").val(),ProjectDetailsBenchMarkSampleImage=ProjectDetailsBenchMarkSampleImage.replaceAll('"',""),ProjectDetailsBenchMarkSampleImage=ProjectDetailsBenchMarkSampleImage.replaceAll('"',""),ProjectDetailsBenchMarkSampleImage=ProjectDetailsBenchMarkSampleImage.replaceAll("/",""),ProjectDetailsBenchMarkSampleImage.length>0?($("#ProjectDetailsBenchMarkSampleImageDownload").prop("href",ROOT+"NewInitiation/DownloadImageFile?fileName="+ProjectDetailsBenchMarkSampleImage),!0):void 0});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"5vh"});$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"));colmodels=[{name:"Action",label:"Action",width:90,resizable:!0,ignoreCase:!0,formatter:function(n,t){return'<div class="text-center icon_section align-items-left"><a onclick=onEditPackagingProfile('+t.rowId+') class= "icon_color btn_button edit" title = "Edit" id = "edit_info" ><i class="fa fa-edit mr-2" title="Edit" aria-hidden="true"><\/i><span class="sr-only">Edit<\/span><\/a ><a onclick=onDeletePackagingProfile('+t.rowId+') class="icon_color btn_button" title="Delete"><i class="fa fa-trash" title="Delete" aria-hidden="true"><\/i><span class="sr-only">Delete<\/span><\/a><\/div> '}},{name:"Product",label:"Product",resizable:!0,ignoreCase:!0},{name:"SKU",label:"SKU",resizable:!0,ignoreCase:!0},{name:"PrimaryPackaging",label:"Primary Packaging",resizable:!0,ignoreCase:!0},{name:"SecondaryPackaging",label:"Secondary Packaging",resizable:!0,ignoreCase:!0},{name:"TertiaryPackaging",label:"Tertiary Packaging",resizable:!0,ignoreCase:!0},{name:"BenchmarkProducts",label:"Benchmark Products",resizable:!0,ignoreCase:!0},{name:"DesiredPackagingCharacters",label:"Desired Packaging Characteristics",resizable:!0,ignoreCase:!0},{name:"Others",label:"Others (If any)",resizable:!0,ignoreCase:!0},{name:"Mould",label:"Mold",resizable:!0,ignoreCase:!0},{name:"ImagesUploadDownload",label:"Images",resizable:!0,ignoreCase:!0,formatter:function(n,t,i){return statusId=="1"||statusId=="8"||statusId=="9"?`<div class="text-center icon_section align-items-left">`+(i.PackagingProfileImage==undefined||i.PackagingProfileImage==""||i.PackagingProfileImage==null?`<i></i>`:`<a onclick="DownloadPackageImage(`+t.rowId+`)" class="icon_color btn_button" title="Download" id="`+t.rowId+`DownloadPackageImagesUpload"><i class="fa fa-download mr-2" title="Download"></i></a>`+`<a class="icon_color btn_button" title="View" id="'`+t.rowId+'" href="'+ROOT+"NPDImages/"+i.PackagingProfileImage+`" target="_blank" ><i class="fa fa-eye mr-2" title="View"></i></a>`+`<a onclick='onDeleteImage("expected","`+i.PackagingProfileImage+`","`+t.rowId+`")' class="icon_color btn_button" title = "Delete" > <i class="fa fa-trash" title="Delete"></i></a >`)+`</div> `:`<div class="text-center icon_section align-items-left">`+(i.PackagingProfileImage==undefined||i.PackagingProfileImage==""||i.PackagingProfileImage==null?`<i></i>`:`<a onclick="DownloadPackageImage(`+t.rowId+`)" class="icon_color btn_button" title="Download" id="`+t.rowId+`DownloadPackageImagesUpload"><i class="fa fa-download mr-2" title="Download"></i></a>`+`<a class="icon_color btn_button" title="View" id="'`+t.rowId+'" href="'+ROOT+"NPDImages/"+i.PackagingProfileImage+`" target="_blank" ><i class="fa fa-eye mr-2" title="View"></i></a>`)+`</div> `}},{name:"PackagingProfileImage",label:"Images Hide",resizable:!0,ignoreCase:!0,hidden:!0},];$("#expected").jqGrid({url:"",datatype:"local",data:ReformulationJQgrid.ReformulationPackagingProfile,mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,pager:"#pager_expected",rowNum:20,scroll:1,gridComplete:function(){var t=$("#expected tbody tr"),r=$("#expected tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"));(statusId=="2"||statusId=="3"||statusId=="7"||statusId=="5"||statusId=="16"||statusId=="4"||statusId=="6"||statusId=="12"||statusId=="13"||statusId=="14")&&jQuery("#expected").jqGrid("hideCol","Action");$("#ViewStatus").val()=="View"&&jQuery("#expected").jqGrid("hideCol","Action")}});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"5vh"});$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"));var RowIdPackagingProfile=0,EditRowIdPackagingProfile=-1,isvalid=!0,isEditPP=!1,PPEditedSKU="";$("#PackagingProfileAddold").click(function(){var t,n,i,r;$(".Err-PPNoMoreSKU").hide();$("#PackagingProfileProduct").val()===""||$("#PackagingProfileSKU").val().toString()===""||$("#PackagingProfilePrimaryPackaging").val()===""?($("#PackagingProfileProduct").val()===""?(isvalid=!1,$(".Err-PackagingProfileProduct").show()):(isvalid=!0,$(".Err-PackagingProfileProduct").hide()),$("#PackagingProfileSKU").val().toString()===""?(isvalid=!1,$(".Err-PackagingProfileSKU").show()):(isvalid=!0,$(".Err-PackagingProfileSKU").hide()),$("#PackagingProfilePrimaryPackaging").val()===""?(isvalid=!1,$(".Err-PackagingProfilePrimaryPackaging").show()):(isvalid=!0,$(".Err-PackagingProfileProduct").hide())):(isvalid=!0,$(".Err-PackagingProfileProduct").hide(),$(".Err-PackagingProfileSKU").hide(),$(".Err-PackagingProfilePrimaryPackaging").hide());image=SavePackageImageFile();image=image.replaceAll('"',"");image==""?image=PackageImageFileName:PackageImageFileName;EditRowIdPackagingProfile==0&&$(".Error_PP_Product").text()!=""?isvalid=!1:"";isvalid&&($("#err-expected").hide(),$("#Err-PackagingProfileBI").hide(),t=[],n={},n={Product:$.trim($("#PackagingProfileProduct").val()),SKU:$.trim($("#PackagingProfileSKU").val().toString()),PrimaryPackaging:$.trim($("#PackagingProfilePrimaryPackaging").val()),SecondaryPackaging:$.trim($("#PackagingProfileSecondaryPackaging").val()),TertiaryPackaging:$.trim($("#PackagingProfileTertiaryPackaging").val()),BenchmarkProducts:$.trim($("#PackagingProfileBenchMarkProduct").val()),DesiredPackagingCharacters:$.trim($("#PackagingProfileDesiredPackagingCharacters").val()),Others:$.trim($("#PackagingProfileOthers").val()),Mould:$.trim($("#PackagingProfileMould").val()),PackagingProfileImage:image},isvalid=!0,EditRowIdPackagingProfile==0?(t.push(n),i=$("#expected").jqGrid("getGridParam","data"),r=$.merge(i,t),$("#expected").jqGrid("setGridParam",{data:r}),$("#expected").trigger("reloadGrid",[{page:1}])):($.each(n,function(n,t){$("#expected").trigger("reloadGrid",[{page:1}]);$("#expected").jqGrid("setCell",EditRowIdPackagingProfile,n,t);$("#expected").trigger("reloadGrid",[{page:1}])}),EditRowIdPackagingProfile=0),$(".PackagingProfileEmpty").val(""),$(".PackagingProfileEmptyImage").text(""),$(".Toremove").val(""),$("#PackagingProfileSKU").val("").multiselect("refresh"),$("#PackagingProfileSKU").empty(),$("#PackagingProfileSKU").multiselect("rebuild"),$("#expected").trigger("reloadGrid",[{page:1}]),isEditPP=!1)});$("#PackagingProfileProduct").change(function(){var r,u,t,i,f,n,o,s,e;if($("#PackagingProfileSKU").empty(),$("#PackagingProfileSKU").multiselect("rebuild"),r=$("#PackagingProfileProduct").val(),$(".Error_PP_Product").hide().text(""),u=[],t=packagingProfileData_1.filter(n=>n.length!==0),r!=""){if(isEdited==0){if(t.length>0)for(n=0;n<t.length;n++)if(t[n].Product==r){i=t[n].SKU.toString().split(",");for(let n=0;n<i.length;n++)u.push(i[n])}}else if(t.length>0)for(n=0;n<t.length;n++)if(editedRowdata[0]!==t[n]&&t[n].Product==r){i=t[n].SKU.toString().split(",");for(let n=0;n<i.length;n++)u.push(i[n])}for(f=$("#prd_desc").jqGrid("getGridParam","data"),n=0;n<f.length;n++)if(f[n].ExistingName==r){o=f[n].SKU;s=o.split(",");result=$.grep(s,function(n){return $.inArray(n,u)===-1});result.length>0?($(".Err-PPNoMoreSKU").hide(),e="",$.each(result,function(n,t){(t!=""||t!=null||t!=undefined)&&(e+='<option value="'+t+'">'+t+"<\/option>")}),$("#PackagingProfileSKU").html(e),$("#PackagingProfileSKU").multiselect("rebuild")):$(".Err-PPNoMoreSKU").show();break}}});$("#BusinessInformationProductName").change(function(){var i,t,n;if($("option").remove("#BusinessInformationSKU .skuOption"),i=$("#BusinessInformationProductName").val(),$(".Error_BI_Product").hide().text(""),$("option").remove("#BusinessInformationSKU .options"),$("option").remove("#BusinessInformationSKU .skuOption"),i!="")for(t=$("#prd_desc").jqGrid("getGridParam","data"),n=0;n<t.length;n++)if(t[n].ExistingName==i){var u=t[n].SKU,f=u.split(","),r="";$.each(f,function(n,t){(t!=""||t!=null||t!=undefined)&&(r+='<option class="skuOption" value="'+t+'">'+t+"<\/option>")});$("#BusinessInformationSKU").append(r);break}});$("#HgmlData_ProductName").change(function(){var n=$("#HgmlData_ProductName").val();$(".Error_Hgml_Product").hide().text("");const t=$("#HGML_Data").jqGrid("getCol","ProductName");n!=""&&(t.includes(n)?$(".Error_Hgml_Product").show().text("This Product already consists the definition, Please select the different Product"):"")});$("#HgmlData_ProductNameApprovePage").change(function(){var n=$("#HgmlData_ProductNameApprovePage").val();$(".Error_HgmlApprove_Product").hide().text("");const t=$("#HGML_Data").jqGrid("getCol","ProductName");n!=""&&(t.includes(n)?$(".Error_HgmlApprove_Product").show().text("This Product already consists the definition, Please select the different Product"):"")});$("#PmdProductName").change(function(){var n=$("#PmdProductName").val();$(".Error_PMD_Product").hide().text("");const t=$("#PMD_Data").jqGrid("getCol","ProductName");n!=""&&(t.includes(n)?$(".Error_PMD_Product").show().text("This Product already consists the definition, Please select the different Product"):"")});$("#HgmlData_HubDropdown").change(function(){var n=$("#HgmlData_HubDropdown").val().toString();$.ajax({type:"POST",url:ROOT+"Base/GetUserEmailBasedOnHub",data:{hubIds:n},dataType:"json",success:function(n){if(n!=null){$("option").remove(".HubUsersOption");var t="";$.each(n,function(n,i){t+='<option class="HubUsersOption '+i.Hub+'" value="'+i.HgmlDataHubUsersList+'">'+i.Hub+" - "+i.HgmlDataHubUsersList+"<\/option>"});$("#HgmlData_HubUsersDropdown").html(t);$("#HgmlData_HubUsersDropdown").multiselect("rebuild")}},error:function(){alert("Error occured!!")}})});$(document).ready(function(){$(".example-dropUp").multiselect({enableFiltering:!0,includeSelectAllOption:!0,enableCaseInsensitiveFiltering:!0,maxHeight:500,buttonWidth:"100%",dropUp:!0});$(".example-dropUp2").multiselect({enableFiltering:!0,enableCaseInsensitiveFiltering:!0,maxHeight:500,buttonWidth:"100%",dropUp:!0})});$("#HgmlData_SendToHub_Yes").hide();$("#HgmlData_SendToHub_No").hide();$(".HgmlDataSendToHubConfirmation").change(function(){var t,n,i;if($("#Error_DoYouWantSentToHUB").hide(),t=$(".HgmlDataSendToHubConfirmation").val(),t=="Yes")$("#HgmlData_SendToHub_Yes").show(),$("#HgmlData_SendToHub_No").hide(),$("#Button_SendToHub").show(),$("#Button_SendToPmd").hide();else if(t=="No")for($("#HgmlData_SendToHub_Yes").hide(),$("#HgmlData_SendToHub_No").show(),$(".hgmldatagrid").show(),$("#Button_SendToHub").hide(),n=0;n<JsonFormReformulationStagesData.ApprovalStages.length;n++)if(i=JsonFormReformulationStagesData.ApprovalStages[n].FromStage,i==16){$("#Button_SendToUnderExploration").show();break}else $("#Button_SendToPmd").show();else $("#HgmlData_SendToHub_Yes").hide(),$("#HgmlData_SendToHub_No").hide()});statusId=="1"&&(textNode=document.createTextNode("Reformulation-"+statusName),subHeadElement=document.createElement("span"),subHeadElement.className="sub_head",subHeadElement.innerHTML="<br>(<strong>Note:<\/strong> The Project Brief information will be auto-saved every 5 minutes. Please ensure that Project Name is entered to auto-save the data.)",parentElement=document.getElementById("statusHeader"),parentElement.appendChild(textNode),parentElement.appendChild(subHeadElement),$(".NoEdit").attr("readonly",!1),$(".HgmlRemarks,.hubHidden").hide(),$(".HubReview").hide(),$(".Forhub").hide(),$(".HgmlRemarksButton").hide(),$(".NotInHubReview").hide(),$("#Division,#Category_Reformulation").attr("disabled",!1),$("#business_info").hideCol("ProposedName"),todayDate=new Date,$("#Reformulation_InitiatedDate").text(todayDate.toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})),$("#business_info").jqGrid("clearGridData"),$("#business_info").jqGrid("setGridParam",{data:ReformulationJQgrid.ReformulationBusinessInformation}),$("#business_info").trigger("reloadGrid",[{page:1}]),$(".InitiatorRemarks").show());statusId=="3"&&($("#Page_Heading").text("Reformulation - "+statusName),todayDate=new Date(ReformulationJQgrid.ReformulationTableData[0].InitiatedDate),$(".HideClass").hide(),$(".NoEdit").attr("readonly",!0),$(".HubNoEdit").attr("readonly",!0),$(".NotInHubReview").hide(),$(".HgmlRemarksButton").hide(),$(".BusinessInfo").show(),$(".HideForhub").hide(),$("#PackagingProfileGrid").show(),$(".PackagingProfileHeadingName").show());statusId=="7"&&($(".NoEdit").attr("readonly",!0),$(".HubReview").hide(),$(".HideClass").hide(),$("#business_info").hideCol("ProposedName"),$("#Division,#Category_Reformulation").attr("disabled",!0),todayDate=new Date(ReformulationJQgrid.ReformulationTableData[0].InitiatedDate),$("#Reformulation_InitiatedDate").text(todayDate.toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})));colmodels=[{name:"Action",label:"Action",width:90,resizable:!0,ignoreCase:!0,formatter:function(n,t){return`<div class="text-center icon_section align-items-left">
            <a onclick = onEditHgmlData(`+t.rowId+`) class="icon_color btn_button" title="Edit" id="edit_worksheet"><i class="fa fa-edit mr-2" title="Edit"></i></a>
            <a onclick = onDeleteHgmlData(`+t.rowId+`) class="icon_color btn_button" title="Delete" ><i class="fa fa-trash" title="Delete"></i></a>
        </div>`}},{name:"ProductName",label:"Product Name",resizable:!0,ignoreCase:!0},{name:"ParticipatingMarkets",label:"Participating Markets",resizable:!0,ignoreCase:!0},{name:"ProjectPriority",label:"Project Priority",resizable:!0,ignoreCase:!0},{name:"ProjectCategorization",label:"Project Categorization",resizable:!0,ignoreCase:!0},{name:"Remarks",label:"Remarks",resizable:!0,ignoreCase:!0}];var RowIdHGML=0,EditRowIdHGML=0,isvalid=!0;$("#HGML_Data").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHgmlReviewData.HgmlDataGridList,mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,pager:"#pager_businessinfo",rowNum:20,scroll:!0,gridComplete:function(){var t=$("#HGML_Data tbody tr"),r=$("#HGML_Data tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"));statusId!="2"&&statusId!="4"&&statusId!="13"&&statusId!="14"&&jQuery("#HGML_Data").jqGrid("hideCol","Action");(statusId=="4"||statusId=="14")&&$("#ViewStatus").val()=="View"&&jQuery("#HGML_Data").jqGrid("hideCol","Action");$("#ViewStatus").val()=="View"&&jQuery("#HGML_Data").jqGrid("hideCol","Action")}});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"10vh"});$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"));$("#pager_businessinfo_right .ui-paging-info:nth-child(2)").hide();EditRowId1=0;EditRowId1=0;$("#HgmlData_ParticipatingMarketsApprovePage").keypress(function(){$("#HgmlData_ParticipatingMarketsApprovePage").length==0?$("#Error_HgmlDataParticipatingMarkets").show():$("#Error_HgmlDataParticipatingMarkets").hide()});$("#HgmlData_ProductNameApprovePage").change(function(){$("#HgmlData_ProductNameApprovePage").val()==""?$("#Error_HgmlDataProductNameApprovePage").show():$("#Error_HgmlDataProductNameApprovePage").hide()});$("#HgmlData_ProjectPriorityApprovePage").change(function(){$("#HgmlData_ProjectPriorityApprovePage").val()==""?$("#Error_HgmlDataProjectPriority").show():$("#Error_HgmlDataProjectPriority").hide()});$("#PmdProjectLead").keyup(function(){$("#PmdProjectLead").val()==""?$("#Error_Lead").show():$("#Error_Lead").hide()});$("#PmdProjectLead").val($("#UserName").val());EditRowId1=0;$(".data-datepicker-monthyear").click(function(){$(this).val("")});$("#PmdProductName").change(function(){$(this).val()==""?$(".Error_ProductName").show():$(".Error_ProductName").hide()});$("#PmdProjectCategorization").change(function(){$(this).val()==""?$(".Error_ProjectCategory").show():$(".Error_ProjectCategory").hide()});$("#PmdComplexity").change(function(){$(this).val()==""?$("#Error_PmdComplexity").show():$("#Error_PmdComplexity").hide()});$("#PmdRD").change(function(){$(this).val()==""?$("#Error_PmdRd").show():$("#Error_PmdRd").hide()});$("#PmdDataRemarks").keypress(function(){$(this).length==0?$("#Error_PmdDataRemarks").show():$("#Error_PmdDataRemarks").hide()});$(".downloadReformulationPdf").click(function(){var n=new FormData,t=$("#ProjectId").val(),i=$("#StatusId").val();$.ajax({url:ROOT+"NewInitiation/Header",type:"POST",dataType:"HTML",cache:!1,data:{ProjectId:t,Type:"Reformulation"},success:function(r){$(".Header").html(r);var u=$(".Header").html();n.append("JsonHeaderString",u);$.ajax({url:ROOT+"NewInitiation/ReformulationDraft",type:"POST",dataType:"HTML",cache:!1,data:{ProjectId:t,Type:"Reformulation",Status:i},success:function(i){$(".ReformulationDraft").html(i);var r=$(".ReformulationDraft").html();n.append("JsonString",r);$.ajax({url:ROOT+"NewInitiation/GeneratePdfHtml",type:"POST",dataType:"HTML",data:n,contentType:!1,processData:!1,success:function(){window.location=window.location.origin+ROOT+"NewInitiation/GeneratePdf?ProjectId="+t+"&Type=Reformulation"}})}})}})});$("#PopUp_SendBackToInitiatorRemarks").keyup(function(){$(this).val()===""?$("#Error_SendBackRemarks").show():$("#Error_SendBackRemarks").hide()});$(".HgmlData_HubUsersDropdown").click(function(){$("#Error_HgmlDataHubUsersSelected").hide()});$("#PopUp_SendToHgml").keypress(function(){$(this).length==0?$("#Error_SendToHgml").show():$("#Error_SendToHgml").hide()});$("#HgmlData_HUBParticipatingMarkets").keypress(function(){$(this).length==0?$("#Error_HgmlDataParticipatingMarketsApprovePage").show():$("#Error_HgmlDataParticipatingMarketsApprovePage").hide()});colModel=[{name:"Action",resizable:!0,width:70,label:"Action",ignoreCase:!0,formatter:function(n,t){return`<div class="text-center icon_section align-items-left">
            <a onclick = onDeleteHubApproveData(`+t.rowId+`) class="icon_color btn_button" title="Delete" ><i class="fa fa-trash" title="Delete"></i></a>
        </div>`}},{name:"HubName",resizable:!0,width:70,label:"Hub Name",ignoreCase:!0},{name:"HubUser",resizable:!0,width:80,label:"Hub User",ignoreCase:!0},{name:"Remarks",resizable:!0,width:80,label:"Remarks",ignoreCase:!0},];$("#prd_desc1").jqGrid({url:"",datatype:"local",data:[],colModel:colModel,pager:"#pager_expected1",viewrecords:!0,sortorder:"asec",gridComplete:function(){var t=$("#prd_desc1 tbody tr"),r=$("#prd_desc1 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});$(".ui-jqgrid-bdiv").css({"max-height":"50vh"});$(".ui-jqgrid-bdiv").children("div").css({height:"30vh"});$TableHeight1=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight1>290?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-htable").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-htable").css("padding-right","0px"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"));$("#HgmlData_HubDropdownApprove").change(function(){$("#Error_HgmlDataHubApprove").hide();$("#Error_HgmlDataHubUsersApprove").hide();var n=$("#HgmlData_HubDropdownApprove").val(),t;t=n==""?'<option value="">None Selected<\/option>':'<option value="'+n+'">'+n+"<\/option>";$("#HgmlData_HubUsersDropdownApprove").html(t);$("#HgmlData_HubUsersDropdownApprove").multiselect("rebuild")});$(document).ready(function(){$.ajax({type:"POST",url:ROOT+"NewInitiation/GetHubApprovalData",data:{projectId:ReformulationJQgrid.ReformulationTableData[0].ProjectId},dataType:"json",success:function(n){if(n.ApprovalData!=null){$("option").remove(".HubUsersOption");var t='<option value="">None Selected<\/option>';$.each(n.ApprovalData,function(n,i){t+='<option class="HubUsersOption" value="'+i.HubUser+'">'+i.HubName+"<\/option>"});$("#HgmlData_HubDropdownApprove").html(t);$("#HgmlData_HubDropdownApprove").multiselect("rebuild")}},error:function(){alert("Error occured!!")}})});$("#sendHubHgmlApproveAddbBtn").click(function(){var n=!0,s=$("#prd_desc1").jqGrid("getGridParam","data"),f=$("#HgmlData_HubDropdownApprove").val(),t=$("#HgmlData_HubUsersDropdownApprove").val(),u,e,o;if((f==="None Selected"||t==="")&&(f==="None Selected"?($("#Error_HgmlDataHubApprove").show(),n=!1):$("#Error_HgmlDataHubApprove").hide(),t===""?($("#Error_HgmlDataHubUsersApprove").show(),n=!1):$("#Error_HgmlDataHubUsersApprove").hide()),$.each(s,function(i,r){r.HubUser==t?($("#HubDupErr").show(),n=!1):$("#HubDupErr").hide()}),n){var h=$("#SendHubApproveRemarks").val(),i=$("#HgmlData_HubUsersDropdownApprove option:selected").val(),r=$("#HgmlData_HubDropdownApprove option:selected").text();i===undefined||r===""?(r===""?$("#Error_HgmlDataHubApprove").show():$("#Error_HgmlDataHubApprove").hide(),i===undefined?$("#Error_HgmlDataHubUsersApprove").show():$("#Error_HgmlDataHubUsersApprove").hide()):(u=[],HubData={HubName:r,HubUser:i,Remarks:h},ProductDescriptionEditRowId==0&&(u.push(HubData),e=$("#prd_desc1").jqGrid("getGridParam","data"),o=$.merge(e,u),$("#prd_desc1").jqGrid("setGridParam",{data:o}),$("#prd_desc1").trigger("reloadGrid",[{page:0}])))}$("#HgmlData_HubDropdownApprove").val("").multiselect("refresh");$("#HgmlData_HubUsersDropdownApprove").val("").multiselect("refresh");$("#SendHubApproveRemarks").val("")});statusId=="4"&&$("#HubReviewStatus").show();colmodels=[{name:"Product",label:"Product",width:130,resizable:!0,ignoreCase:!0},{name:"SKU",label:"SKU",width:90,resizable:!0,ignoreCase:!0},{name:"ProposeLaunchDate",label:"Proposed Launch Date",width:130,resizable:!0,ignoreCase:!0},{name:"ProposedSellingPrice",label:"Proposed Selling Price",width:130,resizable:!0,ignoreCase:!0},{name:"ProposedTP",label:"Expected COP",width:130,resizable:!0,ignoreCase:!0},{name:"ProposedMRP",label:"Proposed MRP",width:130,resizable:!0,ignoreCase:!0},{name:"ExpectedGP",label:"Expected GP % ",width:130,resizable:!0,ignoreCase:!0},{name:"Currency",label:"Currency",width:130,resizable:!0,ignoreCase:!0},{name:"BusinessValue",label:'Business Value <span class="Bus_val">(Y2 Quantity * Proposed Selling Price)<\/span>',width:140,resizable:!0,ignoreCase:!0},{name:"M1Quantity",label:"M1 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M2Quantity",label:"M2 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M3Quantity",label:"M3 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M4Quantity",label:"M4 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M5Quantity",label:"M5 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M6Quantity",label:"M6 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"Y1Quantity",label:"Y1 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"Y2Quantity",label:"Y2 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"Y3Quantity",label:"Y3 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"UOM",label:"UOM",width:140,resizable:!0,ignoreCase:!0},];$("#Initiator_BusinessInformation_Popup").jqGrid({url:"",datatype:"local",data:ReformulationJQgrid.ReformulationBusinessInformation,mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,pager:"#pager_businessinfo_popup",rowNum:20,scroll:!0,gridComplete:function(){var t=$("#Initiator_BusinessInformation_Popup tbody tr"),r=$("#Initiator_BusinessInformation_Popup tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"5vh"});$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"));statusId=="5"&&($("#HubBusinessInfoLinks").show(),$(".pmdhgmldataheader").show());date=new Date;today=new Date(date.getFullYear(),date.getMonth(),date.getDate());$(".data-datepicker-monthyear").datepicker({format:"M/yyyy",viewMode:"months",minViewMode:"months",todayHighlight:!0,autoclose:!0,startDate:"+30"});$("#TargetCost").on("cut copy paste",function(n){n.preventDefault()});$("#HgmlData_HubUsersDropdown").change(function(){$("#Error_HgmlDataHubUsers1").hide();$(".HubUsersOption").find("input[type=checkbox]").prop("disabled",!1);var n=$("#HgmlData_HubUsersDropdown").find("option:selected");$.each(n,function(n,t){var i=t.value,r=t.className;$(".HubUsersOption").each(function(){$(this).attr("class").replace(" multiselect-filter-hidden","")==t.className&&$(this).val()!=t.value&&$(this).find("input[type=checkbox]").prop("disabled",!0)})})});$(".HgmlDataSendToHubConfirmation").val(JsonFormReformulationHgmlReviewData.HgmlDataList.length==0?"":JsonFormReformulationHgmlReviewData.HgmlDataList[0].DoYouWantSentToHub);(statusId=="2"||statusId=="13")&&($(".HgmlDataSendToHubConfirmation").val()=="Yes"?($(".HgmlData_HubDropdown").val(JsonFormReformulationHgmlReviewData.HgmlDataList.length==0?"":JsonFormReformulationHgmlReviewData.HgmlDataList[0].Hub),$(".HgmlDataHgmlToHubRemarks").val(JsonFormReformulationHgmlReviewData.HgmlDataList.length==0?"":JsonFormReformulationHgmlReviewData.HgmlDataList[0].HgmlToHubRemarks),$("#HgmlData_SendToHub_Yes").show(),$("#HgmlData_SendToHub_No").hide(),$("#Button_SendToPmd").hide(),$("#HGML_Data").jqGrid("clearGridData")):$(".HgmlDataSendToHubConfirmation").val()=="No"?($("#HgmlData_SendToHub_Yes").hide(),$("#HgmlData_SendToHub_No").show(),$("#Button_SendToHub").hide(),$(".hideHgmlGrid").show()):($("#HgmlData_SendToHub_Yes").hide(),$("#HgmlData_SendToHub_No").hide()));$("#PMDReviewDivision").change(function(){var n=$("#PMDReviewDivision").val().toString();$.ajax({type:"POST",url:ROOT+"NewInitiation/GetUsersBasedOnDevision",data:{divisionId:n},dataType:"json",success:function(n){if(n!=null){var t="";$("option").remove(".HubUserOption");$.each(n,function(n,i){t+='<option class="HUserOption" value="'+i.HubUser+'" selected>'+i.HubName+" - "+i.HubUser+"<\/option>"});$("#PmdReview_SendMail_HubUser_Dropdown").html(t);$("#PmdReview_SendMail_HubUser_Dropdown").multiselect("rebuild")}},error:function(){alert("Error occured!!")}});$("#Error_PmdReview_SendMail_HubUser_Dropdown").text("")});$("#PmdReview_SendMail_Button").click(function(){var n=!0,t=$("#PmdReview_SelectedUsers").val();t==""?($("#Error_PmdReview_SendMail_HubUser_Dropdown").text("Please select users"),n=!1):$("#Error_PmdReview_SendMail_HubUser_Dropdown").text("");n&&(downloaddocfile(),$("#PmdReview_SendMail_Button").prop("disabled",!0),$("#sendMailModal").modal("hide"))});$("#Add_PmdReview_SendMailUser").click(function(){$("#Error_PmdReview_Users").text("");var t=$("#PmdReview_SelectedUsers").val(),u=$("#PmdReview_SendMail_HubUser_Dropdown").val(),i=t.split(","),r=t,f=$.map($.trim(u).split(","),$.trim),i=t.split(",").map(function(n){return $.trim(n)}),n=f.filter(function(n){return!i.includes(n)});n.length>0&&(r=i==""?n:i.concat(n).join(","));n.length<=0&&$("#PmdReview_SelectedUsers").val()!=""?$("#Error_PmdReview_Users").text("User already added"):$("#PmdReview_SendMail_HubUser_Dropdown").val()!=""?($("#PmdReview_SelectedUsers").val(r),$("#Error_PmdReview_SendMail_HubUser_Dropdown").text(""),$("#PmdReview_SendMail_HubUser_Dropdown").val("").multiselect("rebuild")):$("#Error_PmdReview_SendMail_HubUser_Dropdown").text("Please select users")});$("#PmdReview_SendMail_HubUser_Dropdown").change(function(){$("#Error_PmdReview_SendMail_HubUser_Dropdown").text("")});$(window).on("hidden.bs.modal",function(){$(".closeModal").val("");$("#HgmlData_HubDropdownApprove").val("").multiselect("refresh");$("#HgmlData_HubUsersDropdownApprove").val("").multiselect("refresh");$("#PMDReviewDivision").val("").multiselect("rebuild");$("#PmdReview_SendMail_Remarks").val("");$("#PmdReview_SelectedUsers").val("");$("#Error_SendBackRemarks").hide();$("#Error_Reformulation_PMDUpdateRemarks").hide();$("#PmdReview_SendMail_HubUser_Dropdown").val("").multiselect("rebuild");$("#ShowManagerApprovalRemarks").val("");$("#DueDate").val("");$("#PopUp_SendToExpRemarks").val("");$(".errorUnderExp").hide();$("#Error_Daypicker").hide()});if((statusId=="4"||statusId=="5"||statusId=="16"||statusId=="6"||statusId=="7"||statusId=="12"||statusId=="14")&&$.each(JsonFormReformulationHubReviewData.HubBIList,function(n,t){var i=`<span class="hub_view" onclick="BI('${t.HubName}')" value=""> ${t.HubName} Business Information</span>`;$(".hub_align").append(i)}),colmodels=[{name:"Product",label:"Product",width:90,resizable:!0,ignoreCase:!0},{name:"SKU",label:"SKU",width:90,resizable:!0,ignoreCase:!0},{name:"ProposeLaunchDate",label:"Proposed Launch Date",width:130,resizable:!0,ignoreCase:!0},{name:"ProposedSellingPrice",label:"Proposed Selling Price",width:130,resizable:!0,ignoreCase:!0},{name:"ProposedTP",label:"Expected COP",width:130,resizable:!0,ignoreCase:!0},{name:"ProposedMRP",label:"Proposed MRP",width:130,resizable:!0,ignoreCase:!0},{name:"Currency",label:"Currency",width:130,resizable:!0,ignoreCase:!0},{name:"ExpectedGP",label:"Expected GP % ",width:130,resizable:!0,ignoreCase:!0},{name:"BusinessValue",label:'Business Value <span class="Bus_val">(Y2 Quantity * Proposed Selling Price)<\/span>',width:140,resizable:!0,ignoreCase:!0},{name:"M1Quantity",label:"M1 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M2Quantity",label:"M2 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M3Quantity",label:"M3 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M4Quantity",label:"M4 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M5Quantity",label:"M5 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"M6Quantity",label:"M6 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"Y1Quantity",label:"Y1 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"Y2Quantity",label:"Y2 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"Y3Quantity",label:"Y3 Quantity",width:140,resizable:!0,ignoreCase:!0},{name:"UOM",label:"UOM",width:140,resizable:!0,ignoreCase:!0},],$("#Hub_business_info_view").jqGrid({url:"",datatype:"local",data:[],mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,rowNum:20,scroll:1,gridComplete:function(){var t=$("#Hub_business_info_view tbody tr"),r=$("#Hub_business_info_view tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),businessInfo=[],$(".ui-jqgrid-bdiv").css({"max-height":"45vh"}),$(".ui-jqgrid-bdiv").children("div").css({"min-height":"5vh"}),$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height(),$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px")),$("#Division").change(function(){$(this).val()==""?$("#Error_Reformulation_Division").show():$("#Error_Reformulation_Division").hide()}),$("#Category").change(function(){$(this).val()==""?$("#Error_Reformulation_Category").show():$("#Error_Reformulation_Category").hide()}),$("#ProjectName").keyup(function(){$("#ProjectName").val()==""?$("#Error-ProjectName").show():$("#Error-ProjectName").hide()}),$("#ProductDescriptionExistingName").keyup(function(){$("#ProductDescriptionExistingName").length==0?$("#Err-ProductDescription").show():$("#Err-ProductDescription").hide()}),$("#SKUDetails").keyup(function(){$("#SKUDetails").length==0?$("#Err-ProductDescription-sku").show():$("#Err-ProductDescription-sku").hide()}),$("#BusinessInformationProductName").change(function(){$(this).parent().find(".Err-BusinessInformation").hide()}),$("#BusinessInformationSKU").keyup(function(){$(this).parent().find(".Err-BusinessInformation").hide()}),$("#BusinessInformationLaunchDate").change(function(){$(this).parent().find(".Err-BusinessInformation").hide()}),$("#BusinessInformationSellingPrice").keyup(function(){$(this).parent().find(".Err-BusinessInformation").hide();$("#Err-NAN-SP").hide()}),$("#BusinessInformationProposedTP").keyup(function(){$(this).parent().find(".Err-BusinessInformation").hide();$("#Err-NAN-TP").hide()}),$("#BusinessInformationProposedMRP").keyup(function(){$(this).parent().find(".Err-BusinessInformation").hide();$("#Err-NAN-MRP").hide()}),$("#BusinessInformationCurrency").change(function(){$(this).parent().find(".Err-BusinessInformation").hide()}),$("#BusinessInformationExpectedGP").keyup(function(){$(this).parent().find(".Err-BusinessInformation").hide();$("#Err-NAN-GP").hide()}),$("#BusinessInformationM1").keyup(function(){$(this).parent().find(".Err-BusinessInformation").hide();$("#Err-NAN-M1").hide()}),$("#BusinessInformationM2").keyup(function(){$(this).parent().find(".Err-BusinessInformation").hide();$("#Err-NAN-M2").hide()}),$("#BusinessInformationM3").keyup(function(){$(this).parent().find(".Err-BusinessInformation").hide();$("#Err-NAN-M3").hide()}),$("#BusinessInformationY1").keyup(function(){$(this).parent().find(".Err-BusinessInformation").hide();$("#Err-NAN-Y1").hide()}),$("#BusinessInformationY2").keyup(function(){$(this).parent().find(".Err-BusinessInformation").hide();$("#Err-NAN-Y2").hide()}),$("#BusinessInformationY3").keyup(function(){$(this).parent().find(".Err-BusinessInformation").hide();$("#Err-NAN-Y3").hide()}),$("#BusinessInformationUOM").keyup(function(){$(this).parent().find(".Err-BusinessInformation").hide();$(".UomErr").hide()}),$("#PackagingProfileProduct").change(function(){$(this).val()===""?$(".Err-PackagingProfileProduct").show():$(".Err-PackagingProfileProduct").hide()}),$("#PackagingProfileSKU").keyup(function(){$(this).length===0?$(".Err-PackagingProfileSKU").show():$(".Err-PackagingProfileSKU").hide()}),$("#PackagingProfilePrimaryPackaging").keyup(function(){$(this).length===0?$(".Err-PackagingProfilePrimaryPackaging").show():$(".Err-PackagingProfilePrimaryPackaging").hide()}),useremails="",(statusId==="2"||statusId=="13")&&$(document).ready(function(){var n=[],t;JsonFormReformulationHgmlReviewData.length!=0&&(n=JsonFormReformulationHgmlReviewData.HgmlDataList.length===0?[]:JsonFormReformulationHgmlReviewData.HgmlDataList[0].Hub.split(","),$("#HgmlData_HubDropdown").multiselect("refresh"),$("#HgmlData_HubDropdown").val(n).multiselect("rebuild"),$("#HgmlData_HubDropdown").multiselect("rebuild"),t=$("#HgmlData_HubDropdown").val().toString(),t!=""&&$.ajax({type:"POST",url:ROOT+"Base/GetUserEmailBasedOnHub",data:{hubIds:t},dataType:"json",success:function(t){var i,r;if(t!=null){let n=[];n=JsonFormReformulationHgmlReviewData.HgmlDataList.length===0?[]:JsonFormReformulationHgmlReviewData.HgmlDataList[0].HubUsers.split(",");i="";$("option").remove(".HubUsersOption");$.each(t,function(t,r){let u=!1;u=n.includes(r.HgmlDataHubUsersList);i+=u?'<option class="HubUsersOption '+r.Hub+'" value="'+r.HgmlDataHubUsersList+'" selected>'+r.Hub+" - "+r.HgmlDataHubUsersList+"<\/option>":'<option class="HubUsersOption '+r.Hub+'" value="'+r.HgmlDataHubUsersList+'" >'+r.Hub+" - "+r.HgmlDataHubUsersList+"<\/option>"});$("#HgmlData_HubUsersDropdown").html(i);$("#HgmlData_HubUsersDropdown").multiselect("rebuild");$(".HubUsersOption").find("input[type=checkbox]").prop("disabled",!1);r=$("#HgmlData_HubUsersDropdown").find("option:selected");$.each(r,function(n,t){$(".HubUsersOption").each(function(){$(this).attr("class")==t.className&&$(this).val()!=t.value&&$(this).find("input[type=checkbox]").prop("disabled",!0)})})}$("#HgmlData_HubDropdown").val(n).multiselect("rebuild")},error:function(){alert("Error occured!!")}}))}),statusId==="1"&&$(".PackgagingProfileHeader").hide(),(statusId=="4"||statusId=="5"||statusId=="16"||statusId=="6"||statusId=="12"||statusId=="14")&&(JsonFormReformulationHubReviewData.ProductDetailsHubRemarksList.length==0?$("#productDetailsHubRemarksGrid").hide():$("#productDetailsHubRemarksGrid").show(),JsonFormReformulationHubReviewData.ProjectDetailsHubRemarksList.length==0?$("#projectDetailsHubRemarksGrid").hide():$("#projectDetailsHubRemarksGrid").show(),JsonFormReformulationHubReviewData.FormulationProfileHubRemarksList.length==0?$("#formulationDetailsHubRemarksGrid").hide():$("#formulationDetailsHubRemarksGrid").show(),JsonFormReformulationHubReviewData.BusinessInformationHubRemarksList.length==0?$("#businessinfoHubRemarksGrid").hide():$("#businessinfoHubRemarksGrid").show(),JsonFormReformulationHubReviewData.PackagingProfileHubRemarksList.length==0?$(".worksheet5").hide():$(".worksheet5").show(),JsonFormReformulationHubReviewData.HgmlApproveSustainabilityHubRemarks.length==0?$(".Sustainability_HubRemarks").hide():$(".Sustainability_HubRemarks").show()),$("#ViewStatus").val()=="View"&&($(".ViewModeButton,.ViewModeField").hide(),$(".ViewMode").attr("readonly",!0),$(".imageHideForView").hide(),$("#delete_icon_Benchmark_Samples_Image").hide(),$("#statusHeader").text("Reformulation - "+statusName),(statusId=="2"||statusId=="13")&&($(".InitiatorRemarks").show(),$(".approveHgmlData").hide(),$(".worksheet5").hide()),(statusId=="8"||statusId=="11")&&($("#saveReformulation,#ReformulationSubmit,#PackagingProfile").hide(),$(".BusinessInfo .row").hide(),$("#prd_desc,#business_info,#expected").jqGrid("hideCol","Action"),$("#Division,#Category_Reformulation").attr("disabled",!0)),statusId=="3"&&$("#Role").val()!="HGML Team"&&($(".BusinessInfo,.worksheet5").hide(),$("#ReformulationCancel").show(),$(".hubmarkets").show(),$("#HubApproveSelect").attr("disabled",!0)),statusId=="3"&&($(".HubReview").hide(),$(".hubReviewCancelBtn").show(),$(".forDrafrStage").hide()),(statusId=="4"||statusId=="14")&&($("#HgmlData_ApprovePage").hide(),$(".hideHgmlGrid,.approveHgmlData").hide(),$(".hubmarkets").show()),(statusId=="5"||statusId=="16")&&($(".ViewModeField").show(),$(".pmddata").hide(),$(".hubmarkets").show()),(statusId=="6"||statusId=="12")&&($(".approveHgmlData").show(),$(".SentToHubYesOrNo").hide(),$(".hubmarkets").show()),ProjectDetailsBenchMarkSampleImage==""&&$(".benchmarksampleimage").hide()),statusId==3&&$("#ViewStatus").val()=="View"&&$("#Role").val()=="HGML Team"&&($("#productDetailsHubRemarksGrid").show(),$("#projectDetailsHubRemarksGrid").show(),$("#formulationDetailsHubRemarksGrid").show(),$("#HubBusinessInfoLinks").show(),$("#businessinfoHubRemarksGrid").show(),$("#packagingprofileHubRemarksGrid,#HubReviewStatus").show(),$(".BusinessInfo,.hubHidden").hide(),JsonFormReformulationHubReviewData.ProductDetailsHubRemarksList.length==0?$("#productDetailsHubRemarksGrid").hide():$("#productDetailsHubRemarksGrid").show(),JsonFormReformulationHubReviewData.ProjectDetailsHubRemarksList.length==0?$("#projectDetailsHubRemarksGrid").hide():$("#projectDetailsHubRemarksGrid").show(),JsonFormReformulationHubReviewData.FormulationProfileHubRemarksList.length==0?$("#formulationDetailsHubRemarksGrid").hide():$("#formulationDetailsHubRemarksGrid").show(),JsonFormReformulationHubReviewData.BusinessInformationHubRemarksList.length==0?$("#businessinfoHubRemarksGrid").hide():$("#businessinfoHubRemarksGrid").show(),JsonFormReformulationHubReviewData.PackagingProfileHubRemarksList.length==0?$(".worksheet5").hide():$(".worksheet5").show(),$(".PackagingProfileHeadingName").show(),$(".worksheet5,.hubstatus").show(),divTag="",$.each(JsonFormReformulationHubReviewData.HubApprovalStatusList,function(n,t){t.IsHubApproved=="Yes"&&(divTag+='<div class="col-1"> <label class= "col-form-label mt-2">'+t.HubName+'<\/label><\/div>  <div class="col-2 "> <input type = "text" class= "form-control green hubStatusValue mt-2" value = "Yes" readonly > <\/div>');t.IsHubApproved=="No"&&(divTag+='<div class="col-1"> <label class= "col-form-label mt-2">'+t.HubName+'<\/label><\/div>  <div class="col-2 "> <input type = "text" class= "form-control red hubStatusValue mt-2" value = "No" readonly > <\/div>');t.IsHubApproved=="Yet to Confirm"&&(divTag+='<div class="col-1"> <label class= "col-form-label mt-2">'+t.HubName+'<\/label><\/div>  <div class="col-2 "> <input type = "text" class= "form-control orange hubStatusValue mt-2" value = "Yet to Confirm" readonly > <\/div>')}),$("#HubReviewStatus").html(divTag).css("padding-bottom","5vh"),colmodels1=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"ProductDetailsHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet1").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.ProductDetailsHubRemarksList,mtype:"GET",colModel:colmodels1,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet1",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet1 tbody tr"),r=$("#worksheet1 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),colmodels2=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"ProjectDetailsHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet2").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.ProjectDetailsHubRemarksList,mtype:"GET",colModel:colmodels2,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet2",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet2 tbody tr"),r=$("#worksheet2 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),colmodels3=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"FormulationProfileHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet3").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.FormulationProfileHubRemarksList,mtype:"GET",colModel:colmodels3,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet3",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet3 tbody tr"),r=$("#worksheet3 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),colmodels4=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"BusinessInformationHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet4").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.BusinessInformationHubRemarksList,mtype:"GET",colModel:colmodels4,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet4",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet4 tbody tr"),r=$("#worksheet4 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}}),colmodels5=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"PackagingProfileHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},],$("#worksheet5").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.PackagingProfileHubRemarksList,mtype:"GET",colModel:colmodels5,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet5",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet5 tbody tr"),r=$("#worksheet5 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}})),statusId=="4"||statusId=="14"){colmodels=[{name:"HubName",label:"HUB",resizable:!0,ignoreCase:!0},{name:"HgmlDataHUBParticipatingMarkets",label:"Participating Markets",resizable:!0,ignoreCase:!0},{name:"HgmlOrHubDataRemarks",label:"Remarks",resizable:!0,ignoreCase:!0},];var PM_List=JsonFormReformulationHubReviewData.HgmlDataHUBParticipatingMarketsList,RowIdHGML=0,EditRowIdHGML=0,isvalid=!0;$("#HUB_ParticipatingMarkets").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.HgmlDataHUBParticipatingMarketsList,mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,rowNum:20,scroll:!0,gridComplete:function(){var t=$("#HUB_PartcipatingMarkets tbody tr"),r=$("#HUB_PartcipatingMarkets tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"10vh"});$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"))}if(statusId!="1"&&statusId!="8"&&statusId!="9"&&statusId!="11"&&(packagingProfileData_1=ReformulationJQgrid.ReformulationPackagingProfile,reformulationPackagingProfileGrid=packagingProfileData_1.filter(n=>n.length!==0),reformulationPackagingProfileGrid.length==0?($("#PackagingProfileGrid").hide(),$(".packProfileRemarks").hide()):$("#PackagingProfileGrid").show()),formData=new FormData,statusId=="7"&&PackagingProfile.length>0&&$("#PackagingProfile").show(),$("#PackagingProfileGrid").show(),colmodels=[{name:"Action",label:"Action",width:90,resizable:!0,ignoreCase:!0,formatter:function(n,t){return'<div class="text-center icon_section align-items-left"><a onclick=onEditTargetCost('+t.rowId+') class= "icon_color btn_button edit" title = "Edit" id = "edit_info" ><i class="fa fa-edit mr-2" title="Edit" aria-hidden="true"><\/i><span class="sr-only">Edit<\/span><\/a ><a onclick=onDeleteTargetCost('+t.rowId+') class="icon_color btn_button" title="Delete"><i class="fa fa-trash" title="Delete" aria-hidden="true"><\/i><span class="sr-only">Delete<\/span><\/a><\/div> '}},{name:"Product",label:"Product",width:90,resizable:!0,ignoreCase:!0},{name:"SKU",label:"SKU",width:90,resizable:!0,ignoreCase:!0},{name:"Currency",label:"",width:130,resizable:!0,ignoreCase:!0},{name:"TargetCost",label:"Accepted Target Cost",width:130,resizable:!0,ignoreCase:!0},{name:"TargetCostRemarks",label:"Remarks",width:100,resizable:!0,ignoreCase:!0},],$("#TargetCost_Grid").jqGrid({url:"",datatype:"local",data:JsonFormReformulationPmdReviewData==undefined?[]:JsonFormReformulationPmdReviewData.TargetCostDataList,mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,pager:"#pager_HGML",rowNum:20,scroll:1,gridComplete:function(){var t=$("#TargetCost_Grid tbody tr"),r=$("#TargetCost_Grid tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"));$("#ViewStatus").val()=="View"&&jQuery("#TargetCost_Grid").jqGrid("hideCol","Action")}}),$(".ui-jqgrid-bdiv").css({"max-height":"45vh"}),$(".ui-jqgrid-bdiv").children("div").css({"min-height":"5vh"}),$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height(),$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px")),isEditTC=!1,EditRowId2=0,TCEditedSKU="",EditRowTC=0,$("#TargetCostProductName").change(function(){var i,t,n;if($("#TargetCostSKU").empty(),$("#TargetCostSKU").append("<option>--Select--<\/option>"),i=$(this).val(),i!="")for(t=$("#prd_desc").jqGrid("getGridParam","data"),n=0;n<t.length;n++)if(t[n].ExistingName==i){var u=t[n].SKU,f=u.split(","),r="";$.each(f,function(n,t){(t!=""||t!=null||t!=undefined)&&(r+='<option class="skuOption" value="'+t+'">'+t+"<\/option>")});$("#TargetCostSKU").append(r);break}}),$("#TargetCostSKU").change(function(){var n;$("#Error_ProdSKU").hide();var i=$("#TargetCostProductName").val(),r=$("#TargetCostSKU").val(),t=$("#TargetCost_Grid").jqGrid("getGridParam","data");if(isEditTC)for(n=0;n<t.length;n++)if(t[n].Product==i&&t[n].SKU==r&&t[n].SKU!=TCEditedSKU){$(".Err-TCcombination").show();$("#TargertCostAdd").prop("disabled",!0);break}else $(".Err-TCcombination").hide(),$("#TargertCostAdd").prop("disabled",!1);else for(n=0;n<t.length;n++)if(t[n].Product==i&&t[n].SKU==r){$(".Err-TCcombination").show();$("#TargertCostAdd").prop("disabled",!0);break}else $(".Err-TCcombination").hide(),$("#TargertCostAdd").prop("disabled",!1)}),(statusId=="8"||statusId=="11")&&$("#ViewStatus").val()!="View"&&$("#Division,#Category_Reformulation,#ProjectName").attr("disabled",!1),statusId=="4"&&$("#ViewStatus").val()!="View"&&$(".approveHgmlData").hide(),statusId=="4"&&$("#ViewStatus").val()=="View"&&$(".approveHgmlData,.hgmldatagrid").show(),statusId=="3"&&$("#HubApproveSelect").val(hubApprove),statusId=="2"&&($("#HgmlData_HubUsersDropdown").val(JsonFormReformulationHgmlReviewData.HgmlDataList.length==0?"":JsonFormReformulationHgmlReviewData.HgmlDataList[0].HubUsers),$("#HgmlData_HubUsersDropdown").multiselect("refresh")),deletedImageNameList=[],statusId!="1"&&statusId!="8"&&statusId!="11"&&($("#ProjectDetailsBenchMarkSampleImage").prop("disabled",!0),$("#delete_icon_Benchmark_Samples_Image").hide()),(statusId=="1"||statusId=="8"||statusId=="9"||statusId=="11")&&$(".NotInRefDraft").hide(),(statusId=="2"||statusId=="13")&&(JsonFormReformulationHgmlReviewData!=undefined&&$("#SUS_HGML_Remarks").val(JsonFormReformulationHgmlReviewData.SustainabilityHGMLRemarksList.length>0?JsonFormReformulationHgmlReviewData.SustainabilityHGMLRemarksList[0].SustainabilityHgmlRemark:""),$(".NotInRefHgmlReview").hide()),statusId=="3"){if($(".NotInRefHubReview").hide(),$(".hubstatus").hide(),$("#SUS_HGML_Remarks").val(JsonFormReformulationHgmlReviewData.SustainabilityHGMLRemarksList.length>0?JsonFormReformulationHgmlReviewData.SustainabilityHGMLRemarksList[0].SustainabilityHgmlRemark:""),$("#ViewStatus").val()!="View"&&$("#SUS_HUB_Remarks").val(JsonFormReformulationHubReviewData.SustainabilityHubRemarksList.length==0?"":JsonFormReformulationHubReviewData.SustainabilityHubRemarksList[0].SustainabilityHubRemark),$("#ViewStatus").val()=="View"){$(".Sustainability_HubRemarks").show();$(".SUS_HUB_Remarks").hide();$("#productDetailsHubRemarksGrid").show();$("#projectDetailsHubRemarksGrid").show();$("#formulationDetailsHubRemarksGrid").show();$("#HubBusinessInfoLinks").show();$("#businessinfoHubRemarksGrid").show();$(".PackagingProfile_HubRemarks").show();$(".HgmlOrHubDataSection").hide();$(".hubReviewStatus").hide();colmodels1=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"ProductDetailsHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},];$("#worksheet1").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.ProductDetailsHubRemarksList,mtype:"GET",colModel:colmodels1,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet1",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet1 tbody tr"),r=$("#worksheet1 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});colmodels2=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"ProjectDetailsHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},];$("#worksheet2").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.ProjectDetailsHubRemarksList,mtype:"GET",colModel:colmodels2,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet2",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet2 tbody tr"),r=$("#worksheet2 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});colmodels3=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"FormulationProfileHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},];$("#worksheet3").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.FormulationProfileHubRemarksList,mtype:"GET",colModel:colmodels3,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet3",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet3 tbody tr"),r=$("#worksheet3 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});colmodels4=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"BusinessInformationHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},];$("#worksheet4").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.BusinessInformationHubRemarksList,mtype:"GET",colModel:colmodels4,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet4",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet4 tbody tr"),r=$("#worksheet4 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});colmodels5=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"PackagingProfileHubRemark",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},];$("#worksheet5").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData.PackagingProfileHubRemarksList,mtype:"GET",colModel:colmodels5,loadonce:!0,viewrecords:!0,pager:"#pager_worksheet5",rowNum:20,scroll:1,gridComplete:function(){var t=$("#worksheet5 tbody tr"),r=$("#worksheet5 tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});$(".hubstatus").show();$("#HubReviewStatus").show();divTag="";$.each(JsonFormReformulationHubReviewData.HubApprovalStatusList,function(n,t){t.IsHubApproved=="Yes"&&(divTag+='<div class="col-1"> <label class= "col-form-label mt-2">'+t.HubName+'<\/label><\/div>  <div class="col-2 "> <input type = "text" class= "form-control green hubStatusValue mt-2" value = "Yes" readonly > <\/div>');t.IsHubApproved=="No"&&(divTag+='<div class="col-1"> <label class= "col-form-label mt-2">'+t.HubName+'<\/label><\/div>  <div class="col-2 "> <input type = "text" class= "form-control red hubStatusValue mt-2" value = "No" readonly > <\/div>');t.IsHubApproved=="Yet to Confirm"&&(divTag+='<div class="col-1"> <label class= "col-form-label mt-2">'+t.HubName+'<\/label><\/div>  <div class="col-2 "> <input type = "text" class= "form-control orange hubStatusValue mt-2" value = "Yet to Confirm" readonly > <\/div>')});$("#HubReviewStatus").html(divTag).css("padding-bottom","5vh");$(".hubmarkets").show();var PM_List=JsonFormReformulationHubReviewData.HgmlDataHUBParticipatingMarketsList,RowIdHGML=0,EditRowIdHGML=0,isvalid=!0;colmodels=[{name:"HubName",label:"HUB",resizable:!0,ignoreCase:!0},{name:"HgmlDataHUBParticipatingMarkets",label:"Participating Markets",resizable:!0,ignoreCase:!0},{name:"HgmlOrHubDataRemarks",label:"Remarks",resizable:!0,ignoreCase:!0},];$("#HUB_ParticipatingMarkets").jqGrid({datatype:"local",url:"",data:JsonFormReformulationHubReviewData.HgmlDataHUBParticipatingMarketsList.length>=0?JsonFormReformulationHubReviewData.HgmlDataHUBParticipatingMarketsList:[],mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,rowNum:20,scroll:!0,gridComplete:function(){var t=$("#HUB_PartcipatingMarkets tbody tr"),r=$("#HUB_PartcipatingMarkets tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"10vh"});$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"));$(".init_businessInfo").hide();$.each(JsonFormReformulationHubReviewData.HubBIList,function(n,t){var i=`<span class="hub_view" onclick="BI('${t.HubName}')" value=""> ${t.HubName} Business Information</span>`;$(".hub_align").append(i)});$("#business_info").jqGrid("clearGridData");$("#business_info").jqGrid("setGridParam",{data:ReformulationJQgrid.ReformulationBusinessInformation});$("#business_info").trigger("reloadGrid",[{page:1}])}$("#SUS_HGML_Remarks").prop("readonly",!0)}(statusId=="4"||statusId=="14")&&($("#SUS_HGML_Remarks").val(JsonFormReformulationHgmlReviewData.SustainabilityHGMLRemarksList.length>0?JsonFormReformulationHgmlReviewData.SustainabilityHGMLRemarksList[0].SustainabilityHgmlRemark:""),$(".NotInRefHgmlApprove").hide());(statusId=="5"||statusId=="16"||statusId=="6"||statusId=="12")&&($("#SUS_HGML_Remarks").val(JsonFormReformulationHgmlReviewData.SustainabilityHGMLRemarksList.length>0?JsonFormReformulationHgmlReviewData.SustainabilityHGMLRemarksList[0].SustainabilityHgmlRemark:""),$("#SUS_PMD_Remarks").val(JsonFormReformulationPmdReviewData.SustainabilityPmdRemarksList.length==0?"":JsonFormReformulationPmdReviewData.SustainabilityPmdRemarksList[0].SustainabilityPmdRemark),$("#SUS_HGML_Remarks").prop("readonly",!0),$(".NotInRefPmdReview").hide(),$("#ViewStatus").val()=="View"&&($(".pmdDataSection").show(),$(".pmdDataFields").hide(),$(".pmdDataGrid").show(),$(".targetCostSection").show(),$(".targetCostFields").hide(),$(".targetCostGrid").show()));(statusId=="6"||statusId=="7"||statusId=="12")&&(statusId=="7"&&$("#SUS_HGML_Remarks, #SUS_HUB_Remarks, #SUS_PMD_Remarks").prop("readonly",!0),(statusId=="6"||statusId=="12")&&$("#SUS_HGML_Remarks, #SUS_HUB_Remarks").prop("readonly",!0),$("#SUS_HGML_Remarks").val(JsonFormReformulationHgmlReviewData.SustainabilityHGMLRemarksList.length>0?JsonFormReformulationHgmlReviewData.SustainabilityHGMLRemarksList[0].SustainabilityHgmlRemark:""));statusId=="8";$("#ViewStatus").val()=="View"&&($("#SUS_HGML_Remarks, #SUS_HUB_Remarks, #SUS_PMD_Remarks").prop("readonly",!0),$(".NotInRefViewPage").hide());ReformulationJQgrid.ReformulationPackagingProfile.length>0&&(packagingProfileData_1=ReformulationJQgrid.ReformulationPackagingProfile,packagingProfileData_1.length>0&&(htmlTag="",ppRowId=packagingProfileData_1.length-1,$.each(packagingProfileData_1,function(n,t){var r,i;htmlTag+=` 
            <table class ="mt-2" id="PP_Table_`+n+`" style="width:100%">
            <thead>
                <tr>
                    <th colspan="2">
                        <b>Product : </b><span class="expectedProduct">
                        <span>`+t.Product+`</span>
                    </th>
                    <th style="width:25%">
                        <b>SKU : </b><span class="expectedSKU">
                        <span>`+t.SKU+`</span>
                    </th>
                    <th>
                        <span>
                           <div class="justify-center_1">
                                <a class="btn-icon -edit Edittable"><i onclick="onEditPackagingProfile(`+n+`)" class="fas fa-edit " title="Edit"></i></a>
                                <a class="btn-icon -delete deletetable ppDeleteHide"><i onclick="onDeletePackagingProfile(`+n+`,'#PP_Table_`+n+`',0)" class="fas fa-trash" data-bs-toggle="modal" title="Delete"></i></a>
                                       ${t.PackagingProfileImage!==""&&t.PackagingProfileImage!==null?`
                                       <a class="btn-icon -info imagesinfo" title="Images info" onclick="ShowImages(`+n+`)" id="`+n+`"><img src='../images/multiimages.png'/></a>`:""}
                            </div>
                        </span>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="width:25%;">
                        <span class="remarkss"><b>Primary Packaging : </b> <span class="remarks_Show show_primarypack list_icon" style="display:none"><i class="fas fa-list"></i></span></span>
                        <span>`+t.PrimaryPackaging+`</span>
                    </td>
                    <td style="width:25%;">
                    <span class="remarkss">
                        <b> Secondary Packaging: </b><span class="remarks_Show show_secondarypack list_icon" style="display:none"><i class="fas fa-list"></i></span></span><span>`+t.SecondaryPackaging+`</span>
                    </td>
                    <td>
                         <span class="remarkss">
                 <b> Tertiary Packaging: </b><span class="remarks_Show show_tertiarypack list_icon" style="display:none"><i class="fas fa-list"></i></span></span>
                 </span>
                        <span>`+t.TertiaryPackaging+`</span>
                    </td>
                    <td>
                 <span class="remarkss">
                 <b>Benchmark Products : </b><span class="remarks_Show show_benchmark list_icon" style="display:none"><i class="fas fa-list"></i></span></span>
                 </span>                        <span>`+t.BenchmarkProducts+`</span>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                     <span class="remarkss">
                 <b>Desired Packaging Characteristics </b><span class="remarks_Show show_desiredpack list_icon" style="display:none"><i class="fas fa-list"></i></span></span>
                 </span><span>`+t.DesiredPackagingCharacters+`</span>
                    </td>
                    <td>
                        <span class="remarkss">
                 <b> Others if(any): </b><span class="remarks_Show show_others list_icon" style="display:none"><i class="fas fa-list"></i></span></span>
                 </span>                        <span>`+t.Others+`</span>
                    </td>
                    <td>
                    <span class="remarkss">
                 <b>Mold :</b><span class="remarks_Show show_mold list_icon" style="display:none"><i class="fas fa-list"></i></span>
                 </span>                        <span>`+t.Mould+`</span>
                    </td>
                </tr>
            </tbody>
        </table>
        
            `;r=n;t.PackagingProfileImage!==""&&t.PackagingProfileImage!==null&&(i=t.PackagingProfileImage.split(","),$.each(i,function(n){var t={};t={TableClass:r,Image:i[n]};imageGrid.push(t)}))}),$("#Packaging_Profile_Table").append(htmlTag),statusId>1&&statusId!=8&&statusId!=11&&($(".remarks_Show").attr("title","Remarks List"),$(".remarks_Show").show(),$(".deletetable").hide(),$(".Edittable").hide())));colmodels=[{name:"Action",label:"Action",width:90,resizable:!0,ignoreCase:!0,formatter:function(n,t){return`<div class="text-center icon_section align-items-left">
            <a onclick=onEditSustainability(`+t.rowId+`) class="icon_color btn_button" title="Edit" id="edit_worksheet"><i class="fa fa-edit mr-2" title="Edit"></i></a>
            <a onclick=onDeleteSustainability(`+t.rowId+`) class="icon_color btn_button" title="Delete" ><i class="fa fa-trash"  title="Delete"></i></a>
        </div>`}},{name:"Product",label:"Product",resizable:!0,ignoreCase:!0},{name:"TargetedGoals",label:"What sustainability goals are targeted?",resizable:!0,ignoreCase:!0,width:200},{name:"Reusable",label:"Reusable",resizable:!0,ignoreCase:!0},{name:"Recycle",label:"Recycle",resizable:!0,ignoreCase:!0},{name:"Reducing",label:"Reducing",resizable:!0,ignoreCase:!0},{name:"Recovering",label:"Recovering",resizable:!0,ignoreCase:!0},];$("#Table_Sustainability").jqGrid({height:"auto",rowNum:1e7,mtype:"GET",url:"",datatype:"local",data:ReformulationJQgrid.Sustainability,loadonce:!0,colModel:colmodels,pager:"#pager_Table_Sustainability",viewrecords:!0,scroll:!0,gridComplete:function(){var t=$("#Table_Sustainability tbody tr"),r=$("#Table_Sustainability tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"));(statusId=="2"||statusId=="13"||statusId=="3"||statusId=="4"||statusId=="14"||statusId=="5"||statusId=="16"||statusId=="6"||statusId=="12"||statusId=="7"||$("#ViewStatus").val()=="View")&&jQuery("#Table_Sustainability").jqGrid("hideCol","Action")}});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"10vh"});$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"));$("#SUS_Product").change(function(){var n=$("#SUS_Product").val();const t=$("#Table_Sustainability").jqGrid("getCol","Product");n==""?$("#Error_SUS_Product").show().text("Please select Product"):$("#Error_SUS_Product").hide().text("");n!=""&&(t.includes(n)?$("#Error_SUS_Product").show().text("This product already consists the definition, Please select the different product"):$("#Error_SUS_Product").hide().text(""))});$("#SUS_TargetedGoals").keyup(function(){$("#SUS_TargetedGoals").val()==""?$("#Error_SUS_TargetedGoals").show():$("#Error_SUS_TargetedGoals").hide()});$(document).on("click","#Add_Sustainability",function(){var r=!0,t=$("#SUS_Product").val(),i=$.trim($("#SUS_TargetedGoals").val()),e=$.trim($("#SUS_Reusable").val()),o=$.trim($("#SUS_Recycle").val()),s=$.trim($("#SUS_Reducing").val()),h=$.trim($("#SUS_Recovering").val()),u,n,c,l,a,f;editRowId5==0&&$("#Error_SUS_Product").text()!=""?r=!1:"";(t==""||i=="")&&(r=!1,t==""?$("#Error_SUS_Product").show().text("Please select Product"):$("#Error_SUS_Product").hide().text(""),i==""?$("#Error_SUS_TargetedGoals").show():$("#Error_SUS_TargetedGoals").hide());r&&(u=[],n={},n={Product:t,TargetedGoals:i,Reusable:e,Recycle:o,Reducing:s,Recovering:h},editRowId5==0?(u.push(n),c=$("#Table_Sustainability").jqGrid("getGridParam","data"),l=$.merge(c,u),$("#Table_Sustainability").jqGrid("setGridParam",{data:l}),$("#Table_Sustainability").trigger("reloadGrid",[{page:1}])):(n={Product:t,TargetedGoals:i,Reusable:e,Recycle:o,Reducing:s,Recovering:h},$("#Table_Sustainability").jqGrid("setRowData",editRowId5,n),$("#Table_Sustainability").trigger("reloadGrid",[{page:1}]),editRowId5=0),$(".Sustainability").val(""),productPositioningProductNameList=$("#prd_desc").jqGrid("getCol","ExistingName"),a=$("#Table_Sustainability").jqGrid("getCol","Product"),sustainabilityProductNameList=$.grep(productPositioningProductNameList,function(n){return $.inArray(n,a)==-1}),$("option").remove("#SUS_Product .ProductOption"),sustainabilityProductNameList.length>0&&(f="",$.each(sustainabilityProductNameList,function(n,t){t!=""&&(f+='<option class="ProductOption" value="'+t+'">'+t+"<\/option>")}),$("#SUS_Product").append(f)))});colmodels=[{name:"HubName",label:"HUB Name",resizable:!0,width:300,ignoreCase:!0},{name:"Remarks",label:"Remarks",resizable:!0,width:700,ignoreCase:!0},];$("#Sustainability_Remarks").jqGrid({url:"",datatype:"local",data:JsonFormReformulationHubReviewData==null||JsonFormReformulationHubReviewData=="undefined"?[]:JsonFormReformulationHubReviewData.HgmlApproveSustainabilityHubRemarks,mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,pager:"#pager_Sustainability_Remarks",rowNum:1e6,scroll:!0,gridComplete:function(){var t=$("#Sustainability_Remarks tbody tr"),r=$("#Sustainability_Remarks tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"10vh"});$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"));$("#PrototypeSubmissionDate,#TTDCompletionDate,#ProductionDate").on("click",function(n){n.preventDefault();$(this).attr("autocomplete","off")});$("#ViewStatus").val()=="View"&&(statusId=="2"&&$(".InitiatorRemarks").hide(),$(".hubReviewButtonsList").show(),$("#saveReformulation,#ReformulationSubmit").hide(),(statusId=="4"||statusId=="6"||statusId=="7"||statusId=="2"||statusId=="5"||statusId=="14")&&$(".hubReviewButtonsList").hide());ppRowId=-1;$("#PackagingProfileAdd").click(function(){var u,r,c,l,o,y,n,f,e,s;$(".Err-PPNoMoreSKU").hide();var a=CKEDITOR.instances.PackagingProfilePrimaryPackaging.getData().trim(),v=a.replace(/<[^>]*>/g,"").replace(/&nbsp;/g,""),h=v.replace(/&nbsp;/g,"").trim();if($("#PackagingProfileProduct").val()===""||$("#PackagingProfileSKU").val().toString()===""||h===""?($("#PackagingProfileProduct").val()===""?(isvalid=!1,$(".Err-PackagingProfileProduct").show()):$(".Err-PackagingProfileProduct").hide(),$("#PackagingProfileSKU").val().toString()===""?(isvalid=!1,$(".Err-PackagingProfileSKU").show()):$(".Err-PackagingProfileSKU").hide(),h===""?(isvalid=!1,$(".Err-PackagingProfilePrimaryPackaging").show()):$(".Err-PackagingProfilePrimaryPackaging").hide()):(isvalid=!0,$(".Err-PackagingProfileProduct").hide(),$(".Err-PackagingProfileSKU").hide(),$(".Err-PackagingProfilePrimaryPackaging").hide()),u=SavePackageImageFile(),r="",u==""?r=$("#Display_image_upload").text():u!=""&&$.each(u,function(n,t){n+1==u.length?r+=t:n==0?r=t+",":r+=t+","}),PackageImageFileName=r,EditRowIdPackagingProfile==-1&&$(".Error_PP_Product").text()!=""?isvalid=!1:"",c=$("#PackagingProfileSKU").val(),isvalid&&(l=packagingProfileData_1,o=0,l.forEach(function(n,t){if(n.Product==$("#PackagingProfileProduct").val()&&EditRowIdPackagingProfile!=t){var i=n.SKU.split(",").map(n=>n.trim());$.each(c,function(n,t){if($.inArray(t,i)!==-1)return isvalid=!1,o=1,!1})}}),o&&$("#Error_PPR_Product_Sku").show().text("Selected Product and SKU combination already exists.")),isvalid){if($("#err-expected").hide(),$("#Error_PPR_Product_Sku").hide(),$("#Err-PackagingProfileBI").hide(),y=[],n={},n={Product:$("#PackagingProfileProduct").val(),SKU:$("#PackagingProfileSKU").val().toString(),PrimaryPackaging:CKEDITOR.instances.PackagingProfilePrimaryPackaging.getData(),SecondaryPackaging:CKEDITOR.instances.PackagingProfileSecondaryPackaging.getData(),TertiaryPackaging:CKEDITOR.instances.PackagingProfileTertiaryPackaging.getData(),BenchmarkProducts:CKEDITOR.instances.PackagingProfileBenchMarkProduct.getData(),DesiredPackagingCharacters:CKEDITOR.instances.PackagingProfileDesiredPackagingCharacters.getData(),Others:CKEDITOR.instances.PackagingProfileOthers.getData(),Mould:$("#PackagingProfileMould").val(),PackagingProfileImage:PackageImageFileName},ppRowId=packagingProfileData_1.length,EditRowIdPackagingProfile==-1)ppRowId=ppRowId+1,packagingProfileData_1[ppRowId]=n,f=`

        <table class="mt-2" id="PP_Table_`+ppRowId+`" style="width:100%">
            <thead>
                <tr>
                    <th colspan="2">
                        <b>Product : </b>
                        <span>`+n.Product+`</span>
                    </th>
                    <th style="width:25%">
                        <b>SKU : </b>
                        <span>`+n.SKU+`</span>
                    </th>
                    <th>

                        <span>
                            <div class="justify-center_1">
                                <a class="btn-icon -edit "><i onclick="onEditPackagingProfile(`+ppRowId+`)" class="fas fa-edit" title="Edit"></i></a>
                                <a class="btn-icon -delete ppDeleteHide"><i onclick="onDeletePackagingProfile(`+ppRowId+`,'#PP_Table_`+ppRowId+`',0)" class="fas fa-trash" data-bs-toggle="modal" title="Delete"></i></a>
                                       ${n.PackagingProfileImage!==""&&n.PackagingProfileImage!==null?`
                                      <a class="btn-icon -info imagesinfo" title="Images info" onclick="ShowImages(`+ppRowId+`)" id="`+ppRowId+`"><img src='../images/multiimages.png'/></a>`:""}
                                </div>
                        </span>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="width:25%;">
                        <span class="remarkss"><b>Primary Packaging : </b> </span>
                        <span>`+n.PrimaryPackaging+`</span>
                    </td>
                    <td style="width:25%;">
                        <span class="remarkss"><b>Secondary Packaging : </b></span>
                        <span>`+n.SecondaryPackaging+`</span>
                    </td>
                    <td>
                        <span class="remarkss"><b>Tertiary Packaging : </b> </span>
                        <span>`+n.TertiaryPackaging+`</span>
                    </td>
                    <td>
                        <span class="remarkss"> <b>Benchmark products : </b> </span>
                        <span>`+n.BenchmarkProducts+`</span>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <span class="remarkss"><b>Desired Packaging Characterstics</b></span>
                        <span>`+n.DesiredPackagingCharacters+`</span>
                    </td>
                    <td>
                        <span class="remarkss"><b>Others (if any) : </b></span>
                        <span>`+n.Others+`</span>
                    </td>
                    <td>
                        <span class="remarkss"><b>Mold : </b></span>
                        <span>`+n.Mould+`</span>
                    </td>
                </tr>
            </tbody>
        </table>
            `,$("#Packaging_Profile_Table").append(f),EditRowIdPackagingProfile=-1,isEdited=0,PackageImageFileName!=""&&(PackageImageFileName=PackageImageFileName.split(","),$.each(PackageImageFileName,function(n){var t={};t={TableClass:ppRowId,Image:PackageImageFileName[n]};imageGrid.push(t)}));else{var p=packagingProfileData_1[EditRowIdPackagingProfile],f="",t,w="#PP_Table_"+EditRowIdPackagingProfile;if(packagingProfileData_1[EditRowIdPackagingProfile]=n,$("#PPR_ImagesUpload").val()==""&&p.ImagesUpload.length>0&&(n={Product:Product,SKU:$("#PPR_SKU").val().toString(),PrimaryPackaging:CKEDITOR.instances.PackagingProfilePrimaryPackaging.getData(),SecondaryPackaging:CKEDITOR.instances.PackagingProfileSecondaryPackaging.getData(),TertiaryPackaging:CKEDITOR.instances.PackagingProfileTertiaryPackaging.getData(),BenchmarkProducts:CKEDITOR.instances.PackagingProfileBenchMarkProduct.getData(),DesiredPackagingCharacters:CKEDITOR.instances.PackagingProfileDesiredPackagingCharacters.getData(),Others:CKEDITOR.instances.PackagingProfileOthers.getData(),Mould:$("#PPR_Mould").val(),ImagesUpload:PackageImageFileName},packagingProfileData_1[EditRowIdPackagingProfile]=n),t=packagingProfileData_1[EditRowIdPackagingProfile],f=`
        
                <thead>
                    <tr>
                        <th colspan="2">
                            <b>Product : </b>
                            <span>`+t.Product+`</span>
                        </th>
                        <th style="width:25%">
                            <b>SKU : </b>
                            <span>`+t.SKU+`</span>
                        </th>
                        <th>
                            <span>
                                <div class="justify-center_1">
                                    <a class="btn-icon -edit "><i onclick="onEditPackagingProfile(`+EditRowIdPackagingProfile+`)" class="fas fa-edit" title="Edit"></i></a>
                                    <a class="btn-icon -delete ppDeleteHide"><i onclick="onDeletePackagingProfile(`+EditRowIdPackagingProfile+`,'#PP_Table_`+EditRowIdPackagingProfile+`',0)" class="fas fa-trash" data-bs-toggle="modal" title="Delete"></i></a>
                                     ${t.PackagingProfileImage!==""&&t.PackagingProfileImage!==null?`
                                    <a class="btn-icon -info imagesinfo" title="Images info" onclick="ShowImages(`+EditRowIdPackagingProfile+`)" id="`+EditRowIdPackagingProfile+`"><img src='../images/multiimages.png'/></a>`:""}
                                 </div>
                            </span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="width:25%;">
                            <span class="remarkss"><b>Primary Packaging : </b> </span>
                            <span>`+t.PrimaryPackaging+`</span>
                        </td>
                        <td style="width:25%;">
                            <span class="remarkss"><b>Secondary Packaging : </b></span>
                            <span>`+t.SecondaryPackaging+`</span>
                        </td>
                        <td>
                            <span class="remarkss"><b>Tertiary Packaging : </b> </span>
                            <span>`+t.TertiaryPackaging+`</span>
                        </td>
                        <td>
                            <span class="remarkss"> <b>Benchmark products : </b> </span>
                            <span>`+t.BenchmarkProducts+`</span>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <span class="remarkss"><b>Desired Packaging Characterstics</b></span>
                            <span>`+t.DesiredPackagingCharacters+`</span>
                        </td>
                        <td>
                            <span class="remarkss"><b>Others (if any) : </b></span>
                            <span>`+t.Others+`</span>
                        </td>
                        <td>
                            <span class="remarkss"><b>Mold : </b></span>
                            <span>`+t.Mould+`</span>
                        </td>
                    </tr>
                </tbody>
                `,$(w).html(f),PackageImageFileName!=""){if(e=EditRowIdPackagingProfile,s=[],imageGrid.length>0)for(i=0;i<imageGrid.length;i++)e==imageGrid[i].TableClass&&s.push(e);imageGrid=imageGrid.filter(n=>!s.some(t=>t===n.TableClass));PackageImageFileName=PackageImageFileName.split(",");$.each(PackageImageFileName,function(n){var t={};t={TableClass:e,Image:PackageImageFileName[n]};imageGrid.push(t)})}EditRowIdPackagingProfile=-1}CKEDITOR.instances.PackagingProfilePrimaryPackaging.setData("");CKEDITOR.instances.PackagingProfileSecondaryPackaging.setData("");CKEDITOR.instances.PackagingProfileTertiaryPackaging.setData("");CKEDITOR.instances.PackagingProfileBenchMarkProduct.setData("");CKEDITOR.instances.PackagingProfileDesiredPackagingCharacters.setData("");CKEDITOR.instances.PackagingProfileOthers.setData("");$(".PackagingProfileEmpty").val("");$(".PackagingProfileEmptyImage").text("");$(".Toremove").val("");r="";$("#PackagingProfileSKU").val("").multiselect("refresh");$("#PackagingProfileSKU").empty();$("#PackagingProfileSKU").multiselect("rebuild")}});editedRowdata="";isEdited=0;var addedData={},deletedRemarksData=[],savedFieldRemarks=[];colmodels=[{name:"Action",label:"Action",resizable:!0,ignoreCase:!0,width:40,formatter:function(n,t,i){return i.CreatedBy==$("#UserName").val()?`<div class="justify-center_">
                <a onclick="remove_row(`+t.rowId+`)" class="btn-icon -delete"><i class="fa fa-trash" title="Delete" aria-hidden="true"</i></a></div>`:""}},{name:"Remarks",label:"Remarks",resizable:!0,ignoreCase:!0},{name:"UpdatedBy",label:"Updated By",resizable:!0,ignoreCase:!0},{name:"RemarksId",label:"RemarksId",resizable:!0,ignoreCase:!0,hidden:!0},{name:"CreatedBy",label:"CreatedBy",resizable:!0,ignoreCase:!0,hidden:!0},];$("#RemarksTable").jqGrid({height:"auto",rowNum:100,mtype:"GET",url:"",datatype:"local",data:[],loadonce:!0,colModel:colmodels,pager:"#pager_RemarksTable",viewrecords:!0,scroll:!0,gridComplete:function(){var t=$("#RemarksTable tbody tr"),r=$("#RemarksTable tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"10vh"});$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"));$(".formulation_table").on("click",".show_primarypack, .show_secondarypack,.show_tertiarypack,.show_desiredpack,.show_benchmark,.show_others,.show_mold",function(){var r=$(this).closest("table").attr("id"),n=$.trim($("#"+r).find(".expectedProduct").text()),t=$.trim($("#"+r).find(".expectedSKU").text()),u=$.trim($("#ProjectId").val()),i=$.trim($(this).closest("td").find("span:nth-child(1)").text().replace(":",""));$.ajax({type:"POST",url:ROOT+"NewInitiation/GetPackagingRemarks",data:{ProjectId:u,Product:n,SKU:t,FieldName:i},success:function(r){const u=r.filter(n=>!deletedRemarksData.some(t=>t.RemarksId===n.RemarksId)),f=savedFieldRemarks.filter(n=>!deletedRemarksData.some(t=>t.ProjectId===n.ProjectId&&t.Product===n.Product&&t.SKU===n.SKU&&t.FieldName===n.FieldName&&t.Remarks===n.Remarks&&t.RemarksId==n.RemarksId)),e=u.concat(f);var o=e.filter(r=>r.Product==n&&r.SKU==t&&r.FieldName==i);$("#ReamarksName").text(i+" - Remarks");$("#FiledProductName").text(n);$("#FiledSKU").text(t);$("#PackagingProfileRemarks").modal("show");$("#RemarksTable").jqGrid("clearGridData");$("#RemarksTable").jqGrid("setGridParam",{data:o});$("#RemarksTable").trigger("reloadGrid",[{page:1}])}});$("#ViewStatus").val()=="View"&&($(".FieldRemarks").attr("readonly",!0),$(".showonlyforHGML").hide(),jQuery("#RemarksTable").jqGrid("hideCol","Action"))});$("#SavePackagingFiledRemarks").on("click",function(){var l=$.trim($("#ProjectId").val()),i=$.trim($(".FieldRemarks").val()),a=$.trim($("#ReamarksName").text().split("-")[0]),v=$.trim($("#FiledProductName").text()),y=$.trim($("#FiledSKU").text()),s=!0,r,n,t,u,f,e,h,c,o;for(s=i!=""?!0:!1,r=$("#RemarksTable").jqGrid("getRowData"),n=0,t=0;t<r.length;t++)u=parseInt(r[t].RemarksId),u>n&&(n=u);s&&(f=[],e={},e={Remarks:i,UpdatedBy:$("#UserName").val(),CreatedBy:$("#UserName").val(),RemarksId:n+1},f.push(e),h=$("#RemarksTable").jqGrid("getGridParam","data"),c=$.merge(h,f),$("#RemarksTable").jqGrid("setGridParam",{data:c}),$("#RemarksTable").trigger("reloadGrid",[{page:1}]),addedData={ProjectId:l,Product:v,SKU:y,FieldName:a,Remarks:i,UpdatedBy:$("#UserName").val(),CreatedBy:$("#UserName").val(),RemarksId:n+1},$(".FieldRemarks").val(""),savedFieldRemarks.push(addedData),o=deletedRemarksData.findIndex(n=>n.ProjectId===addedData.ProjectId&&n.Product===addedData.Product&&n.SKU===addedData.SKU&&n.FieldName===addedData.FieldName&&n.Remarks===addedData.Remarks&&parseInt(n.RemarksId)==parseInt(addedData.RemarksId)),o!==-1&&deletedRemarksData.splice(o,1))});columnModel=[{name:"Product",label:"Product",width:150,resizable:!0,ignoreCase:!0},{name:"SKU",label:"SKU",width:150,resizable:!0,ignoreCase:!0},{name:"APAC",label:"APAC",width:150,resizable:!0,ignoreCase:!0,align:"right"},{name:"EUROPE",label:"EUROPE",width:130,resizable:!0,ignoreCase:!0,align:"right"},{name:"HGML",label:"HGML",width:120,resizable:!0,ignoreCase:!0,align:"right"},{name:"HUSA",label:"HUSA",width:120,resizable:!0,ignoreCase:!0,align:"right"},{name:"INDIA",label:"INDIA",width:120,resizable:!0,ignoreCase:!0,align:"right"},{name:"METAP",label:"METAP",width:150,resizable:!0,ignoreCase:!0,classes:"wrap",align:"right"},{name:"TotalBusinessValue",label:"Total ($)",width:150,resizable:!0,ignoreCase:!0,classes:"wrap",align:"right"}];$("#business_value").jqGrid({height:"auto",rowNum:10,colModel:columnModel,pager:"",viewrecords:!0,sortorder:"asc",footerrow:!0,userDataOnFooter:!0,loadComplete:function(){var n=$(this);n.find(".jqgrow td[role='gridcell']").each(function(){var n=$(this).text().trim(),t;isNaN(n)||n===""||(t=numberWithCommas(parseFloat(n).toFixed(2)),$(this).text(t))})},gridComplete:function(){var t,r,i,n;if(adjustGridHeight(),calculateColumnTotals(),t=$("#business_value tbody tr"),r=$("#business_value tbody tr td"),t.length>1)for(i=$(t[1]).children("td"),n=0;n<i.length;n++)$(i[n]).css("width",$(r[n]).css("width"))}});$("#business_value").jqGrid("filterToolbar",{autosearch:!0,stringResult:!1,searchOnEnter:!1,defaultSearch:"cn"});$(".ui-jqgrid-bdiv").css({"max-height":"50vh"});$(".ui-jqgrid-bdiv").children("div").css({height:"30vh"});$TableHeight1=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight1>290?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-htable").css("padding-right","17px")):$(".-virtual-scroll").find(".ui-jqgrid-htable").css("padding-right","0px");$(document).on("click","#TotalBusinessValue",function(){var n=$("#ProjectId").val();$.ajax({type:"POST",url:ROOT+"NewInitiation/GetTotalBusinessValue?projectId="+n+"&ProjectType=2",success:function(n){for(var t,o,i,r=JSON.parse(n),u=$("#business_value"),s=u.jqGrid("getGridParam","colModel"),f=[],e=0;e<s.length;e++)t=s[e].name,(isNullColumn(t,r)||isZeroColumn(t,r))&&(u.jqGrid("hideCol",t),f.push(t));for(jQuery("#business_value").jqGrid("clearGridData"),$("#business_value").jqGrid().setGridParam({datatype:"local",data:r}).trigger("reloadGrid",[{page:1}]),o=$(".ui-jqgrid").width(),i=0;i<f.length;i++)o-=$("#"+u[0].id+"_"+f[i]).outerWidth();$(".ui-jqgrid-view").width(o)},error:function(){alert("Error occurred!!")}})});if($(document).ready(function(){$(statusId=="8"||statusId=="9"||statusId=="11")&&(ReformulationJQgrid.ReformulationPackagingProfile.length>0&&$("#ViewStatus").val()!="View"?($("a.-delete").show(),$("a.-edit").show(),$("#PackagingProfile").show(),$(".PackagingProfileHeadingName").hide()):ReformulationJQgrid.ReformulationPackagingProfile.length>0&&$("#ViewStatus").val()=="View"&&($(".ppDeleteHide").hide(),$("a.-edit").hide(),$("#PackagingProfile").hide(),$(".PackagingProfileHeadingName").show()));statusId!="8"&&statusId!="1"&&statusId!="9"&&statusId!="11"&&($(".ppDeleteHide").hide(),$("a.-edit").hide(),$("#PackagingProfile").hide(),$(".PackagingProfileHeadingName").show());statusId=="9"||statusId=="1"||statusId=="8"||statusId=="11"?$(".list_icon").hide():$(".list_icon").show()}),$(document).ready(function(){(statusId=="1"||statusId=="8"||statusId=="11"&&$("#ViewStatus").val()!="View")&&setInterval(()=>{validateEditDataSave(),$("#loader").hide(),$("#loader").css("visibility","hidden")},3e5)}),statusId=="9"&&$("#ViewStatus").val()!="View"&&($(".HgmlRemarks").hide(),$(".HubReview").hide(),$(".hubHidden").hide(),$(".HgmlRemarksButton").hide(),$(".prodPackData").show(),$(".InitiatorRemarks").show(),$(".forPendingStage").show(),$(".forDrafrStage").hide(),$("#Division,#Category_Reformulation,#ProjectName,#ProjectDetailsBenchMarkSampleImage").attr("disabled",!1),$("#statusHeader").text("Reformulation - Pending for Approval")),statusId=="9"&&$("#ViewStatus").val()=="View"&&($(".HgmlRemarks").hide(),$(".HubReview").hide(),$(".hubHidden").hide(),$(".HgmlRemarksButton").hide(),$(".prodPackData").show(),$(".InitiatorRemarks").show(),$(".forPendingStage").show(),$(".forDrafrStage").hide(),$("#ReformulationSubmitToManager").hide(),$("#ProductDescriptionAdd").attr("disabled",!0),$("#BusinessInformationAdd").attr("disabled",!0),$("#PackagingProfileAdd").attr("disabled",!0)),(statusId=="2"||statusId=="13"||$("#ViewStatus").val()=="View")&&($("#Initiator_Remarks").val(ReformulationJQgrid.ReformulationInitiatorRemarks[0].initiatorRemarks),$("#Initiator_Remarks").attr("readonly",!0)),statusId!="2"&&statusId!="13"&&$(".initiator_remarks_hgml").hide(),statusId=="9"&&($("#ImageName").text()!=""?$("#delete_icon_Benchmark_Samples_Image").show():$("#delete_icon_Benchmark_Samples_Image").hide()),statusId=="8"&&$("#ViewStatus").val()=="View"&&$(".forDrafrStage").hide(),statusId=="9"&&$("#ViewStatus").val()=="View"&&$("#delete_icon_Benchmark_Samples_Image").hide(),formData=new FormData,colmodels=[{name:"Image",label:"Image Name",width:200,resizable:!0,ignoreCase:!0},{name:"TableClass",label:"TableClass",width:90,resizable:!0,ignoreCase:!0,hidden:!0},{name:"",label:"Action",width:50,resizable:!0,ignoreCase:!0,formatter:function(n,t,i){var r=encodeURIComponent(i.Image);return'<div class="text-center icon_section align-items-left"><span class="action-link"><a class="btn-icon -download DownloadImage" title="Download Image" onclick=DownloadUploadedImage("'+r+'") id="DownloadImage"><i class="fas fa-download" aria-hidden="true"><\/i><\/a><\/span><span class="action-link"><a class="btn-icon -view ViewImage" onclick=ViewUploadedImage("'+r+'") target="_blank" id="ViewImage" title="View Image"><i class="fas fa-eye"><\/i><\/a><\/span><span class="action-link"><a class="btn-icon -delete DeletePopUpImage" title="Delete Image" onclick=OnRemoveImage("'+r+'","'+i.TableClass+'")><i class="fas fa-trash"><\/i><\/a><\/span><\/div>'}},],$("#uploaded_images_table").jqGrid({url:"",datatype:"local",data:[],mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,pager:"#pager_uploaded_images_table",rowNum:20,scroll:1,gridComplete:function(){var t=$("#uploaded_images_table tbody tr"),r=$("#uploaded_images_table tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"));(statusId!=8&&statusId!=9&&statusId!=1&&statusId!=11||(statusId==11||statusId==8||statusId==9||statusId==1)&&$("#ViewStatus").val()=="View")&&$(".DeletePopUpImage").hide()}}),$(".ui-jqgrid-bdiv").css({"max-height":"45vh"}),$(".ui-jqgrid-bdiv").children("div").css({"min-height":"5vh"}),$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height(),$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px")),data=[],(statusId=="6"||statusId=="12")&&($(".pmdhgmldataheader").show(),$(".AcceptButton").show(),$(".RejectedButton").hide()),statusId=="14"&&$(".hideforBrief").hide(),statusId=="11"&&($("#ReformulationSubmit").hide(),$(".forBriefDemotedStage").show()),(statusId=="3"||statusId=="5"||statusId=="16"||statusId=="6"||statusId=="12")&&($(".FieldRemarks").attr("readonly",!0),$(".showonlyforHGML").hide(),jQuery("#RemarksTable").jqGrid("hideCol","Action")),statusId=="8"||statusId=="9"||statusId=="11"||statusId=="13"||statusId=="14"||statusId=="2"||statusId=="4")for(previousStage="",i=0;i<JsonFormReformulationStagesData.ApprovalStages.length;i++)if(id=JsonFormReformulationStagesData.ApprovalStages[i].FromStage,(id==13||id==14)&&(statusId=="8"||statusId=="9"))break;else if(id==16){$(".forBriefDemotedStage").hide();$("#ReformulationSubmit").hide();$("#Button_SendToPmd").hide();$(".UnderExpforBriefDemotedStage").show();$("#Button_SendToUnderExploration").show();$(".ShowInHGMLIfUn").show();$(".hideinHGMLIfUn").hide();break}else if(id==5){$("#ReformulationSubmit").hide();$(".forBriefDemotedStage").show();break}CKEDITOR.instances.PackagingProfilePrimaryPackaging.on("change",function(){$(".Err-PackagingProfilePrimaryPackaging").hide()});$("#PackagingProfileSKU").change(function(){$(".Err-PackagingProfileSKU").hide()});$("#PMDDataUpdateRemarks").keypress(function(){$("#Error_Reformulation_PMDUpdateRemarks").hide()});$("#ViewStatus").val()=="View"&&($(".forDrafrStage").hide(),$("#ReformulationSubmitToPMD").hide(),$("#ProductDescriptionAdd").attr("disabled",!0),$("#BusinessInformationAdd").attr("disabled",!0),$(".onlyforPMD").hide(),$("#Ref_SaveAndUpdate").hide(),$(".pmdhgmldataheader").hide(),$(".hideforView").hide(),$("#BusinessInformationAdd, #PackagingProfileAdd ,#ProductDescriptionAdd").hide(),$("#AdditionalRequirementsTextBox").attr("readonly",!0));$("#ViewStatus").val()=="View"&&(statusId==11||statusId==8||statusId==9||statusId==3)&&$(".hideforView").show();$("#ViewStatus").val()=="View"&&statusId==5&&$(".pmdhgmldataheader").show();colmodels=[{name:"Action",label:"Action",width:40,resizable:!0,ignoreCase:!0,formatter:function(n,t,i){var f=i.DocumentName,r=f.split(".").pop().toLowerCase(),u={doc:"Microsoft Word Document",docx:"Microsoft Word Document",xls:"Microsoft Excel Spreadsheet",xlsx:"Microsoft Excel Spreadsheet",ppt:"Microsoft PowerPoint",pptx:"Microsoft PowerPoint",csv:"Microsoft Excel Spreadsheet"};return statusId=="3"?$("#UserName").val().toLowerCase()==i.CreatedBy.toLowerCase()?'<div class="text-left icon_section align-items-left"><span class="action-link"><a onclick=DownloadUploadedDoc('+t.rowId+')  class="btn-icon -download Report" title="Download"><i class="fas fa-download" title="Download"><\/i><\/a><\/span>'+(r in u?"":'<span class="action-link"><a onclick=ViewUploadedDoc('+t.rowId+')  class="btn-icon -view" target="_blank" title="View"><i class="fas fa-eye" title="View"><\/i><\/a><\/span>')+'<span class="action-link"><a onclick=OnDeleteUploadedDoc('+t.rowId+') class="btn-icon -delete HideDelete" title="Delete"><i class="fas fa-trash" title="Delete"><\/i><\/a><\/span><\/div> ':'<div class="text-left icon_section align-items-left"><span class="action-link"><a onclick=DownloadUploadedDoc('+t.rowId+')  class="btn-icon -download Report" title="Download"><i class="fas fa-download" title="Download"><\/i><\/a><\/span>'+(r in u?"":'<span class="action-link"><a onclick=ViewUploadedDoc('+t.rowId+')  class="btn-icon -view" target="_blank" title="View"><i class="fas fa-eye" title="View"><\/i><\/a><\/span>')+"<\/div> ":i.StatusId!="3"&&statusId!="5"&&statusId!="16"&&statusId!="6"&&statusId!="13"&&statusId!="14"&&statusId!="2"&&statusId!="4"?'<div class="text-left icon_section align-items-left"><span class="action-link"><a onclick=DownloadUploadedDoc('+t.rowId+')  class="btn-icon -download Report" title="Download"><i class="fas fa-download" title="Download"><\/i><\/a><\/span>'+(r in u?"":'<span class="action-link"><a onclick=ViewUploadedDoc('+t.rowId+')  class="btn-icon -view" target="_blank" title="View"><i class="fas fa-eye" title="View"><\/i><\/a><\/span>')+'<span class="action-link"><a onclick=OnDeleteUploadedDoc('+t.rowId+') class="btn-icon -delete HideDelete" title="Delete"><i class="fas fa-trash" title="Delete"><\/i><\/a><\/span><\/div> ':'<div class="text-left icon_section align-items-left"><span class="action-link"><a onclick=DownloadUploadedDoc('+t.rowId+')  class="btn-icon -download Report" title="Download"><i class="fas fa-download" title="Download"><\/i><\/a><\/span>'+(r in u?"":'<span class="action-link"><a onclick=ViewUploadedDoc('+t.rowId+')  class="btn-icon -view" target="_blank" title="View"><i class="fas fa-eye" title="View"><\/i><\/a><\/span>')+"<\/div> "}},{name:"DocumentName",label:"Document Name",width:150,ignoreCase:!0,resizable:!0},{name:"CreatedBy",label:"Created by",width:60,ignoreCase:!0,resizable:!0,hidden:!0},{name:"UploadedBy",label:"Uploaded by",width:60,ignoreCase:!0,resizable:!0},{name:"UploadedOn",label:"Uploaded On",width:60,ignoreCase:!0,resizable:!0},{name:"StatusId",label:"Status Id",width:60,ignoreCase:!0,resizable:!0,hidden:!0},{name:"StatusName",label:"Stage",width:80,ignoreCase:!0,resizable:!0}];$("#Grid_Supporting_Document").jqGrid({url:"",datatype:"local",data:ReformulationJQgrid.SupportingDocData,mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,pager:"#pager_Grid_Supporting_Document",rowNum:20,scroll:1,gridComplete:function(){var t=$("#Grid_Supporting_Document tbody tr"),r=$("#Grid_Supporting_Document tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"));(statusId!=8&&statusId!=9&&statusId!=1&&statusId!=11&&statusId!=3||(statusId==11||statusId==8||statusId==9||statusId==1||statusId==3)&&$("#ViewStatus").val()=="View")&&$(".HideDelete").hide()}});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"5vh"});$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"));editDocId=0;$("#Add_SupportingDocuments").on("click",function(){var f,n,i,t,e,o;var r=$("#Supportingdocuments").val(),u=$("#GetDocName").val();r!=""||u!=""?(f=$("#Supportingdocuments").prop("files"),n=SaveSupportingDocumentFile(f),n=n.replace(/"/g,""),i=[],t={},r==""&&(n=u),t={DocumentName:n,UploadedBy:$("#UserName").val(),CreatedBy:$("#UserName").val(),StatusId:statusId},editDocId==0?(i.push(t),e=$("#Grid_Supporting_Document").jqGrid("getGridParam","data"),o=$.merge(e,i),$("#Grid_Supporting_Document").jqGrid("setGridParam",{data:o}),$("#Grid_Supporting_Document").trigger("reloadGrid",[{page:1}])):($.each(t,function(n,t){$("#Grid_Supporting_Document").jqGrid("setCell",editDocId,n,t);$("#Grid_Supporting_Document").trigger("reloadGrid",[{page:1}])}),editDocId=0),$("#Supportingdocuments").val("")):($("#ErrorMsg_Document").show(),setTimeout(function(){$("#ErrorMsg_Document").hide()},2e3))});$("#Supportingdocuments").on("change",function(){$("#GetDocName").empty()});$(".ViewData").on("click",function(){$("#Document_show_popup").modal("show")});$("#ViewStatus").val()=="View"&&$(".SupprotingDoc").hide();(statusId=="2"||statusId=="13"||statusId=="4"||statusId=="14"||statusId=="5"||statusId=="6"||statusId=="12"||statusId=="7"||statusId=="16"||$("#ViewStatus").val()=="View")&&$(".forViewAnd2456127").show();(statusId=="1"||statusId=="3"||statusId=="9"||statusId=="8"||statusId=="11")&&$("#ViewStatus").val()!="View"&&$(".for139811").show();statusId=="16"&&($(".pmdhgmldataheader").show(),$(".PmdRemarks").show(),$(".buttonPMD").show(),packagingProfileData_1.length==0&&$(".packProfileRemarks").hide());statusId=="5"&&$(".buttonExp").show();statusId=="16"&&$("#ViewStatus").val()=="View"&&$(".buttonPMD").hide();$("#ViewStatus").val()=="View"&&($(".buttonExp").hide(),$("#Button_SendToUnderExploration").hide(),$(".UnderExpforBriefDemotedStage").hide(),$(".ShowInHGMLIfUn").hide());colmodels=[{name:"",label:"Action",width:30,resizable:!0,ignoreCase:!0,formatter:function(n,t,i){var r=encodeURIComponent(i.Image);return'<div class="text-center icon_section align-items-left"><span class="action-link"><a class="btn-icon -download DownloadImage" title="Download Image" onclick=DownloadUploadedImage("'+r+'") id="DownloadImage"><i class="fas fa-download" aria-hidden="true"><\/i><\/a><\/span><span class="action-link"><a class="btn-icon -view ViewImage" onclick=ViewUploadedImage("'+r+'") target="_blank" id="ViewImage" title="View Image"><i class="fas fa-eye"><\/i><\/a><\/span><span class="action-link"><a class="btn-icon -delete2 hideBenchmark" style="display:none" title="Delete Image" onclick=DeleteBenchmarkImage("'+r+'")><i class="fas fa-trash"><\/i><\/a><\/span><\/div>'}},{name:"Image",label:"Image Name",width:150,ignoreCase:!0,resizable:!0}];$("#Grid_BenchMarkImage").jqGrid({url:"",datatype:"local",data:ReformulationJQgrid.ReformulationBenchMarkImages,mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,pager:"#pager_Grid_BenchMarkImage",rowNum:20,scroll:1,gridComplete:function(){var t=$("#Grid_BenchMarkImage tbody tr"),r=$("#Grid_BenchMarkImage tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"));(statusId=="1"||statusId=="8"||statusId=="9"||statusId=="11")&&$("#ViewStatus").val()!="View"&&$(".hideBenchmark").show()}});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"5vh"});$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"));griddata_Bench=[];ReformulationJQgrid.ReformulationBenchMarkImages.length>0&&(docData={},$.each(ReformulationJQgrid.ReformulationBenchMarkImages,function(n,t){docData={Image:t.Image,UploadedBy:t.UploadedBy};griddata_Bench.push(docData)}));$("#Add_BenchMarkImages").on("click",function(){var i=!0,r=$("#ProjectDetailsBenchMarkSampleImage").prop("files"),t,n;r.length==0&&($(".ShowmsgWhenAdd").show(),setTimeout(function(){$(".ShowmsgWhenAdd").hide()},5e3),i=!1);i&&(t=SaveBenchMarkImageFile(),n="",$.each(t,function(i,r){i+1==t.length?n+=r:i==0?n=r+",":n+=r+","}),n=n.split(","),$.each(n,function(n,t){var i={};i={Image:t,UploadedBy:$("#UserName").val()};griddata_Bench.push(i)}),$("#Grid_BenchMarkImage").jqGrid("setGridParam",{data:griddata_Bench}),$("#Grid_BenchMarkImage").trigger("reloadGrid",[{page:1}]),$("#ProjectDetailsBenchMarkSampleImage").val(""))});(statusId=="1"||statusId=="8"||statusId=="9"||statusId=="11")&&$("#ViewStatus").val()!="View"&&$(".onlyforinit").show();$("#ViewStatus").val()=="View"&&($(".HideforAllView").hide(),$(".benchmarksampleimage").show());statusId=="3"&&$(".hideforView").hide();$(".daydatepicker").datepicker({autoclose:!0,viewMode:"months",startDate:"+0d",forceParse:!1,todayHighlight:!0,format:"dd-mm-yyyy"});