function statuschanged(n){var i=jQuery("#jqgrid").getRowData(n),t;return selectedrowid=n,t=$("#"+n+"status-dropdown :selected").text(),i.PMUMappingStatus=="Yes"?((t=="Completed"||t=="Locked")&&$("#ProjectStatuschange").modal("show"),!1):void 0}var previousValue="",selectedrowid="";$(document).ready(function(){function t(t){jQuery("#jqgrid").jqGrid({datatype:"local",data:t,colModel:[{name:"StatusDropdown",label:"StatusDropdown",width:100,resizable:!0,ignoreCase:!0,hidden:!0},{name:"ProjectId",label:"ProjectId",width:100,resizable:!0,ignoreCase:!0,hidden:!0},{name:"ProjectStatusId",label:"ProjectStatusId",width:100,resizable:!0,ignoreCase:!0,hidden:!0},{name:"Action",label:"Action",width:110,resizable:!0,ignoreCase:!0,classes:"text-center",search:!1,formatter:function(n,t){return'<div class="grid-icons-group -justify-center"><a id="prject-edit" href="javascript: void(0);" class="grid-icon-only prject-edit" title="Edit"><i class="fas fa-pen"><\/i><\/a><span id="prject-close" class="grid-icon-only prject-close hide" title="Close"><a class="grid-icon-only" href="javascript: void(0) ;" ><i class="fas fa-times"><\/i><\/a><a href="" class="grid-icon-only" title="Save" onclick="FetchData('+t.rowId+')"><i class="fas fa-save ml-3"><\/i><\/a><\/span><\/div>'}},{name:"ProjectCode",label:"Project Code",width:100,search:!0,resizable:!0,ignoreCase:!0},{name:"ProjectName",resizable:!0,label:"Project Name",width:100,ignoreCase:!0},{name:"Hub",resizable:!0,label:"Project Hub",width:100,ignoreCase:!0},{name:"Division",resizable:!0,label:"Project Division",width:100,ignoreCase:!0},{name:"Type",label:"Project Type",resizable:!0,width:100,ignoreCase:!0},{name:"Manager",resizable:!0,label:"Project Manager/Responsible",width:100,ignoreCase:!0},{name:"Status",resizable:!0,width:70,label:"Project Status",ignoreCase:!0,title:!1,formatter:function(n,t,i){for(var u="",r=0;r<i.StatusDropdown.length;r++)i.StatusDropdown[r]==i.Status&&(u+="<option>"+i.StatusDropdown[r]+"<\/option>");for(r=0;r<i.StatusDropdown.length;r++)i.StatusDropdown[r]!=i.Status&&(u+="<option>"+i.StatusDropdown[r]+"<\/option>");return'<span class="'+i.Class+' status_text">'+i.Status+'<\/span><div class="status-dropdown"><select id="'+t.rowId+'status-dropdown" class="form-control status-dropdown table-dropdown hide" onchange="statuschanged('+t.rowId+')">'+u+"<\/select><\/div>"}},{name:"PMUMappingStatus",resizable:!0,label:"Is Approved",width:100,ignoreCase:!0},{name:"IsActive",resizable:!0,width:70,label:"Is Active",ignoreCase:!0,title:!1,formatter:function(t,i,r){for(var f="",u=0;u<=n.length-1;u++)f+="<option>"+n[u]+"<\/option>";return'<span class="'+r.IsActiveClass+' status_text">'+r.IsActive+'<\/span><div class="status-dropdown"><select id="'+i.rowId+'IsActive-dropdown" class="form-control status-dropdown table-dropdown hide">'+f+"<\/select><\/div>"}},],width:1,rowNum:20,viewrecords:!0,scroll:!0,pager:"#pager",gridComplete:function(){var t=$("#jqgrid tbody tr"),r=$("#jqgrid tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});$("#jqgrid").jqGrid("filterToolbar",{autosearch:!0,stringResult:!0,searchOnEnter:!1,defaultSearch:"cn"});$(".ui-jqgrid-bdiv").css({"max-height":"300px"});$(".ui-jqgrid-bdiv").children("div").css({height:"auto"});var r=$(".ui-jqgrid-bdiv").find("tbody").height();r>278?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".m-table__responsive").find(".ui-jqgrid-htable").css("padding-right","17px")):$(".m-table__responsive").find(".ui-jqgrid-htable").css("padding-right","0px")}$("#ProjectId").hide();$(".projectName_error").hide();$("#projectNameList").eq(1).remove();$("#projectNameList").hide();var n=["Active","InActive"];$.ajax({"async":!0,type:"GET",dataType:"JSON",contentType:"application/json; charset=utf-8",url:ROOT+"ProjectTracker/ProjectList",success:function(n){n!=null&&(n=JSON.parse(n),t(n))},error:function(){}})});$(document).on("click",".prject-edit",function(){$(this).closest(".ui-widget-content").find(".status-dropdown").removeClass("hide");$(this).closest(".ui-widget-content").find(".status_text").addClass("hide");$(this).addClass("hide");$(this).closest(".grid-icons-group").find(".prject-close").removeClass("hide")});$(document).on("click",".prject-close",function(){$(this).closest(".ui-widget-content").find(".status-dropdown").addClass("hide");$(this).closest(".ui-widget-content").find(".status_text").removeClass("hide");$(this).addClass("hide");$(this).closest(".grid-icons-group").find(".prject-edit").removeClass("hide")});$(document).on("click",".status-dropdown",function(){previousValue=$(this).val()});$("#jqgrid tr").on("click",function(){var n=$(this).attr("id");console.log("Clicked row ID: "+n)});$("#btnCancel").click(function(){$("#"+selectedrowid+"status-dropdown :selected").val("In Progress");$("#"+selectedrowid+"status-dropdown :selected").text("In Progress")});$("#btnAccept").click(function(){$("#ProjectStatuschange").hide()});