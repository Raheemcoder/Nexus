function loadAutoComplete(){$("#LoginId").autocomplete({minLength:0,source:function(n,t){var i=new RegExp($.ui.autocomplete.escapeRegex(n.term),"i"),r=[],u=0,f=$.grep(userList,function(n){if(n.EmailId!==null&&n.EmailId!==""&&typeof n.EmailId!="undefined"){var t=n.EmailId.replace("@himalayawellness.com",""),f=n.UserId;i.test(t)&&u<10&&(r.push({value:t,id:f,username:n.Name}),u++)}return i.test(f)});t(r)},select:function(n,t){var i=-1;userList.some(function(n,r){if(n.UserId==t.item.id)return i=r,!0});i>=0&&($("#EmailId").val(userList[i].EmailId),$("#UserName").val(userList[i].Name))}})}var userList=[],applicationList=[];$(function(){$("#ApplicationList tbody tr td").each(function(){this.checked||$(".uncheck").closest("tr").addClass("uncheckedBox")});$(".field-validation-error").html("");applicationList=JSON.parse($("#ApplicationListData").val());$("#LoginId").val()!==null&&$("#LoginId").val()!==""&&typeof $("#LoginId").val()!="undefined"&&($("#LoginId").valid(),$("#LoginId").attr("readonly",!0));$("#ApplicationList thead tr").clone(!0).addClass("filters").appendTo("#ApplicationList thead");var n=$("#ApplicationList").DataTable({orderCellsTop:!0,fixedHeader:!0,initComplete:function(){var n=this.api();n.columns().eq(0).each(function(t){var i,r;console.log(t);i=$(".filters th").eq($(n.column(t).header()).index());t==1&&(r=$(i).text(),$(i).html('<input type="text" class="form-control" placeholder="'+r+'" />'));$("input",$(".filters th").eq($(n.column(t).header()).index())).off("keyup change").on("change",function(){$(this).attr("title",$(this).val());var i=this.selectionStart;n.column(t).search(this.value!=""?"({search})".replace("{search}","((("+this.value+")))"):"",this.value!="",this.value=="").draw()}).on("keyup",function(n){n.stopPropagation();$(this).trigger("change");$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})})}})});$("#DivisionId").on("change",function(){$(this).val()!==null&&$(this).val()!==""&&typeof $(this).val()!="undefined"&&$(this).val().length>0&&$.ajax({url:ROOT+"MasterManagement/CategoryList",data:{division:$(this).val().toString()},type:"GET",dataType:"JSON",success:function(n){$(".category").each(function(t,i){$(i).html("");$(i).multiselect("destroy");$.each(n,function(n,t){$(i).append('<option value="'+t.Id+'">'+t.Name+"<\/option>")})});$(".data-multiselect").multiselect({includeSelectAllOption:!0,buttonWidth:220,enableCaseInsensitiveFiltering:!0,enableFiltering:!0})}});$(".category").empty();$(".category").multiselect("rebuild")});$(".applicationlistcheckbox").on("click",function(){var n=$(this).parent().parent(),t;$(this).prop("checked")?(t=$(this).data("selectroleid"),$(n).find(".role").removeAttr("disabled"),$(n).find(".category").removeAttr("disabled"),$(n).find(".category").multiselect("destroy"),$(n).removeClass("uncheckedBox"),$(".data-multiselect").multiselect({includeSelectAllOption:!0,buttonWidth:220,enableCaseInsensitiveFiltering:!0,enableFiltering:!0})):($(n).find(".role").val("").select2(),$(n).addClass("uncheckedBox"),$(n).find(".role").attr("disabled",!0),$(n).find(".category").attr("disabled",!0),$(n).find(".category").multiselect("destroy"),$(n).find(".category").multiselect("refresh"),$(n).find(".role").siblings("span.errmsgrole").hide(),$(n).find(".category").siblings("span.errmsgCategory").hide())});$(".role").on("change",function(){var t,n;if(t=$(this),n=t.parent().parent(),$(this).val()!==null&&$(this).val()!==""&&typeof $(this).val()!="undefined"){$(n).find(".role").siblings("span.errmsgrole").hide();var i=$(this).val(),r=$(this).data("groupid"),u=applicationList.filter(n=>n.GroupId==r);$.each(u,function(n,t){$("#app_"+t.AppId).attr("data-selectroleid",i)})}else $(n).find(".role").siblings("span.errmsgrole").show()});$(".category").on("change",function(){$(".category").val()!=""?$("span.errmsgCategory").hide():$("span.errmsgCategory").show()});$("#userAdd").on("click",function(){var t=0,i=$("input[type=radio][name=IsActive]:checked").val();if($("form").valid()){var n=!0,r={UsertypeId:$("#UserTypeId").val(),LoginId:$("#LoginId").val(),UserName:$("#UserName").val(),EmailId:$("#EmailId").val(),HUB:parseInt($("#HUB").val()),Manager:$("#ManagerId").val().toString(),DivisionId:$("#DivisionId").val(),ApplicationListData:null,IsActive:i,Profile:$("#ProfileId").val().toString(),Department:$("#Department").val()},u=[];$("#ApplicationList").DataTable().$(".applicationlistcheckbox:checked").each(function(t,i){var f=$(i),r=f.parent().parent(),s=$(r).find(".role").val()===null||$(r).find(".role").val()===""||typeof $(r).find(".role").val()=="undefined"?0:parseInt($(r).find(".role").val()),h=$(r).find(".category").val()===null||$(r).find(".category").val()===""||typeof $(r).find(".category").val()=="undefined"?"":$(r).find(".category").val().toString(),e,o;s>0?($(r).find(".role").siblings("span.errmsgrole").hide(),e={},e={AppId:parseInt(f.data("appid")),GroupId:parseInt(f.data("groupid")),RoleId:parseInt($(r).find(".role").val()),Category:$(r).find(".category").length>0?$(r).find(".category").val().toString():null},u.push(e)):(n=!1,$(r).find(".role").siblings("span.errmsgrole").show());o=$(r).find("td").eq(1).text();o=="Project Brief"&&(h!=""?$(r).find(".category").siblings("span.errmsgCategory").hide():(n=!1,$(r).find(".category").siblings("span.errmsgCategory").show()))});$("#ApplicationList").DataTable().$(".applicationlistcheckbox:checked").each(function(n,t){var i=$(t),r=i.parent().parent()});i=="True"&&($("#ApplicationListTableBody tr").each(function(n,i){$(i).find('input[type="checkbox"]').prop("checked")&&t++}),t<=0&&(n=!1,$("#ApplicationList").css("border","1px solid red"),$("#Err_ApplicationList").show()));r.ApplicationListData=JSON.stringify(u);n&&$.ajax({url:ROOT+"MasterManagement/MMAddUser",type:"POST",dataType:"JSON",data:{mMUser:r},success:function(n){n.includes("Successfully")&&(window.location.href=ROOT+"MasterManagement/MMUserMaster")}})}else i=="True"&&($("#ApplicationListTableBody tr").each(function(n,i){$(i).find('input[type="checkbox"]').prop("checked")&&t++}),t<=0&&(n=!1,$("#ApplicationList").css("border","1px solid red"),$("#Err_ApplicationList").show()))});$('input[type="checkbox"]').click(function(){$(this).prop("checked")&&($("#ApplicationList").css("border","0px"),$("#Err_ApplicationList").hide())});$("#EmailId").change(function(){$("#EmailId").val()==""?$("#EmailId-error").show():$("#EmailId-Error").hide()});$("#DivisionId").change(function(){$("#DivisionId").val()==""?$("#DivisionId-error").show():$("#DivisionId-error").hide()});$("#HUB").change(function(){$("#HUB").val()==""?$("#HUB-error").show():$("#HUB-error").hide()});$("#UserTypeId").change(function(){$("#UserTypeId").val()==""?$("#UserTypeId-error").show():$("#UserTypeId-error").hide()});$("#UserTypeId").on("change",function(){if(parseInt(this.value)===1){$("#LoginId").attr("readonly",!0);$("#LoginId-error").hide();var n=$("#EmailId").val();n=n.substring(0,n.indexOf("@"));$("#LoginId").val(n)}else $("#LoginId").attr("readonly",!1),$("#LoginId").val("")});$("#EmailId").focusout(function(){if(parseInt($("#UserTypeId").val())===1){$("#LoginId").attr("readonly",!0);var n=$("#EmailId").val();n=n.substring(0,n.indexOf("@"));$("#LoginId").val(n)}else $("#LoginId").val()===""&&($("#LoginId").attr("readonly",!1),$("#LoginId").val(""))});