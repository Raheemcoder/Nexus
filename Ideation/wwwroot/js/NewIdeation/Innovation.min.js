function closeModalPopup(){$(".modal-backdrop").remove()}function ViewDetails(n,t){$.ajax({type:"POST",url:ROOT+"NewInnovation/GetInnovationData",data:{innovationId:n},dataType:"json",success:function(n){n==""?alert("Please enter the correct no"):n!=null&&(t=="submitted"?$("#innDataView").modal("show"):$("#pendDataView").modal("show"),$("#modal_innovationid").val(n.InnovationId),$("#modal_innovationtile").text(n.InnovationTitle),$("#modal_innovationtile").attr("title",n.Remarks),$("#modal_keywords").val(n.Keyword),$("#modal_keywords").attr("title",n.Keyword),$("#modal_pt").val(n.PlatformTypeName),$("#modal_pt").attr("title",n.PlatformTypeName),$("#modal_other").val(n.Other),$("#modal_other").attr("title",n.Other),$("#modal_bd").val(n.BusinessDivisionName),$("#modal_bd").attr("title",n.BusinessDivisionName),$("#modal_gs").val(n.GeographicName),$("#modal_gs").attr("title",n.GeographicName),$("#modal_st").val(n.StrategicFitName),$("#modal_st").attr("title",n.StrategicFitName),n.FilePath==null||n.FilePath==""?($("#innmodel_filedownload").hide(),$("#downloadlable").hide()):($("#innmodel_filedownload").show(),$("#downloadlable").show(),$("#innmodel_filedownload").attr("href",ROOT+"imageUpload/"+n.FilePath)),$("#modal_description").val(n.Description),$("#pmodal_innovationid").val(n.InnovationId),$("#pmodal_innovationtile").text(n.InnovationTitle),$("#pmodal_keywords").val(n.Keyword),$("#pmodal_keywords").attr("title",n.Keyword),$("#pmodal_pt").val(n.PlatformTypeId).trigger("change"),$("#pmodal_other").val(n.Other),$("#pmodal_bd").val(n.BusinessDivisionId).trigger("change"),$("#pmodal_gs").val(n.GeographicId).trigger("change"),$("#pmodal_st").val(n.StrategicFitId),$("#pmodal_st").multiselect("refresh"),n.FilePath==null||n.FilePath==""?($("#Pending_filedownload").hide(),$("#pdownloadlable").hide()):($("#Pending_filedownload").show(),$("#pdownloadlable").show(),$("#pfilename").val(n.FilePath),$("#Pending_filedownload").attr("href",ROOT+"imageUpload/"+n.FilePath)),$("#pmodal_description").val(n.Description),$("#pmodal_remarks").val(n.Remarks),$("#pmodal_remarkStatus").val(n.Remarks),$("#pmodal_remarkStatus").attr("title",n.Remarks),$("#pmodal_BusinessDivisionId_valid").hide(),$("#pmodal_GeographicId_valid").hide(),$("#pmodal_PlatformTypeId_valid").hide(),$("#pmodal_Other_valid").hide(),$("#pmodal_StrategicFitId_valid").hide(),$("#pmodal_PostedFile_valid").hide())},error:function(){alert("Error occured!!")}})}function innovationstatu(n){console.log(json.stringify(n));$.ajax({type:"post",url:root+"NewInnovation/UpdateInnovationData",data:{innovat:n},datatype:"json",success:function(n){n!=null&&console.log(n);alert("success");$("#penddataview").hide();$(".modal-backdrop").remove();window.location.reload()}})}function createsubmissiongrid(n){$.jgrid.gridUnload("#submissions_grid");$("#submissions_grid").jqGrid({url:"",datatype:"local",data:n,mtype:"GET",colModel:submissioncolmodels,loadonce:!0,viewrecords:!0,pager:"#submissions_pager",rowNum:30,scroll:1,gridComplete:function(){var t=$("#submissions_grid tbody tr"),r=$("#submissions_grid tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});$("#submissions_grid").jqGrid("filterToolbar",{autosearch:!0,stringResult:!1,searchOnEnter:!1,defaultSearch:"cn"})}function creatependingjqgrid(n){$.jgrid.gridUnload("#innovation_grid");$("#innovation_grid").jqGrid({url:"",datatype:"local",data:n,mtype:"GET",colModel:pendingcolmodels,loadonce:!0,viewrecords:!0,pager:"#innovation_pager",rowNum:30,scroll:1,gridComplete:function(){var t=$("#innovation_grid tbody tr"),r=$("#innovation_grid tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});$("#innovation_grid").jqGrid("filterToolbar",{autosearch:!0,stringResult:!1,searchOnEnter:!1,defaultSearch:"cn"})}function submitModalInnSave(){var i=$("#pmodal_innovationid").val(),r=$("#pmodal_keywords").val(),u=$("#pmodal_pt").val(),f=$("#pmodal_other").val(),e=$("#pmodal_bd").val(),o=$("#pmodal_gs").val(),s=$("#pmodal_st").val(),h=$("#pmodal_description").val(),c=$("#pmodal_remarkStatus").val(),l=$("#pfileupload").get(0),t=l.files,n=new FormData;n.append("InnovationId",i);n.append("Keyword",r);n.append("PlatformTypeId",u);n.append("Other",f);n.append("BusinessDivisionId",e);n.append("GeographicId",o);n.append("StrategicFitId",s);n.append("Description",h);n.append("Remarks",c);(t.length!="0"||t.length!=0)&&n.append("PostedFile",t[0]);$.ajax({url:ROOT+"NewInnovation/UpdateInnovationData",dataType:"JSON",type:"POST",data:n,contentType:!1,processData:!1,"async":!1,success:function(){window.location.reload()},error:function(){alert(" An Error occured!!")}})}var fileExtension,submissioncolmodels,pendingcolmodels;$(document).ready(function(){function n(n){$(n).siblings(".text-danger").html("")}$("#Keyword, #InnovationTitle, #other").on("keyup",function(){n(this)});$('#mainInnForm select, input[type="file"]').on("change",function(){n(this)});$("#pmodal_st").on("change",function(){($("#pmodal_st").val()!=""||$("#pmodal_st").val()!=null||typeof $("#pmodal_st")!="undefined")&&$("#pmodal_StrategicFitId_valid").hide()});$("#pmodal_pt").on("change",function(){($("#pmodal_pt").val()!=""||$("#pmodal_pt").val()!=null||typeof $("#pmodal_pt")!="undefined")&&$("#pmodal_PlatformTypeId_valid").hide();$("#pmodal_Other_valid").hide()});$("#pmodal_bd").on("change",function(){($("#pmodal_bd").val()!=""||$("#pmodal_bd").val()!=null||typeof $("#pmodal_bd")!="undefined")&&$("#pmodal_BusinessDivisionId_valid").hide()});$("#pmodal_gs").on("change",function(){($("#pmodal_gs").val()!=""||$("#pmodal_bd").val()!=null||typeof $("#pmodal_bd")!="undefined")&&$("#pmodal_GeographicId_valid").hide()});$("#pmodal_other").change(function(){($("#pmodal_other").val()!=""||$("#pmodal_other").val()!=null||typeof $("#pmodal_other")!="undefined")&&$("#pmodal_Other_valid").hide()});$(".multi-select").multiselect({includeSelectAllOption:!0,buttonWidth:220,maxHeight:300,enableCaseInsensitiveFiltering:!0,enableFiltering:!0});$(".others").hide();$("#regionlabel").hide();$("#region").hide();$(".download_template").attr("href",ROOT+"imageUpload/iSpace pitch templates.pptx");$("#otherplatform").change(function(){var n=$("#otherplatform").val(),t=$("#strategicfitid").val();n==16?($(".others").show(),$("#other").rules("add","required"),$("#other").val("")):($(".others").hide(),$("#other").rules("remove","required"),$("#other").val(""))});$("#geographicregion").change(function(){var n=$("#geographicregion").val();n==31||n==32?($("#regionlabel").show(),$("#region").show(),$("#region").attr("required","required")):($("#regionlabel").hide(),$("#region").hide(),$("#region").removeAttr("required"))});setTimeout(function(){$("#message2").fadeOut()},5e3)});$("#submitdata").off("click").on("click",function(){$("#mainInnForm").valid()&&($(this).prop("disabled",!0),$("#mainInnForm").submit())});$("#saveInn").click(function(){var n=!0,t={BusinessDivisionId:$("#pmodal_bd").val(),GeographicId:$("#pmodal_gs").val(),PlatformTypeId:$("#pmodal_pt").val(),Other:$("#pmodal_other").val(),StrategicFitId:$("#pmodal_st").val(),PostedFile:$("#pfileupload").val()};$.each(t,function(t,i){if(t==="Other"){var r=$("#pmodal_pt").val();r==16?(i===""||i===null)&&($("#pmodal_"+t+"_valid").show(),n=!1):$("#pmodal_"+t+"_valid").hide()}else t==="StrategicFitId"?i.length===0?($("#pmodal_"+t+"_valid").show(),n=!1):$("#pmodal_"+t+"_valid").hide():i===""||i===null?($("#pmodal_"+t+"_valid").show(),n=!1):$("#pmodal_"+t+"_valid").hide()});n&&submitModalInnSave()});fileExtension=["pdf","jpg","jpeg","png","ppt","pptx"];$(document).on("change","#fileupload",function(n){var t=!0,i=n.target.files[0].name,u=i.split(".").pop(),r=n.target.files[0].size;if(r>3145728)return alert("Please select file size of Upto 3 MB"),$(this).val(""),t=!1,!1});$(document).on("change","#pfileupload",function(n){var t;var i=!0,r=n.target.files[0].name,f=r.split(".").pop(),u=n.target.files[0].size;if(u>3145728)return alert("Please select file size of Upto 3 MB"),$(this).val(""),i=!1,!1;t=$(this).val();t===""||t===null?$("#pmodal_pfileupload_valid").show():$("#pmodal_pfileupload_valid").hide()});submissioncolmodels=[{name:"Action",label:"",resizable:!0,width:30,ignoreCase:!0,search:!1,formatter:function(n,t,i){return'<div class="d-flex justify-content-center action_icons align-items-center" title=""><a href="#" class="" title="" onclick="ViewDetails('+i.InnovationId+', \'submitted\')"><i class="fas fa-eye" aria-hidden="true" title="Eye"><\/i><\/a><\/div>'}},{name:"InnovationTitle",label:"Projects",width:120,resizable:!0,ignoreCase:!0},{name:"StatusName",label:"Status",width:50,resizable:!0,ignoreCase:!0,formatter:function(n,t,i){return i.StatusName.toLowerCase()=="approved"?'<span style="color:green !important;">'+n+"<\/span>":i.StatusName.toLowerCase()=="declined"?'<span style="color:red !important;">'+n+"<\/span>":i.StatusName.toLowerCase()=="pending"?'<span style="color:orange !important;">'+n+"<\/span>":i.StatusName.toLowerCase()=="existing"?'<span style="color:blue !important;">'+n+"<\/span>":i.StatusName.toLowerCase()=="sendback"?'<span style="color:light blue !important;">'+n+"<\/span>":"<span>"+n+"<\/span>"}},{name:"Remarks",label:"Remarks",width:90,resizable:!0,ignoreCase:!0},];$("#submitmodal").on("click",function(){$.ajax({type:"GET",url:ROOT+"NewInnovation/GetSubmittedData",dataType:"JSON",success:function(n){$("#submissionsmodal").modal("show");createsubmissiongrid(n)}})});pendingcolmodels=[{name:"Action",label:"",resizable:!0,width:30,ignoreCase:!0,search:!1,formatter:function(n,t,i){return'<div class="d-flex  justify-content-center action_icons align-items-center" title=""><a href="#" class="" title="" onclick="ViewDetails('+i.InnovationId+', \'pending\')"><i class="fas fa-eye" aria-hidden="true" title="Eye"><\/i><\/a><\/div>'}},{name:"InnovationTitle",label:"Projects",width:90,resizable:!0,ignoreCase:!0},{name:"StatusName",label:"Status",width:90,resizable:!0,ignoreCase:!0},{name:"Remarks",label:"Remarks",width:90,resizable:!0,ignoreCase:!0},];$("#pendingmodal").on("click",function(){$.ajax({type:"GET",url:ROOT+"NewInnovation/GetPendingData",dataType:"JSON",success:function(n){$("#pendingsubmissionsmodal").modal("show");creatependingjqgrid(n)}})});