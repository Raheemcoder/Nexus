function getRowDataInArray(n){var t=$(n).closest("tr"),i=$("#ProductHierarchy_Grid"),r=$(n).closest("tr.jqgrow").attr("id"),u=i.jqGrid("getCell",r,"MaterialCode"),f=i.jqGrid("getCell",r,"MaterialName"),e=i.jqGrid("getCell",r,"CreatedDate"),o=$(t).children().find(".HGMLCategory").val()!=undefined?$(t).children().find(".HGMLCategory").val():i.jqGrid("getCell",r,"HGMLCategory"),s=$(t).children().find(".HGMLSubCategory").val()!=undefined?$(t).children().find(".HGMLSubCategory").val():i.jqGrid("getCell",r,"HGMLSubCategory"),h=$(t).children().find(".ProductGroup").val()!=undefined?$(t).children().find(".ProductGroup").val():i.jqGrid("getCell",r,"ProductGroup"),c=$(t).children().find(".HGMLDivision").val()!=undefined?$(t).children().find(".HGMLDivision").val():i.jqGrid("getCell",r,"HGMLDivision"),l=$(t).children().find(".HGMLFormulation").val()!=undefined?$(t).children().find(".HGMLFormulation").val():i.jqGrid("getCell",r,"HGMLFormulation");return{MaterialCode:u,MaterialName:f,CreatedDate:e,HGMLCategory:o,HGMLSubCategory:s,ProductGroup:h,HGMLDivision:c,HGMLFormulation:l}}function LoadProductHierarchy(){var n=$("#NpdHmlDivision").val(),t=$("#NpdHgmlCategory").val(),i=$("#NpdHgmlProductGroup").val(),r=$("#NpdHgmlFormulation").val();$.ajax({type:"POST",url:ROOT+"NPDLaunchMaster/ProductHierarchyData",data:{division:n,category:t,productGroup:i,formulation:r},success:function(n){var t=JSON.parse(n);$("#ProductHierarchy_Grid").jqGrid("clearGridData");$("#ProductHierarchy_Grid").jqGrid("setGridParam",{data:t});$("#ProductHierarchy_Grid").trigger("reloadGrid",[{page:1}])},error:function(){alert("Error occured!!")}})}var NPDLaunchMasterProductHierarchyData=$.parseJSON($("#NPDLaunchMasterProductHierarchyData").val()),CategoryList=$.parseJSON($("#NPDCategoryString").val()),DivisionList=$.parseJSON($("#NPDDivisionString").val()),ProductList=$.parseJSON($("#NPDProductString").val()),FormulationList=$.parseJSON($("#NPDFormulationString").val()),SubCategoryList=$.parseJSON($("#NPDSubCategoryString").val()),UserName=$("#UserName").val(),checkedData=[],catcheckedData=[],ProductcheckedData=[],$TableHeight,subCategoryValues,divisionValues,categoryValues;colmodels=[{name:"MaterialCode",label:"Material Code",resizable:!0,ignoreCase:!0,width:100},{name:"MaterialName",label:"Material Name",resizable:!0,ignoreCase:!0,width:200},{name:"CreatedDate",label:"Material Created Date",resizable:!0,ignoreCase:!0,width:100,sorttype:"date",formatter:"date",exportcol:!1,formatoptions:{newformat:"d-m-Y"}},{name:"MaterialCreatedDate",label:"Material Created Date",resizable:!0,ignoreCase:!0,width:100,hidden:!0,exportcol:!0},{name:"ProductGroup",label:"HGML Product Group",resizable:!0,ignoreCase:!0,exportcol:!1,title:!1,formatter:function(n,t,i){var f,u,r;if(productString="",f=checkedData.findIndex(n=>n.MaterialCode==i.MaterialCode),u=f>=0?checkedData[f].ProductGroup:i.ProductGroup,u==""||u==null||u==undefined){for(r=0;r<ProductList.length;r++)productString+='<option value="'+ProductList[r].Value+'">'+ProductList[r].Value+"<\/option>";return`<div class="text-left "> 
                              <select class="form-control appearence ProductGroup data-singleselect" id=`+i.MaterialCode+`ProductGroup'> <option value="" >Select</option>`+productString+`</select>
                        </div>`}if(u!=i.ProductGroup){for(r=0;r<ProductList.length;r++)productString+=ProductList[r].Value==u?'<option value="'+ProductList[r].Value+'" selected>'+ProductList[r].Value+"<\/option>":'<option value="'+ProductList[r].Value+'">'+ProductList[r].Value+"<\/option>";return i.ProductGroup!=null?`<div class="text-left "> 
                    <select class="form-control  appearence ProductGroup data-singleselect" id=`+i.MaterialCode+`ProductGroup'>`+productString+`</select> 
                      </div>`:`<div class="text-left "> 
                    <select class="form-control  appearence ProductGroup data-singleselect" id=`+i.MaterialCode+`ProductGroup'> <option value="" >Select</option>`+productString+`</select> 
                      </div>`}for(r=0;r<ProductList.length;r++)productString+=ProductList[r].Value==i.ProductGroup?'<option value="'+ProductList[r].Value+'" selected>'+ProductList[r].Value+"<\/option>":'<option value="'+ProductList[r].Value+'">'+ProductList[r].Value+"<\/option>";return`<div class="text-left "> 
                    <select class="form-control  appearence ProductGroup data-singleselect" id=`+i.MaterialCode+`ProductGroup'>`+productString+`</select> 
                       </div>`}},{name:"HGMLSubCategory",label:"HGML Sub Category",resizable:!0,ignoreCase:!0,exportcol:!1,title:!1,formatter:function(n,t,i){var h=checkedData.findIndex(n=>n.MaterialCode==i.MaterialCode),f,e,s,c,o,u,r;if((f=h>=0?checkedData[h].HGMLSubCategory:i.HGMLSubCategory,subCategoryString="",h=checkedData.findIndex(n=>n.MaterialCode==i.MaterialCode),e=h>=0?checkedData[h].ProductGroup:i.ProductGroup,h=ProductcheckedData.findIndex(n=>n.materialCode==i.MaterialCode&&n.productgroup==e),s=h>=0?ProductcheckedData[h].subCategory:i.HGMLSubCategory,i.HGMLSubCategoryOptions!=""&&i.HGMLSubCategoryOptions!=null&&(c=i.HGMLSubCategoryOptions.split(",")),(f==""||f==null||f==undefined)&&(e==""||e==null||e==undefined))||f!=""&&f!=null&&f!=undefined&&(e==""||e==null||e==undefined))return'<div class="text-left"><select class="form-control appearence HGMLSubCategory data-singleselect" id="'+i.MaterialCode+'HGMLSubCategory"><option value="" >Select<\/option><\/select><\/div>';if(e!=null&&e!=""&&e!=undefined&&(f==""||f==null||f==undefined)&&(s==null||s=="")){for(o=c,subCategoryString='<option value="" >Select<\/option>',r=0;r<o.length;r++)subCategoryString+='<option class="SubCategoryOption" value="'+o[r]+'">'+o[r]+"<\/option>";return`<div class="text-left "> 
                           <select class="form-control appearence HGMLSubCategory data-singleselect" id=`+i.MaterialCode+`HGMLSubCategory'>`+subCategoryString+`</select> 
                           </div>`}if(e!=null&&e!=""&&e!=undefined&&i.HGMLSubCategory!=null&&i.HGMLSubCategory!=""&&i.HGMLSubCategory!=undefined&&f==i.HGMLSubCategory&&c!=undefined){for(o=c,subCategoryString='<option value="" >Select<\/option>',r=0;r<o.length;r++)subCategoryString+=i.HGMLSubCategory==o[r]?'<option class="SubCategoryOption" value="'+o[r]+'" selected>'+o[r]+"<\/option>":'<option class="SubCategoryOption" value="'+o[r]+'">'+o[r]+"<\/option>";return`<div class="text-left "> 
                           <select class="form-control appearence HGMLSubCategory data-singleselect" id=`+i.MaterialCode+`HGMLSubCategory'>`+subCategoryString+`</select> 
                           </div>`}if(f!=i.HGMLSubCategory){if(s!=""&&s!=null?u=s.split(","):(i.HGMLSubCategoryOptions!=""||i.HGMLSubCategoryOptions!=null)&&(u=c),u.length!=0)for(r=0;r<u.length;r++)subCategoryString+=u[r]===f?'<option class="SubCategoryOption" value="'+u[r]+'" selected>'+u[r]+"<\/option>":'<option class="SubCategoryOption" value="'+u[r]+'">'+u[r]+"<\/option>";return`<div class="text-left "> 
                           <select class="form-control appearence HGMLSubCategory data-singleselect" id=`+i.MaterialCode+`HGMLSubCategory'><option value="" >Select</option>`+subCategoryString+`</select> 
                           </div>`}if(s!=""&&s!=null?u=s.split(","):(i.HGMLSubCategoryOptions!=""||i.HGMLSubCategoryOptions!=null)&&(u=c),u.length!=0)for(r=0;r<u.length;r++)subCategoryString+=u[r]===f?'<option class="SubCategoryOption" value="'+u[r]+'" selected>'+u[r]+"<\/option>":'<option class="SubCategoryOption" value="'+u[r]+'">'+u[r]+"<\/option>";return`<div class="text-left "> 
                           <select class="form-control appearence HGMLSubCategory data-singleselect" id=`+i.MaterialCode+`HGMLSubCategory'><option value="" >Select</option>`+subCategoryString+`</select> 
                           </div>`}},{name:"HGMLCategory",label:"HGML Category",resizable:!0,ignoreCase:!0,exportcol:!1,title:!1,formatter:function(n,t,i){var h=checkedData.findIndex(n=>n.MaterialCode==i.MaterialCode),e,f,s,c,o,u,r;if((e=h>=0?checkedData[h].HGMLCategory:i.HGMLCategory,categoryString="",h=checkedData.findIndex(n=>n.MaterialCode==i.MaterialCode),f=h>=0?checkedData[h].HGMLSubCategory:i.HGMLSubCategory,h=catcheckedData.findIndex(n=>n.materialCode==i.MaterialCode&&n.subcategory==f),s=h>=0?catcheckedData[h].categoryValues:i.HGMLCategory,i.HGMLCategoryOptions!=""&&i.HGMLCategoryOptions!=null&&(c=i.HGMLCategoryOptions.split(",")),(e==""||e==null||e==undefined||e!=""&&e!=null&&e!=undefined)&&(f==""||f==null||f==undefined))||(f==""||f==null||f==undefined||f!=null&&f!=""&&f!=undefined)&&(i.ProductGroup==null||i.ProductGroup==""||i.ProductGroup==undefined))return'<div class="text-left"><select class="form-control appearence HGMLCategory data-singleselect" id="'+i.MaterialCode+'HGMLCategory"><option value="" >Select<\/option><\/select><\/div>';if(f!=null&&f!=""&&f!=undefined&&i.ProductGroup!=null&&i.ProductGroup!=""&&i.ProductGroup!=undefined&&(e==""||e==null||e==undefined)&&(s==null||s=="")){for(o=c,categoryString='<option value="" >Select<\/option>',r=0;r<o.length;r++)categoryString+='<option class="CategoryOption" value="'+o[r]+'">'+o[r]+"<\/option>";return`<div class="text-left "> 
                           <select class="form-control appearence HGMLCategory data-singleselect" id=`+i.MaterialCode+`HGMLCategory'>`+categoryString+`</select> 
                           </div>`}if(f!=null&&f!=""&&f!=undefined&&i.HGMLCategory!=null&&i.HGMLCategory!=""&&i.HGMLCategory!=undefined&&e==i.HGMLCategory&&i.HGMLProductgroup!=null&&i.HGMLProductgroup!=""&&i.HGMLProductgroup!=undefined){for(o=c,categoryString='<option value="" >Select<\/option>',r=0;r<o.length;r++)categoryString+=i.HGMLCategory==o[r]?'<option class="CategoryOption" value="'+o[r]+'" selected>'+o[r]+"<\/option>":'<option class="CategoryOption" value="'+o[r]+'">'+o[r]+"<\/option>";return`<div class="text-left "> 
                           <select class="form-control appearence HGMLCategory data-singleselect" id=`+i.MaterialCode+`HGMLCategory'>`+categoryString+`</select> 
                           </div>`}if(e!=i.HGMLCategory){if(s!=""&&s!=null?u=s.split(","):(i.HGMLCategoryOptions!=""||i.HGMLCategoryOptions!=null)&&(u=c),u.length!=0)for(r=0;r<u.length;r++)categoryString+=u[r]===e?'<option class="CategoryOption" value="'+u[r]+'" selected>'+u[r]+"<\/option>":'<option class="CategoryOption" value="'+u[r]+'">'+u[r]+"<\/option>";return`<div class="text-left "> 
                           <select class="form-control appearence HGMLCategory data-singleselect" id=`+i.MaterialCode+`HGMLCategory'><option value="" >Select</option>`+categoryString+`</select> 
                           </div>`}if(s!=""&&s!=null?u=s.split(","):(i.HGMLCategoryOptions!=""||i.HGMLCategoryOptions!=null)&&(u=c),u.length!=0)for(r=0;r<u.length;r++)categoryString+=u[r]===e?'<option class="CategoryOption" value="'+u[r]+'" selected>'+u[r]+"<\/option>":'<option class="CategoryOption" value="'+u[r]+'">'+u[r]+"<\/option>";return`<div class="text-left "> 
                           <select class="form-control appearence HGMLCategory data-singleselect" id=`+i.MaterialCode+`HGMLCategory'><option value="" >Select</option>`+categoryString+`</select> 
                           </div>`}},{name:"HGMLDivision",label:"HGML Division",resizable:!0,ignoreCase:!0,width:120,exportcol:!1,title:!1,formatter:function(n,t,i){var c=checkedData.findIndex(n=>n.MaterialCode==i.MaterialCode),s="",c=checkedData.findIndex(n=>n.MaterialCode==i.MaterialCode),e,f,h,l,o,u,r;if((e=c>=0?checkedData[c].HGMLDivision:i.HGMLDivision,c=checkedData.findIndex(n=>n.MaterialCode==i.MaterialCode),f=c>=0?checkedData[c].HGMLSubCategory:i.HGMLSubCategory,c=catcheckedData.findIndex(n=>n.materialCode==i.MaterialCode&&n.subcategory==f),h=c>=0?catcheckedData[c].divisionValues:i.HGMLDivision,i.HGMLDivisionOptions!=""&&i.HGMLDivisionOptions!=null&&(l=i.HGMLDivisionOptions.split(",")),(e==null||e==""||e==undefined||e!=null&&e!=""&&e!=undefined)&&(f==null||f==""||f==undefined))||(f==""||f==null||f==undefined||f!=null&&f!=""&&f!=undefined)&&(i.ProductGroup==null||i.ProductGroup==""||i.ProductGroup==undefined))return'<div class="text-left "><select class="form-control appearence HGMLDivision data-singleselect" id="'+i.MaterialCode+'HGMLDivision"><option value="" >Select<\/option><\/select><\/div>';if(f!=null&&f!=""&&typeof f!="undefined"&&i.ProductGroup!=null&&i.ProductGroup!=""&&i.ProductGroup!=undefined&&(e==""||e==null||e==undefined)&&(h==null||h=="")){for(o=l,s='<option value="" >Select<\/option>',r=0;r<o.length;r++)s+='<option class="DivisionOption" value="'+o[r]+'">'+o[r]+"<\/option>";return`<div class="text-left "> 
                           <select class="form-control appearence HGMLDivision data-singleselect" id=`+i.MaterialCode+`HGMLDivision'>`+s+`</select> 
                           </div>`}if(f!=null&&f!=""&&typeof f!="undefined"&&i.HGMLDivision!=null&&i.HGMLDivision!=""&&i.HGMLDivision!=undefined&&e==i.HGMLDivision&&i.HGMLProductgroup!=null&&i.HGMLProductgroup!=""&&i.HGMLProductgroup!=undefined){for(o=l,s='<option value="" >Select<\/option>',r=0;r<o.length;r++)s+=i.HGMLDivision==o[r]?'<option class="DivisionOption" value="'+o[r]+'" selected>'+o[r]+"<\/option>":'<option class="DivisionOption" value="'+o[r]+'">'+o[r]+"<\/option>";return`<div class="text-left "> 
                           <select class="form-control appearence HGMLDivision data-singleselect" id=`+i.MaterialCode+`HGMLDivision'>`+s+`</select> 
                           </div>`}if(e!=i.HGMLDivision){if(h!=""&&h!=null?u=h.split(","):(i.HGMLCategoryOptions!=""||i.HGMLCategoryOptions!=null)&&(u=l),u.length!=0)for(r=0;r<u.length;r++)s+=u[r]===e?'<option class="DivisionOption" value="'+u[r]+'" selected>'+u[r]+"<\/option>":'<option class="DivisionOption" value="'+u[r]+'">'+u[r]+"<\/option>";return`<div class="text-left "> 
                           <select class="form-control appearence HGMLDivision data-singleselect" id=`+i.MaterialCode+`HGMLDivision'><option value="" >Select</option>`+s+`</select> 
                           </div>`}if(h!=""&&h!=null?u=h.split(","):(i.HGMLCategoryOptions!=""||i.HGMLCategoryOptions!=null)&&(u=l),u.length!=0)for(r=0;r<u.length;r++)s+=u[r]===e?'<option class="DivisionOption" value="'+u[r]+'" selected>'+u[r]+"<\/option>":'<option class="DivisionOption" value="'+u[r]+'">'+u[r]+"<\/option>";return`<div class="text-left "> 
                           <select class="form-control appearence HGMLDivision data-singleselect" id=`+i.MaterialCode+`HGMLDivision'><option value="" >Select</option>`+s+`</select> 
                           </div>`}},{name:"HGMLFormulation",label:"HGML Product Format",resizable:!0,ignoreCase:!0,exportcol:!1,title:!1,formatter:function(n,t,i){var u="",e=checkedData.findIndex(n=>n.MaterialCode==i.MaterialCode),f,r;if(f=e>=0?checkedData[e].HGMLFormulation:i.HGMLFormulation,f==""||f==null||f==undefined){for(u+="<option value=>select<\/option>",r=0;r<FormulationList.length;r++)u+='<option value="'+FormulationList[r].Value+'">'+FormulationList[r].Value+"<\/option>";return'<div class="text-left "><select class="form-control appearence HGMLFormulation data-singleselect" id="'+i.MaterialCode+'HGMLFormulation"> '+u+"<\/option><\/select><\/div>"}if(f!=i.HGMLFormulation){for(r=0;r<FormulationList.length;r++)u+=FormulationList[r].Value==f?'<option value="'+FormulationList[r].Value+'" selected>'+FormulationList[r].Value+"<\/option>":'<option value="'+FormulationList[r].Value+'">'+FormulationList[r].Value+"<\/option>";return i.HGMLFormulation!=null?`<div class="text-left "> 
                    <select class="form-control  appearence HGMLFormulation data-singleselect" id=`+i.MaterialCode+`HGMLFormulation'>`+u+`</select> 
                       </div>`:`<div class="text-left "> 
                    <select class="form-control  appearence HGMLFormulation data-singleselect" id=`+i.MaterialCode+`HGMLFormulation'> <option value="" >Select</option>`+u+`</select> 
                       </div>`}for(r=0;r<FormulationList.length;r++)u+=FormulationList[r].Value==i.HGMLFormulation?'<option value="'+FormulationList[r].Value+'" selected>'+FormulationList[r].Value+"<\/option>":'<option value="'+FormulationList[r].Value+'">'+FormulationList[r].Value+"<\/option>";return`<div class="text-left "> 
                    <select class="form-control  appearence HGMLFormulation data-singleselect" id=`+i.MaterialCode+`HGMLFormulation'>`+u+`</select> 
                       </div>`}},{name:"ProductGroup",label:"HGML Product Group",resizable:!0,ignoreCase:!0,hidden:!0,exportcol:!0},{name:"HGMLSubCategory",label:"HGML Sub Category",resizable:!0,ignoreCase:!0,hidden:!0,exportcol:!0},{name:"HGMLCategory",label:"HGML Category",resizable:!0,ignoreCase:!0,hidden:!0,exportcol:!0},{name:"HGMLDivision",label:"HGML Division",resizable:!0,ignoreCase:!0,width:120,hidden:!0,exportcol:!0},{name:"HGMLFormulation",label:"HGML Product Format",resizable:!0,ignoreCase:!0,hidden:!0,exportcol:!0},{name:"HGMLCategoryOptions",label:"HGMLCategoryOptions",resizable:!0,ignoreCase:!0,hidden:!0,exportcol:!1},{name:"HGMLDivisionOptions",label:"HGMLDivisionOptions",resizable:!0,ignoreCase:!0,hidden:!0,exportcol:!1},{name:"HGMLSubCategoryOptions",label:"HGMLSubCategoryOptions",resizable:!0,ignoreCase:!0,hidden:!0,exportcol:!1},];$("#ProductHierarchy_Grid").jqGrid({url:"",datatype:"local",data:NPDLaunchMasterProductHierarchyData,mtype:"GET",colModel:colmodels,loadonce:!0,rowNum:20,viewrecords:!0,pager:"#pager_ProductHierarchy_Grid",rownumbers:!1,scroll:!0,gridComplete:function(){var t=$("#ProductHierarchy_Grid tbody tr"),r=$("#ProductHierarchy_Grid tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"));$("[data-singleselect]").select2();$(".data-singleselect").select2()}});$("#ProductHierarchy_Grid").jqGrid("filterToolbar",{autosearch:!0,stringResult:!1,searchOnEnter:!1,defaultSearch:"cn"});$(".ui-jqgrid-bdiv").css({"max-height":"45vh"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"10vh"});$TableHeight=$(".ui-jqgrid-bdiv").find("tbody").height();$TableHeight>330?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","17px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hbox").css("padding-right","0px"));$(".data-datepicker").datepicker({format:"dd-mm-yyyy",todayHighlight:!0,autoclose:!0});$(".date-datepicker-year").datepicker({format:"yyyy",viewMode:"years",minViewMode:"years",autoclose:!0});$(".year_dropdown").css("display","none");$("input[name='chkPinNo']").click(function(){$("#chkNo").is(":checked")?$(".year_dropdown").css("display","block"):$("#chkYes").is(":checked")?$(".year_dropdown").css("display","block"):$("#chkAll").is(":checked")&&$(".year_dropdown").css("display","none")});setTimeout(function(){$("#message_alert").fadeOut("slow")},5e3);$("#ProductHierarchy_Grid tr td:nth-child(1)").click(function(){$("#ProductHierarchy_Grid tr").removeClass("active");$(this).parent().addClass("show_edit").siblings().removeClass("show_edit")});$(".save_edit1").hide();$(".close_edit").click(function(){$("#ProductHierarchy_Grid tr td:nth-child(1)").click(function(){$("#ProductHierarchy_Grid tr").removeClass("active");$(this).parent().addClass("show_edit").siblings().removeClass("show_edit")});$(".show_edit select.save_edit").show();$(".value_close").hide()});$(".time_cross").click(function(){$("#ProductHierarchy_Grid tr td:nth-child(1)").click(function(){$("#ProductHierarchy_Grid tr").removeClass("active");$(this).parent().removeClass("show_edit").siblings().removeClass("show_edit")});$(".close_edit, .value_close").show();$(".value_close").show();$(".show_edit select.save_edit").hide();$(".save_edit1").hide();$(".save_edit").hide()});$(".multiselect").multiselect({includeSelectAllOption:!0,buttonWidth:220,maxHeight:300,enableCaseInsensitiveFiltering:!0,enableFiltering:!0});$(document).ready(function(){$("#purpose").on("change",function(){this.value=="business"?$(".year_dropdown").show():this.value=="rd"?$(".year_dropdown").show():$(".year_dropdown").hide()});$("#purpose1").on("change",function(){this.value=="details"?($("#so_number").hide(),$("#serial_number, #assign_engineer").show()):($("#so_number").show(),$("#serial_number").hide())})});subCategoryValues="";$("body").on("change",".ProductGroup",function(){var t;subCategoryValues="";var n=$(this).closest("tr"),i=$("#ProductHierarchy_Grid"),r=$(this).closest("tr.jqgrow").attr("id"),u=$(n).children().find(".ProductGroup").val()!=undefined?$(n).children().find(".ProductGroup").val():i.jqGrid("getCell",r,"ProductGroup");$.ajax({type:"POST",url:ROOT+"NPDLaunchMaster/GetOtherMasterInfoByProductGroup",data:{ProductGroup:u},dataType:"json","async":!1,success:function(t){$(n).find("option.SubCategoryOption").remove();$(n).find("option.DivisionOption").remove();$(n).find("option.CategoryOption").remove();$.each(t,function(i){i==0?subCategoryValues=t[i].HGMLSubCategory:subCategoryValues+=","+t[i].HGMLSubCategory;var r='<option class="SubCategoryOption" value="'+t[i].HGMLSubCategory+'">'+t[i].HGMLSubCategory+"<\/option>";$(n).children().find(".HGMLSubCategory").append(r)})},error:function(){alert("Error occured!!")}});var n=$(this).closest("tr"),i=$("#ProductHierarchy_Grid"),r=$(this).closest("tr.jqgrow").attr("id"),f=i.jqGrid("getCell",r,"MaterialCode"),e={materialCode:f,subCategory:subCategoryValues,productgroup:u};CatrowData=e;t=ProductcheckedData.findIndex(n=>n.MaterialCode===CatrowData.MaterialCode);t!==-1?ProductcheckedData[t]=CatrowData:ProductcheckedData.push(CatrowData);rowData=getRowDataInArray(this);t=checkedData.findIndex(n=>n.MaterialCode===rowData.MaterialCode);t!==-1?checkedData[t]=rowData:checkedData.push(rowData)});divisionValues="";categoryValues="";$("body").on("change",".HGMLSubCategory",function(){var t;divisionValues="";categoryValues="";var n=$(this).closest("tr"),i=$("#ProductHierarchy_Grid"),r=$(this).closest("tr.jqgrow").attr("id"),u=$(n).children().find(".HGMLSubCategory").val()!=undefined?$(n).children().find(".HGMLSubCategory").val():i.jqGrid("getCell",r,"HGMLSubCategory"),f=$(n).children().find(".ProductGroup").val()!=undefined?$(n).children().find(".ProductGroup").val():i.jqGrid("getCell",r,"ProductGroup");$.ajax({type:"POST",url:ROOT+"NPDLaunchMaster/GetOtherMasterInfoBySubCateg",data:{SubCategory:u,ProductGroup:f},dataType:"json","async":!1,success:function(t){$(n).find("option.DivisionOption").remove();$(n).find("option.CategoryOption").remove();$.each(t.NPDDivisionInfo,function(i){i==0?divisionValues=t.NPDDivisionInfo[i].HGMLDivision:divisionValues+=","+t.NPDDivisionInfo[i].HGMLDivision;var r='<option class="DivisionOption" value="'+t.NPDDivisionInfo[i].HGMLDivision+'">'+t.NPDDivisionInfo[i].HGMLDivision+"<\/option>";$(n).children().find(".HGMLDivision").append(r)});$.each(t.NPDCategoryInfo,function(i){i==0?categoryValues=t.NPDCategoryInfo[i].HGMLCategory:categoryValues+=","+t.NPDCategoryInfo[i].HGMLCategory;var r='<option class="CategoryOption" value="'+t.NPDCategoryInfo[i].HGMLCategory+'">'+t.NPDCategoryInfo[i].HGMLCategory+"<\/option>";$(n).children().find(".HGMLCategory").append(r)})},error:function(){alert("Error occured!!")}});var n=$(this).closest("tr"),i=$("#ProductHierarchy_Grid"),r=$(this).closest("tr.jqgrow").attr("id"),e=i.jqGrid("getCell",r,"MaterialCode"),o={materialCode:e,categoryValues:categoryValues,divisionValues:divisionValues,subcategory:u};CatrowData=o;t=catcheckedData.findIndex(n=>n.MaterialCode===CatrowData.MaterialCode);t!==-1?catcheckedData[t]=CatrowData:catcheckedData.push(CatrowData);rowData=getRowDataInArray(this);t=checkedData.findIndex(n=>n.MaterialCode===rowData.MaterialCode);t!==-1?checkedData[t]=rowData:checkedData.push(rowData)});$("body").on("change",".HGMLFormulation,.HGMLDivision,.HGMLCategory",function(){rowData=getRowDataInArray(this);var n=checkedData.findIndex(n=>n.MaterialCode===rowData.MaterialCode);n!==-1?checkedData[n]=rowData:checkedData.push(rowData)});$("#ExcelDownload").click(function(){var i=$("#ProductHierarchy_Grid"),n=$("#ProductHierarchy_Grid").jqGrid("getGridParam","data");if(n.length==0)alert("No data in Grid");else try{$("#ProductHierarchy_Grid").jqGrid("exportToExcel",{includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,fileName:"ProductHierarchy.xlsx",maxlength:80,exportcol:!0})}catch(t){alert(t)}});$("#SearchProductHierarchyData").on("click",function(){LoadProductHierarchy()});$(".SaveProductHierarchyData").on("click",function(){var n=[],t,i;checkedData.length!=0&&checkedData.forEach(function(t){n.push(t.MaterialCode)});checkedData.length==0?alert("There are no changes to save!"):(t=n.join(", "),i="Are you sure you want to save the <b>"+t+"<\/b> material details, The saved Hierarchy information will be displayed in Material list.",confirm(i,function(){$("#ProductHierarchyData").val(JSON.stringify(checkedData));document.getElementById("ProductHierarchy_Form_Submit").submit();Selectedmaterialcode=""}))});