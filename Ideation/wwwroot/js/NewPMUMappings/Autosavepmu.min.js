function submitAutoData(n,t){var i=new FormData,r=[];$("#pmumapping").dataTable().$("tr").each(function(n,t){var l=$(t).find("[data-wbsheader]").attr("data-wbsheader"),b=$(t).attr("data-headerid"),a=$(t).find("[data-task]").attr("data-task"),h=$(t).find("[data-dependency]").val(),e=$(t).find("[data-duration]").val(),o=$(t).find("[data-startdate]").val(),s=$(t).find("[data-enddate]").val(),g=$(t).find("[data-percentage]").val()!==null&&$(t).find("[data-percentage]").val()!==""&&typeof $(t).find("[data-percentage]").val()!="undefined"?parseFloat($(t).find("[data-percentage]").val()):0,c=$(t).find("[data-resources]").val(),nt=$(t).find("[data-remarks]").val(),f=$("#ProjectId").val(),u=$(t).find("[data-slno]").attr("data-slno"),tt=$(t).find("[data-files]")[0].files,v=$(t).attr("data-relationid"),it=$(t).attr("data-milestonestatus"),y=[],k=[],d,p,w;c!==null&&c!==""&&typeof c!="undefined"&&$.each(c.split(","),function(n,t){var i=t.split("-"),r,e;i.length>1&&(r=autocompleteDrodownArray.Resources.findIndex(function(n){return n.UserName===i[1].replace(" ","")}),r>=0&&(e={ProjectId:parseInt(f),RowNum:parseInt(u),ResourceName:i[1].replace(" ","")},k.push(e)))});b!==null&&b!==""&&typeof b!="undefined"&&l!==null&&l!==""&&typeof l!="undefined"&&e!==null&&e!==""&&typeof e!="undefined"&&o!==null&&o!==""&&typeof o!="undefined"&&s!==null&&s!==""&&typeof s!="undefined"&&($.each(tt,function(n,t){var r,o,e;t.size>0&&(r=moment().valueOf(),i.append(f+"_"+u+"_"+(n+1)+"_"+r,t),o=t.name.split(".").pop(),e={ProjectId:parseInt(f),RowNum:parseInt(u),DocumentName:$.trim(f+"_"+u+"_"+(n+1)+"_"+r+t.name).replace(" ","")},y.push(e))}),p=deletedDocumentsArray.filter(function(n){return n.SlNo===parseInt(u)}),w={WBSHeader:parseInt(l),Task:0,RelationId:0,Dependency:h,Duration:parseInt(e),StartDate:moment(o,"DD/MM/YYYY").format("YYYY-MM-DD"),EndDate:moment(s,"DD/MM/YYYY").format("YYYY-MM-DD"),Percentage:parseFloat(g),Resources:c,Remarks:nt,ProjectId:parseInt(f),RowNum:parseInt(u),DocumentArray:y,DependencyArray:[],DeletedDocumentsArray:p,ResourcesArray:k,MileStoneStatus:it,VersionRemarks:$("#VersionRemarks").val()},r.push(w));v!==null&&v!==""&&typeof v!="undefined"&&a!==null&&a!==""&&typeof a!="undefined"&&e!==null&&e!==""&&typeof e!="undefined"&&o!==null&&o!==""&&typeof o!="undefined"&&s!==null&&s!==""&&typeof s!="undefined"&&(d=[],$.each(tt,function(n,t){var r,o,e;t.size>0&&(r=moment().valueOf(),i.append(f+"_"+u+"_"+(n+1)+"_"+r,t),o=t.name.split(".").pop(),e={ProjectId:parseInt(f),RowNum:parseInt(u),DocumentName:$.trim(f+"_"+u+"_"+(n+1)+"_"+r+t.name).replace(" ","")},y.push(e))}),h!==null&&h!==""&&typeof h!="undefined"&&$.each(h.split(","),function(n,t){var i=t.indexOf("F")>-1?t.indexOf("F"):t.indexOf("S"),r=t.substr(0,i),e=t.substr(i,2),o=t.indexOf("+")>-1?t.indexOf("+"):t.indexOf("-"),s=t.substr(o,t.length);d.push({RowNum:parseInt(u),ProjectId:parseInt(f),Depedency:parseInt(r),DependencyType:e,LeadOrLag:parseInt(s)})}),p=deletedDocumentsArray.filter(function(n){return n.SlNo===parseInt(u)}),w={WBSHeader:0,Task:parseInt(a),RelationId:parseInt(v),Dependency:h,Duration:parseInt(e),StartDate:moment(o,"DD/MM/YYYY").format("YYYY-MM-DD"),EndDate:moment(s,"DD/MM/YYYY").format("YYYY-MM-DD"),Percentage:parseFloat(g),Resources:c,Remarks:nt,ProjectId:parseInt(f),RowNum:parseInt(u),DocumentArray:y,DependencyArray:d,DeletedDocumentsArray:p,ResourcesArray:k,MileStoneStatus:it,VersionRemarks:$("#VersionRemarks").val()},r.push(w))});i.append("PMUMappings",JSON.stringify(r));i.append("PMUVersion",n);i.append("IsLatest",t);i.append("IsWeekendExcluded",$("#weekend-switching option:selected").val());i.append("HubId",parseInt($("#Hub option:selected").val()));i.append("ProjectId",$("#ProjectId").val());$.ajax({url:ROOT+"Master/AutoSavePMUMappings",type:"POST",data:i,contentType:!1,processData:!1,success:function(){return $("#VersionRemarks").val(""),!1},error:function(n,t,i){alert(i)}})}$(document).ready(function(){setInterval(()=>{var n=!0,t=!0,i=$("#pmumapping").dataTable().$("[data-headerid]").length;i===0&&(n=!1);$("#pmumapping").dataTable().$("[data-headerid]").each(function(i,r){var h=$(r).attr("data-headerid"),u=parseInt($(r).find("[data-slno]").attr("data-slno")),s=$("#row_"+u).find("[data-wbsheader]").attr("data-wbsheader"),f,e,o,c;if((s===null||s===""||typeof s=="undefined")&&(n=!1),f=$("#row_"+u).find("[data-duration]").val(),(f===null||f===""||typeof f=="undefined")&&(n=!1),e=$("#row_"+u).find("[data-startdate]").val(),(e===null||e===""||typeof e=="undefined")&&(n=!1),o=$("#row_"+u).find("[data-enddate]").val(),(o===null||o===""||typeof o=="undefined")&&(n=!1),c=$("#pmumapping").dataTable().$('[data-relationid="'+h+'"]').length,c===0)return t=!1,!1;$("#pmumapping").dataTable().$('[data-relationid="'+h+'"]').each(function(i,r){var u=parseInt($(r).find("[data-slno]").attr("data-slno")),h=$("#row_"+u).find("[data-task]").attr("data-task"),f,e,o,s;(h===null||h===""||typeof h=="undefined")&&(t=!1);f=$("#row_"+u).find("[data-duration]").val();(f===null||f===""||typeof f=="undefined")&&(t=!1);e=$("#row_"+u).find("[data-startdate]").val();(e===null||e===""||typeof e=="undefined")&&(t=!1);o=$("#row_"+u).find("[data-enddate]").val();(o===null||o===""||typeof o=="undefined")&&(t=!1);$("#ApprovedLatestVersion").val()!==null&&$("#ApprovedLatestVersion").val()!==""&&typeof $("#ApprovedLatestVersion").val()!="undefined"&&(s=$("#row_"+u).find("[data-resources]").val(),(s===null||s===""||typeof s=="undefined")&&(n=!1))})});n&&t&&submitAutoData("",!1);$("#loader").hide();$("#loader").css("visibility","hidden")},3e5)});