function LoadGridData(){$.ajax({type:"GET",url:ROOT+"RDMS/GetPlantList",data:{},"async":!1,success:function(n){createJQGrid(n)},error:function(n){alert(n)}})}function createJQGrid(n){$.jgrid.gridUnload("#PlantMaster_grid");$("#PlantMaster_grid").jqGrid({url:"",datatype:"local",data:n,mtype:"GET",colModel:colmodels,loadonce:!0,viewrecords:!0,pager:"#PlantMaster_pager",rowNum:30,scroll:1,gridComplete:function(){var t=$("#PlantMaster_grid tbody tr"),r=$("#PlantMaster_grid tbody tr td"),n;if(t.length>1)for(n=$(t[1]).children("td"),i=0;i<n.length;i++)$(n[i]).css("width",$(r[i]).css("width"))}});$("#PlantMaster_grid").jqGrid("filterToolbar",{autosearch:!0,stringResult:!1,searchOnEnter:!1,defaultSearch:"cn"});$(".ui-jqgrid-bdiv").css({"max-height":"calc(100vh - 240px)"});$(".ui-jqgrid-bdiv").children("div").css({"min-height":"0vh"});var t=$(".ui-jqgrid-bdiv").find("tbody").height();t>130?($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hdiv").css("padding-right","4px")):($(".ui-jqgrid").find(".ui-jqgrid-bdiv").css("overflow","auto"),$(".-virtual-scroll").find(".ui-jqgrid-hdiv").css("padding-right","0px"))}function ViewData(n,t,i){var r=t+"["+i+"]";$.ajax({type:"GET",url:ROOT+"RDMS/GetPlantListById",data:{plantId:n},"async":!1,success:function(n){$(".PlantId_text").html("View Plant - "+r);$("#View_EmailId").text(n[0].EmailId);$("#View_Planttype").text(n[0].PlantType);$("#View_PhoneNumm").text(n[0].PhoneNo);$("#View_Address").text(n[0].Address);$("#View_City").text(n[0].City);$("#View_State").text(n[0].State);$("#View_Status").text(n[0].Status);$("#ViewProjectData").modal("show")},error:function(n){alert(n)}})}function FetchData(n){var i=jQuery("#PlantMaster_grid").getRowData(n),r=i.PlantId,t=$("#"+n+"status-dropdown :selected").text();t=t.toLowerCase()=="active"?1:0;window.location.href=ROOT+"RDMS/UpdatePlantMaster?PlantId="+r+"&Status="+t}function exportToExcel(n,t){$("#"+n).jqGrid("exportToExcel",{includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,fileName:t+".xlsx",maxlength:200})}var isExport=!1,roleName=$("#role").val(),statuslist=JSON.parse($("#StatusList").val()),IsActiveList=statuslist.map(function(n){return n.Text}),colmodels;$(document).ready(function(){$("#btnSearch").trigger("click");$("#StatusId").val("1").trigger("change");setTimeout(function(){$(".aler_dismissal_close").trigger("click")},5e3);roleName.toLowerCase()=="view role"?$(".hidelegend").hide():$(".hidelegend").show()});colmodels=[{name:"Action",label:"Action",resizable:!0,width:30,ignoreCase:!0,sortable:!1,search:!1,exportcol:!1,formatter:function(n,t,i){return roleName.trim().toLowerCase()!="view role"?'<div class="action_icons grid-icons-group -justify-center"><a id="prject-edit" href="javascript:void(0);" class="grid-icon-only prject-edit" title="Edit"><i class="fas fa-pen color-eye"><\/i><\/a><span id="prject-close" class="grid-icon-only prject-close hide" title="Close"><a class="grid-icon-only" href="javascript:void(0);"><i class="fas fa-times-circle color-history"><\/i><\/a><a href="javascript:void(0);" class="grid-icon-only" title="Save" onclick="FetchData('+t.rowId+')"><i class="fas fa-save color-file"><\/i><\/a><\/span><a href="javascript:void(0);" class="grid-icon-only ml-2" title="View" onclick="ViewData('+i.PlantId+", '"+i.PlantCode+"', '"+i.PlantName+'\')"><i class="fas fa-info color-info"><\/i><\/a>':'<div class="action_icons grid-icons-group -justify-center"><a href="javascript:void(0);" class="grid-icon-only ml-2" title="View" onclick="ViewData('+i.PlantId+", '"+i.PlantCode+"', '"+i.PlantName+'\')"><i class="fas fa-info color-info"><\/i><\/a>'}},{name:"PlantId",label:"Plant Id",resizable:!0,width:25,ignoreCase:!0,exportCol:!0,hidden:!0},{name:"PlantCode",label:"Plant Code",resizable:!0,width:25,ignoreCase:!0,exportCol:!0},{name:"PlantName",label:"Plant Name",width:80,resizable:!0,ignoreCase:!0,exportCol:!0},{name:"DisplayName",label:"Display Name",width:80,resizable:!0,ignoreCase:!0,exportCol:!0},{name:"PlantType",label:"Plant Type",width:35,resizable:!0,ignoreCase:!0,exportCol:!0},{name:"State",label:"State Name",width:50,resizable:!0,ignoreCase:!0,exportCol:!0},{name:"City",label:"City Name",width:50,resizable:!0,ignoreCase:!0,exportCol:!0},{name:"Status",label:"Status",width:50,resizable:!0,ignoreCase:!0,exportcol:!1,formatter:function(n,t,i){for(var u="",r=0;r<=IsActiveList.length-1;r++)u+="<option>"+IsActiveList[r]+"<\/option>";return'<span class="'+i.StatusClass+' status_text">'+i.Status+'<\/span><div class="status-dropdown"><select id="'+t.rowId+'status-dropdown" class="form-control status-dropdown table-dropdown hide">'+u+"<\/select><\/div>"}},{name:"StatusName",label:"Status",width:50,resizable:!0,ignoreCase:!0,exportcol:!0,hidden:!0}];$("#btnSearch").on("click",function(){var t=$("#PlantCode").val(),n=$("#StatusId").val();n==""&&(n=1);$.ajax({type:"GET",url:ROOT+"RDMS/GetPlantList",data:{plantCode:t,Status:n},"async":!1,success:function(n){createJQGrid(n)},error:function(n){alert(n)}})});$("#btnrefresh").on("click",function(){$("#PlantCode").val("").trigger("change");$("#StatusId").val("1").trigger("change");$("#btnSearch").trigger("click")});$(document).on("click",".prject-edit",function(){var n=$(this).closest(".ui-widget-content"),t;n.find(".status-dropdown").removeClass("hide");n.find(".status_text").addClass("hide");t=n.find(".status_text").text().trim();n.find(".status-dropdown").val(t);$(this).addClass("hide");$(this).closest(".grid-icons-group").find(".prject-close").removeClass("hide")});$(document).on("click",".prject-close",function(){$(this).closest(".ui-widget-content").find(".status-dropdown").addClass("hide");$(this).closest(".ui-widget-content").find(".status_text").removeClass("hide");$(this).addClass("hide");$(this).closest(".grid-icons-group").find(".prject-edit").removeClass("hide")});$("#exceldownload").click(function(){isExport=!0;var n=$("#PlantMaster_grid").jqGrid("getGridParam","data");n.length===0&&(alert("There is no data present in the grid"),isExport=!1);isExport&&(exportToExcel("PlantMaster_grid","Manufacturing Location Master"),isExport=!1)});